<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- CRITICAL: No-flash script for dark mode -->
    <script>
    (function() {
        'use strict';
        const THEME_KEY = 'theme';
        const DARK_MODE_CLASS = 'dark-mode';
        try {
            const savedTheme = localStorage.getItem(THEME_KEY);
            if (savedTheme === 'dark') {
                document.documentElement.classList.add(DARK_MODE_CLASS);
                if (document.body) document.body.classList.add(DARK_MODE_CLASS);
            } else if (savedTheme === 'light') {
                document.documentElement.classList.remove(DARK_MODE_CLASS);
                if (document.body) document.body.classList.remove(DARK_MODE_CLASS);
            } else {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add(DARK_MODE_CLASS);
                    if (document.body) document.body.classList.add(DARK_MODE_CLASS);
                }
            }
        } catch (e) {
            console.warn('Theme persistence not available:', e);
        }
    })();
    </script>
    
    <meta name="description" content="Complete interactive CSS properties playground for mastering all CSS properties with visual learning tools">
    <meta name="keywords" content="CSS, properties, playground, learning, interactive, web development, visual tools">
    <title>CSS Properties Master Playground - Complete Production Edition</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
:root {
    /* Unified theme variables that change with dark mode */
    --theme-bg-primary: #ffffff;
    --theme-bg-secondary: #f8f9fa;
    --theme-bg-tertiary: #e9ecef;
    --theme-text-primary: #495057;
    --theme-text-secondary: #6c757d;
    --theme-text-muted: #a0aec0;
    --theme-border-color: #dee2e6;
    --theme-border-focus: #667eea;
    --theme-shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
    --theme-shadow-md: 0 4px 15px rgba(0,0,0,0.15);
    --theme-shadow-lg: 0 8px 25px rgba(0,0,0,0.2);

    /* Enhanced gradients and colors */
    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --success-gradient: linear-gradient(135deg, #28a745, #20c997);
    --warning-gradient: linear-gradient(135deg, #ffc107, #ff8c00);
    --info-gradient: linear-gradient(135deg, #17a2b8, #20c997);
    --danger-gradient: linear-gradient(135deg, #dc3545, #fd79a8);
    --learning-gradient: linear-gradient(135deg, #6f42c1, #e83e8c);
    
    /* Individual colors for consistency */
    --success-color: #28a745;
    --warning-color: #ffc107;
    --danger-color: #dc3545;
    --info-color: #17a2b8;
    --learning-color: #6f42c1;
    
    /* Animation Variables */
    --transition-fast: 0.15s ease-out;
    --transition-base: 0.3s ease-out;
    --transition-slow: 0.5s ease-out;
    
    /* Glass morphism variables */
    --glass-bg: rgba(255, 255, 255, 0.1);
    --glass-border: rgba(255, 255, 255, 0.2);
    --glass-backdrop: blur(20px);
}

/* Dark mode overrides - enhanced */
body.dark-mode {
    --theme-bg-primary: #1a202c;
    --theme-bg-secondary: #2d3748;
    --theme-bg-tertiary: #4a5568;
    --theme-text-primary: #e2e8f0;
    --theme-text-secondary: #a0aec0;
    --theme-text-muted: #718096;
    --theme-border-color: #4a5568;
    --theme-border-focus: #63b3ed;
    --theme-shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
    --theme-shadow-md: 0 4px 15px rgba(0,0,0,0.4);
    --theme-shadow-lg: 0 8px 25px rgba(0,0,0,0.3);
    
    --glass-bg: rgba(0, 0, 0, 0.2);
    --glass-border: rgba(255, 255, 255, 0.1);
}

/* Enhanced global transitions */
*,
*::before,
*::after {
    transition: 
        background-color var(--transition-base),
        color var(--transition-base),
        border-color var(--transition-base),
        box-shadow var(--transition-base),
        transform var(--transition-fast);
}

body {
    font-family: system-ui, -apple-system, sans-serif;
    background-color: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
    line-height: 1.6;
    overflow-x: hidden;
}

/* Enhanced fullscreen mode */
.fullscreen-mode {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 9999;
    background: var(--theme-bg-secondary);
    overflow-y: auto;
    padding: 1rem;
}

.fullscreen-mode .navbar {
    position: sticky;
    top: 0;
    z-index: 10000;
}

.fullscreen-exit {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 10001;
    background: var(--danger-gradient);
    color: white;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: var(--theme-shadow-lg);
    transition: all var(--transition-base);
}

.fullscreen-exit:hover {
    transform: scale(1.1) rotate(90deg);
}

/* Enhanced hero section */
.hero-section {
    background: var(--primary-gradient);
    color: white;
    padding: 3rem 0;
    position: relative;
    overflow: hidden;
}

.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" patternUnits="userSpaceOnUse" width="100" height="100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)" opacity="0.1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grain)"/></svg>') repeat;
    opacity: 0.1;
    pointer-events: none;
}

.hero-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1rem;
    margin-top: 2rem;
}

.hero-stat {
    text-align: center;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    backdrop-filter: blur(10px);
}

.hero-stat-number {
    font-size: 2rem;
    font-weight: 700;
    display: block;
}

.hero-stat-label {
    font-size: 0.9rem;
    opacity: 0.8;
}

/* Enhanced property cards */
.property-card {
    background-color: var(--theme-bg-primary);
    border-radius: 16px;
    box-shadow: var(--theme-shadow-md);
    overflow: hidden;
    margin-bottom: 2rem;
    transition: all var(--transition-base);
    border: 1px solid var(--theme-border-color);
    position: relative;
}

.property-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--primary-gradient);
    opacity: 0;
    transition: opacity var(--transition-base);
}

.property-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--theme-shadow-lg);
}

.property-card:hover::before {
    opacity: 1;
}

.property-header {
    background: var(--primary-gradient);
    color: white;
    padding: 1.5rem 2rem;
    border-bottom: none;
    position: relative;
}

.property-header.colors { background: var(--success-gradient); }
.property-header.effects { background: var(--info-gradient); }
.property-header.animations { background: var(--warning-gradient); }
.property-header.advanced { background: var(--danger-gradient); }
.property-header.learning { background: var(--learning-gradient); }

.property-body {
    padding: 2rem;
    background-color: var(--theme-bg-primary);
    color: var(--theme-text-primary);
}

/* Enhanced demo container with visual tools */
.demo-container {
    background-color: var(--theme-bg-tertiary);
    border: 3px dashed var(--theme-border-focus);
    border-radius: 16px;
    padding: 3rem;
    min-height: 500px;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    margin: 1.5rem 0;
    position: relative;
    overflow: hidden;
    transition: all var(--transition-base);
}

.demo-container::before {
    content: 'Live Demo Area';
    position: absolute;
    top: -12px;
    left: 20px;
    background: var(--theme-border-focus);
    color: white;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 10;
    box-shadow: var(--theme-shadow-sm);
}

.demo-container.with-measurements {
    background-image: 
        linear-gradient(to right, rgba(102, 126, 234, 0.1) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(102, 126, 234, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
}

/* Enhanced demo elements */
.demo-element {
    background: var(--primary-gradient);
    color: white;
    padding: 2rem;
    border-radius: 12px;
    font-weight: 600;
    text-align: center;
    transition: all var(--transition-base);
    cursor: pointer;
    box-shadow: var(--theme-shadow-md);
    position: relative;
    min-width: 140px;
    min-height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    margin: 0.75rem;
    overflow: hidden;
}

.demo-element::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s ease;
}

.demo-element:hover::before {
    left: 100%;
}

.demo-element:hover {
    transform: scale(1.05) translateY(-2px);
    box-shadow: var(--theme-shadow-lg);
}

.demo-element.selected {
    outline: 3px solid var(--warning-color);
    outline-offset: 3px;
    transform: scale(1.02);
}

.demo-text {
    font-size: 1.3rem;
    font-weight: 500;
    color: var(--theme-text-primary);
    line-height: 1.6;
    max-width: 450px;
    padding: 1.5rem;
    background-color: var(--theme-bg-primary);
    border-radius: 12px;
    box-shadow: var(--theme-shadow-sm);
    border: 1px solid var(--theme-border-color);
    cursor: pointer;
    transition: all var(--transition-base);
}

.demo-text:hover {
    transform: translateY(-2px);
    box-shadow: var(--theme-shadow-md);
}

.demo-text.selected {
    outline: 3px solid var(--warning-color);
    outline-offset: 3px;
}

/* Enhanced code output with better syntax highlighting */
.code-output {
    background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
    color: #e6e6e6;
    border-radius: 12px;
    padding: 1.5rem;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', monospace;
    font-size: 14px;
    line-height: 1.6;
    max-height: 400px;
    overflow-y: auto;
    position: relative;
    margin: 1.5rem 0;
    white-space: pre;
    border: 1px solid var(--theme-border-color);
    box-shadow: var(--theme-shadow-md);
}

.code-output::-webkit-scrollbar {
    width: 8px;
}

.code-output::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

.code-output::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
}

.copy-btn {
    position: absolute;
    top: 12px;
    right: 12px;
    background: var(--success-color);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 0.8rem;
    cursor: pointer;
    opacity: 0.9;
    transition: all var(--transition-base);
    z-index: 10;
    font-weight: 500;
}

.copy-btn:hover {
    opacity: 1;
    transform: scale(1.05);
    box-shadow: var(--theme-shadow-sm);
}

.copy-btn.copied {
    background: var(--info-color);
    transform: scale(0.95);
}

/* Enhanced syntax highlighting */
.css-property { 
    color: #79b6f2; 
    font-weight: 600; 
}
.css-value { 
    color: #90ee90; 
    font-weight: 500;
}
.css-selector { 
    color: #ffd700; 
    font-weight: 600; 
}
.css-comment { 
    color: #9ca3af; 
    font-style: italic; 
}
.css-string { 
    color: #c3e88d; 
}
.css-number { 
    color: #f78c6c; 
    font-weight: 500;
}

/* Dark mode syntax highlighting adjustments */
body.dark-mode .css-property { color: #9db4ff; }
body.dark-mode .css-value { color: #a5d6a7; }
body.dark-mode .css-selector { color: #fff59d; }
body.dark-mode .css-comment { color: #757575; }

/* Enhanced control groups */
.control-group {
    background-color: var(--theme-bg-primary);
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    border-left: 4px solid var(--theme-border-focus);
    box-shadow: var(--theme-shadow-sm);
    transition: all var(--transition-base);
    border: 1px solid var(--theme-border-color);
    position: relative;
}

.control-group::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--glass-bg);
    border-radius: 12px;
    opacity: 0;
    transition: opacity var(--transition-base);
    pointer-events: none;
}

.control-group:hover {
    transform: translateY(-2px);
    box-shadow: var(--theme-shadow-md);
}

.control-group:hover::before {
    opacity: 1;
}

.control-label {
    font-weight: 700;
    color: var(--theme-text-primary);
    margin-bottom: 0.75rem;
    display: block;
    font-size: 1rem;
}

.range-value {
    font-weight: 700;
    color: var(--theme-border-focus);
    min-width: 5rem;
    text-align: center;
    font-size: 1rem;
    display: inline-block;
    background: var(--theme-bg-tertiary);
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
}

/* Enhanced tabs system */
.property-tabs {
    display: flex;
    background-color: var(--theme-bg-tertiary);
    border-radius: 12px;
    padding: 0.5rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 0.5rem;
    border: 1px solid var(--theme-border-color);
    box-shadow: var(--theme-shadow-sm);
}

.tab-btn {
    flex: 1;
    min-width: 120px;
    padding: 1rem 1.5rem;
    border: none;
    background: transparent;
    border-radius: 8px;
    cursor: pointer;
    transition: all var(--transition-base);
    font-weight: 600;
    font-size: 0.9rem;
    margin: 0.25rem;
    color: var(--theme-text-secondary);
    position: relative;
    overflow: hidden;
}

.tab-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
    transition: left 0.6s ease;
}

.tab-btn:hover::before {
    left: 100%;
}

.tab-btn.active {
    background: var(--theme-bg-primary);
    box-shadow: var(--theme-shadow-md);
    color: var(--theme-border-focus);
    transform: translateY(-2px);
}

.tab-btn:hover:not(.active) {
    background-color: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
    transform: translateY(-1px);
}

/* Enhanced preset buttons */
.preset-btn {
    padding: 0.75rem 1.25rem;
    border: 2px solid var(--theme-border-focus);
    background: transparent;
    color: var(--theme-border-focus);
    border-radius: 25px;
    cursor: pointer;
    transition: all var(--transition-base);
    margin: 0.5rem 0.25rem;
    font-size: 0.9rem;
    font-weight: 600;
    position: relative;
    overflow: hidden;
}

.preset-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: var(--theme-border-focus);
    transition: left 0.3s ease;
    z-index: -1;
}

.preset-btn:hover::before {
    left: 0;
}

.preset-btn:hover,
.preset-btn.active {
    color: white;
    transform: translateY(-2px);
    box-shadow: var(--theme-shadow-md);
}

/* Enhanced visual measurement tools */
.measurement-overlay {
    position: absolute;
    pointer-events: none;
    z-index: 1000;
    opacity: 0;
    transition: opacity var(--transition-base);
}

.measurement-overlay.active {
    opacity: 1;
}

.measurement-line {
    stroke: var(--warning-color);
    stroke-width: 2;
    stroke-dasharray: 5,5;
    animation: dash 1s linear infinite;
}

.measurement-text {
    fill: var(--warning-color);
    font-family: system-ui, sans-serif;
    font-size: 12px;
    font-weight: 600;
}

@keyframes dash {
    to {
        stroke-dashoffset: -10;
    }
}

/* Enhanced toolbar */
.visual-toolbar {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-backdrop);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 1rem;
    margin-bottom: 1.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    align-items: center;
}

.toolbar-btn {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border-color);
    color: var(--theme-text-primary);
    padding: 0.5rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all var(--transition-base);
    font-size: 0.9rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.toolbar-btn:hover {
    background: var(--theme-border-focus);
    color: white;
    transform: translateY(-1px);
}

.toolbar-btn.active {
    background: var(--theme-border-focus);
    color: white;
}

/* Advanced circular theme toggle */
.theme-toggle-container {
    position: relative;
    display: inline-block;
}

.theme-toggle {
    width: 60px;
    height: 32px;
    background: var(--theme-bg-tertiary);
    border: 2px solid var(--theme-border-color);
    border-radius: 20px;
    cursor: pointer;
    transition: all var(--transition-base);
    position: relative;
    overflow: hidden;
}

.theme-toggle::before {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 24px;
    height: 24px;
    background: var(--theme-text-primary);
    border-radius: 50%;
    transition: all var(--transition-base);
    box-shadow: var(--theme-shadow-sm);
}

.theme-toggle.dark::before {
    transform: translateX(26px);
    background: var(--theme-border-focus);
}

.theme-toggle:hover {
    border-color: var(--theme-border-focus);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.theme-toggle-icons {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 100%;
    display: flex;
    justify-content: space-between;
    padding: 0 6px;
    font-size: 0.8rem;
    z-index: 1;
}

.theme-icon {
    transition: all var(--transition-base);
}

.theme-toggle.dark .sun-icon {
    opacity: 0.3;
}

.theme-toggle:not(.dark) .moon-icon {
    opacity: 0.3;
}

/* Enhanced animations */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-20px); }
    60% { transform: translateY(-10px); }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

@keyframes fade {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

@keyframes slide {
    0%, 100% { transform: translateX(0); }
    50% { transform: translateX(20px); }
}

@keyframes zoom {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

@keyframes glow-pulse {
    0%, 100% { box-shadow: 0 0 5px currentColor; }
    50% { box-shadow: 0 0 20px currentColor, 0 0 30px currentColor; }
}

/* Animation classes */
.animation-demo {
    animation-duration: 2s;
    animation-iteration-count: infinite;
}

.spin { animation-name: spin; }
.bounce { animation-name: bounce; }
.shake { animation-name: shake; }
.fade { animation-name: fade; }
.slide { animation-name: slide; }
.zoom { animation-name: zoom; }
.float { animation-name: float; }
.glow-pulse { animation-name: glow-pulse; }

/* Animation controls */
.animation-controls {
    display: flex;
    gap: 0.75rem;
    margin: 1rem 0;
}

.animation-control-btn {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border-color);
    color: var(--theme-text-primary);
    padding: 0.5rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all var(--transition-base);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.animation-control-btn:hover {
    background: var(--theme-border-focus);
    color: white;
}

.animation-control-btn.active {
    background: var(--theme-border-focus);
    color: white;
}

/* Enhanced toast notifications */
.toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1050;
    max-width: 400px;
}

.toast-custom {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-backdrop);
    color: var(--theme-text-primary);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    box-shadow: var(--theme-shadow-lg);
    padding: 1.25rem;
    margin-bottom: 0.75rem;
    display: none;
    min-width: 320px;
    position: relative;
    overflow: hidden;
}

.toast-custom::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: var(--success-color);
}

.toast-custom.warning::before { background: var(--warning-color); }
.toast-custom.error::before { background: var(--danger-color); }
.toast-custom.info::before { background: var(--info-color); }

.toast-custom.show {
    display: block;
    animation: slideInToast 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes slideInToast {
    from { 
        transform: translateX(100%) scale(0.8); 
        opacity: 0; 
    }
    to { 
        transform: translateX(0) scale(1); 
        opacity: 1; 
    }
}

/* Enhanced learning tips */
.learning-tip {
    background: linear-gradient(135deg, #e7f3ff, #cce7ff);
    border-left: 4px solid var(--info-color);
    padding: 1.25rem;
    margin: 1.5rem 0;
    border-radius: 0 8px 8px 0;
    font-size: 0.95rem;
    position: relative;
    box-shadow: var(--theme-shadow-sm);
}

body.dark-mode .learning-tip {
    background: linear-gradient(135deg, #2d4a66, #1e3a5f);
    border-left-color: #63b3ed;
    color: var(--theme-text-primary);
}

.learning-tip::before {
    content: '💡';
    position: absolute;
    left: -2px;
    top: -2px;
    font-size: 1.5rem;
    background: var(--theme-bg-primary);
    border-radius: 50%;
    padding: 0.25rem;
}

/* Enhanced element controls */
.element-controls {
    background: var(--theme-bg-tertiary);
    border-radius: 12px;
    padding: 1.25rem;
    margin-bottom: 1.5rem;
    border: 1px solid var(--theme-border-color);
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    align-items: center;
}

.add-element-btn {
    background: var(--success-gradient);
    color: white;
    border: none;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all var(--transition-base);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.add-element-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--theme-shadow-md);
}

.clear-elements-btn {
    background: var(--danger-gradient);
    color: white;
    border: none;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all var(--transition-base);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.clear-elements-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--theme-shadow-md);
}

/* Enhanced form elements */
.form-select,
.form-control,
.form-range {
    background-color: var(--theme-bg-primary);
    border-color: var(--theme-border-color);
    color: var(--theme-text-primary);
    border-radius: 8px;
    transition: all var(--transition-base);
}

.form-select:focus,
.form-control:focus {
    background-color: var(--theme-bg-primary);
    border-color: var(--theme-border-focus);
    color: var(--theme-text-primary);
    box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
}

/* Enhanced range inputs */
input[type="range"] {
    background: var(--theme-bg-tertiary);
    height: 8px;
    border-radius: 4px;
    outline: none;
    -webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    background: var(--theme-border-focus);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: var(--theme-shadow-sm);
    transition: all var(--transition-base);
}

input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.2);
    box-shadow: var(--theme-shadow-md);
}

input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: var(--theme-border-focus);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    box-shadow: var(--theme-shadow-sm);
}

/* Enhanced navigation */
.navbar {
    background-color: var(--theme-bg-primary) !important;
    border-bottom: 1px solid var(--theme-border-color);
    backdrop-filter: blur(20px);
    box-shadow: var(--theme-shadow-sm);
}

.navbar-dark {
    background-color: var(--theme-bg-tertiary) !important;
}

.navbar-brand {
    font-weight: 700;
    font-size: 1.5rem;
}

/* Enhanced dropdowns */
.dropdown-menu {
    background-color: var(--theme-bg-primary);
    border-color: var(--theme-border-color);
    box-shadow: var(--theme-shadow-lg);
    border-radius: 12px;
    overflow: hidden;
}

.dropdown-item {
    color: var(--theme-text-primary);
    padding: 0.75rem 1.25rem;
    transition: all var(--transition-base);
}

.dropdown-item:hover {
    background-color: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
    transform: translateX(4px);
}

/* Enhanced color picker */
.color-input {
    width: 60px;
    height: 40px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: var(--theme-shadow-sm);
    transition: all var(--transition-base);
}

.color-input:hover {
    transform: scale(1.05);
    box-shadow: var(--theme-shadow-md);
}

/* Enhanced alerts */
.alert {
    border: 1px solid var(--theme-border-color);
    border-radius: 12px;
    backdrop-filter: blur(10px);
}

.alert-info {
    background: linear-gradient(135deg, rgba(23, 162, 184, 0.1), rgba(23, 162, 184, 0.05));
    border-color: rgba(23, 162, 184, 0.2);
    color: #0c5460;
}

body.dark-mode .alert-info {
    background: linear-gradient(135deg, rgba(23, 162, 184, 0.15), rgba(23, 162, 184, 0.1));
    border-color: rgba(23, 162, 184, 0.3);
    color: #7dd3fc;
}

/* Enhanced keyboard shortcuts display */
.keyboard-shortcuts {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-backdrop);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 1rem;
    color: var(--theme-text-primary);
    font-size: 0.85rem;
    opacity: 0;
    transform: translateY(20px);
    transition: all var(--transition-base);
    z-index: 1000;
    max-width: 250px;
}

.keyboard-shortcuts.show {
    opacity: 1;
    transform: translateY(0);
}

.shortcut-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.shortcut-key {
    background: var(--theme-bg-tertiary);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-family: monospace;
    font-size: 0.8rem;
}

/* Progress indicator for learning challenges */
.progress-indicator {
    background: var(--theme-bg-tertiary);
    border-radius: 10px;
    height: 8px;
    overflow: hidden;
    margin: 1rem 0;
}

.progress-bar-custom {
    background: var(--primary-gradient);
    height: 100%;
    border-radius: 10px;
    transition: width 0.6s ease;
    position: relative;
}

.progress-bar-custom::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* Enhanced responsive design */
@media (max-width: 768px) {
    .property-tabs {
        flex-direction: column;
    }
    
    .tab-btn {
        flex: none;
        margin: 0.25rem 0;
        min-width: auto;
    }
    
    .demo-container {
        min-height: 300px;
        padding: 1.5rem;
    }
    
    .property-body {
        padding: 1.5rem;
    }
    
    .visual-toolbar {
        justify-content: center;
    }
    
    .element-controls {
        flex-direction: column;
        align-items: stretch;
    }
    
    .keyboard-shortcuts {
        display: none;
    }
    
    .theme-toggle-container {
        margin: 1rem 0;
    }
}

@media (max-width: 576px) {
    .hero-section {
        padding: 2rem 0;
    }
    
    .property-header {
        padding: 1rem 1.5rem;
    }
    
    .property-body {
        padding: 1rem;
    }
    
    .demo-container {
        padding: 1rem;
        min-height: 250px;
    }
    
    .demo-element {
        min-width: 100px;
        min-height: 80px;
        padding: 1.5rem;
    }
}

/* Print styles */
@media print {
    .theme-toggle-container,
    .toast-container,
    .keyboard-shortcuts,
    .visual-toolbar,
    .element-controls {
        display: none;
    }
    
    .demo-container {
        border-style: solid;
    }
    
    .property-card {
        break-inside: avoid;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --theme-border-color: #000000;
        --theme-text-primary: #000000;
        --theme-text-secondary: #333333;
    }
    
    .demo-element {
        border: 2px solid #000000;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    html {
        scroll-behavior: auto;
    }
}

/* Focus visible support */
:focus-visible {
    outline: 2px solid var(--theme-border-focus);
    outline-offset: 2px;
    border-radius: 4px;
}

/* Smooth scroll behavior */
html {
    scroll-behavior: smooth;
}

/* Enhanced scrollbar styling */
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    background: var(--theme-bg-tertiary);
    border-radius: 6px;
}

::-webkit-scrollbar-thumb {
    background: var(--theme-border-color);
    border-radius: 6px;
    border: 2px solid var(--theme-bg-tertiary);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--theme-text-secondary);
}

/* Enhanced selection styling */
::selection {
    background: rgba(102, 126, 234, 0.3);
    color: var(--theme-text-primary);
}

::-moz-selection {
    background: rgba(102, 126, 234, 0.3);
    color: var(--theme-text-primary);
}
</style>
</head>

<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Keyboard shortcuts overlay -->
    <div class="keyboard-shortcuts" id="keyboard-shortcuts">
        <h6><i class="bi bi-keyboard me-2"></i>Shortcuts</h6>
        <div class="shortcut-item">
            <span>Switch tabs</span>
            <span class="shortcut-key">1-9</span>
        </div>
        <div class="shortcut-item">
            <span>Add element</span>
            <span class="shortcut-key">A</span>
        </div>
        <div class="shortcut-item">
            <span>Clear elements</span>
            <span class="shortcut-key">Del</span>
        </div>
        <div class="shortcut-item">
            <span>Toggle theme</span>
            <span class="shortcut-key">Ctrl+D</span>
        </div>
        <div class="shortcut-item">
            <span>Fullscreen</span>
            <span class="shortcut-key">F11</span>
        </div>
        <div class="shortcut-item">
            <span>Copy CSS</span>
            <span class="shortcut-key">Ctrl+Enter</span>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#" onclick="showToast('Welcome to the Ultimate CSS Playground!', 'info')">
                <i class="bi bi-code-square me-2"></i>CSS Properties Master
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link" href="#" onclick="switchPropertyTab('layout')">
                        <i class="bi bi-grid-3x3 me-1"></i>Layout
                    </a>
                    <a class="nav-link" href="#" onclick="switchPropertyTab('typography')">
                        <i class="bi bi-type me-1"></i>Typography
                    </a>
                    <a class="nav-link" href="#" onclick="switchPropertyTab('colors')">
                        <i class="bi bi-palette me-1"></i>Colors
                    </a>
                    <a class="nav-link" href="#" onclick="switchPropertyTab('effects')">
                        <i class="bi bi-stars me-1"></i>Effects
                    </a>
                    <a class="nav-link" href="#" onclick="switchPropertyTab('animations')">
                        <i class="bi bi-arrow-repeat me-1"></i>Animations
                    </a>
                    <a class="nav-link" href="#" onclick="switchPropertyTab('learning')">
                        <i class="bi bi-mortarboard me-1"></i>Learning
                    </a>
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-grid-3x3-gap me-1"></i>Presets
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="loadGlobalPreset('modern-card')">
                                <i class="bi bi-card-heading me-2"></i>Modern Card
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadGlobalPreset('glassmorphism')">
                                <i class="bi bi-droplet me-2"></i>Glassmorphism
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadGlobalPreset('neumorphism')">
                                <i class="bi bi-square me-2"></i>Neumorphism
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadGlobalPreset('cyberpunk')">
                                <i class="bi bi-lightning me-2"></i>Cyberpunk
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="loadGlobalPreset('responsive-grid')">
                                <i class="bi bi-grid me-2"></i>Responsive Grid
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadGlobalPreset('animation-showcase')">
                                <i class="bi bi-play-circle me-2"></i>Animation Showcase
                            </a></li>
                        </ul>
                    </div>
                    <li class="nav-item ms-lg-2">
                        <div class="theme-toggle-container">
                            <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                                <div class="theme-toggle-icons">
                                    <i class="bi bi-sun-fill sun-icon"></i>
                                    <i class="bi bi-moon-stars-fill moon-icon"></i>
                                </div>
                            </button>
                        </div>
                    </li>
                    <li class="nav-item ms-2">
                        <button class="toolbar-btn" onclick="toggleFullscreen()" title="Toggle Fullscreen (F11)">
                            <i class="bi bi-fullscreen" id="fullscreen-icon"></i>
                        </button>
                    </li>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main content wrapper -->
    <div id="main-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <h1 class="display-5 fw-bold mb-3">
                            <i class="bi bi-palette2 me-3"></i>CSS Properties Master Playground
                            <span class="badge bg-light text-dark ms-2">Pro</span>
                        </h1>
                        <p class="lead mb-4">Master ALL CSS properties with advanced interactive tools, visual learning aids, and comprehensive challenges. From basics to cutting-edge techniques - explore the complete power of modern CSS.</p>
                        
                        <!-- Hero stats -->
                        <div class="hero-stats">
                            <div class="hero-stat">
                                <span class="hero-stat-number">200+</span>
                                <span class="hero-stat-label">CSS Properties</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-number">50+</span>
                                <span class="hero-stat-label">Interactive Demos</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-number">25+</span>
                                <span class="hero-stat-label">Learning Challenges</span>
                            </div>
                            <div class="hero-stat">
                                <span class="hero-stat-number">100%</span>
                                <span class="hero-stat-label">Hands-on Learning</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 text-center">
                        <div class="d-flex justify-content-center align-items-center" style="height: 200px;">
                            <div class="d-flex flex-column align-items-center">
                                <i class="bi bi-palette2 display-1 opacity-75 mb-3"></i>
                                <small class="opacity-75">Visual CSS Learning Platform</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="container mt-4">
            <!-- Visual Toolbar -->
            <div class="visual-toolbar">
                <div class="d-flex align-items-center flex-wrap gap-2">
                    <span class="fw-bold me-3">Visual Tools:</span>
                    <button class="toolbar-btn" onclick="toggleMeasurements()" id="measurements-btn">
                        <i class="bi bi-rulers"></i>Measurements
                    </button>
                    <button class="toolbar-btn" onclick="togglePropertyGuide()" id="guide-btn">
                        <i class="bi bi-question-circle"></i>Property Guide
                    </button>
                    <button class="toolbar-btn" onclick="exportCSS()" title="Export all CSS">
                        <i class="bi bi-download"></i>Export CSS
                    </button>
                    <button class="toolbar-btn" onclick="resetAll()" title="Reset all properties">
                        <i class="bi bi-arrow-clockwise"></i>Reset All
                    </button>
                    <button class="toolbar-btn" onclick="toggleKeyboardShortcuts()" title="Show keyboard shortcuts">
                        <i class="bi bi-keyboard"></i>Shortcuts
                    </button>
                </div>
            </div>

            <!-- Property Categories Enhanced -->
            <div class="property-tabs">
                <button class="tab-btn active" onclick="switchPropertyTab('layout')">
                    <i class="bi bi-grid me-1"></i>Layout & Position
                </button>
                <button class="tab-btn" onclick="switchPropertyTab('typography')">
                    <i class="bi bi-type me-1"></i>Typography
                </button>
                <button class="tab-btn" onclick="switchPropertyTab('colors')">
                    <i class="bi bi-palette me-1"></i>Colors & Backgrounds
                </button>
                <button class="tab-btn" onclick="switchPropertyTab('sizing')">
                    <i class="bi bi-arrows-move me-1"></i>Sizing & Spacing
                </button>
                <button class="tab-btn" onclick="switchPropertyTab('borders')">
                    <i class="bi bi-square me-1"></i>Borders & Outlines
                </button>
                <button class="tab-btn" onclick="switchPropertyTab('effects')">
                    <i class="bi bi-stars me-1"></i>Effects & Filters
                </button>
                <button class="tab-btn" onclick="switchPropertyTab('animations')">
                    <i class="bi bi-arrow-repeat me-1"></i>Animations
                </button>
                <button class="tab-btn" onclick="switchPropertyTab('advanced')">
                    <i class="bi bi-gear me-1"></i>Advanced CSS
                </button>
                <button class="tab-btn" onclick="switchPropertyTab('learning')">
                    <i class="bi bi-mortarboard me-1"></i>Learning Lab
                </button>
            </div>

            <!-- Layout Properties Tab -->
            <div id="layout-tab" class="tab-content active">
                <div class="property-card">
                    <div class="property-header">
                        <h3 class="mb-0"><i class="bi bi-grid me-2"></i>Layout & Positioning</h3>
                        <p class="mb-0 opacity-75">Master element positioning, display types, and layout behavior with visual feedback</p>
                        <div class="live-indicator">LIVE</div>
                    </div>
                    <div class="property-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <!-- Enhanced Element Controls -->
                                <div class="element-controls">
                                    <button class="add-element-btn" onclick="addElement('layout')">
                                        <i class="bi bi-plus-circle me-1"></i>Add Element
                                    </button>
                                    <button class="clear-elements-btn" onclick="clearElements('layout')">
                                        <i class="bi bi-trash me-1"></i>Clear All
                                    </button>
                                    <span class="small text-muted">Click elements to select • Use A to add • Del to clear</span>
                                </div>

                                <!-- Display Property -->
                                <div class="control-group">
                                    <label class="control-label">Display Property</label>
                                    <div class="description-text">Defines how an element is displayed and participates in layout flow</div>
                                    <select class="form-select" id="layout-display" onchange="updateDemo('layout')">
                                        <option value="block">block - Full width, new line</option>
                                        <option value="inline">inline - Flows with text</option>
                                        <option value="inline-block">inline-block - Flows with sizing</option>
                                        <option value="flex" selected>flex - Flexible container</option>
                                        <option value="inline-flex">inline-flex - Inline flexible</option>
                                        <option value="grid">grid - Grid container</option>
                                        <option value="table">table - Table display</option>
                                        <option value="none">none - Hidden element</option>
                                    </select>
                                </div>

                                <!-- Position Property -->
                                <div class="control-group">
                                    <label class="control-label">Position Property</label>
                                    <div class="description-text">Determines the positioning method for an element</div>
                                    <select class="form-select" id="layout-position" onchange="updateDemo('layout')">
                                        <option value="static">static - Normal flow</option>
                                        <option value="relative" selected>relative - Relative to normal</option>
                                        <option value="absolute">absolute - Relative to parent</option>
                                        <option value="fixed">fixed - Relative to viewport</option>
                                        <option value="sticky">sticky - Scroll-based</option>
                                    </select>
                                </div>

                                <!-- Position Offsets -->
                                <div class="control-group" id="position-offsets">
                                    <label class="control-label">Position Offsets</label>
                                    <div class="description-text">Fine-tune positioning when position is not static</div>
                                    <div class="row g-3">
                                        <div class="col-6">
                                            <label class="form-label small">Top: <span class="range-value" id="layout-top-value">0px</span></label>
                                            <input type="range" class="form-range" id="layout-top" min="-100" max="100" value="0" oninput="updateRangeValue('layout-top', 'px')" onchange="updateDemo('layout')">
                                        </div>
                                        <div class="col-6">
                                            <label class="form-label small">Left: <span class="range-value" id="layout-left-value">0px</span></label>
                                            <input type="range" class="form-range" id="layout-left" min="-100" max="100" value="0" oninput="updateRangeValue('layout-left', 'px')" onchange="updateDemo('layout')">
                                        </div>
                                    </div>
                                </div>

                                <!-- Z-Index -->
                                <div class="control-group">
                                    <label class="control-label">Z-Index: <span class="range-value" id="layout-z-index-value">1</span></label>
                                    <div class="description-text">Controls stacking order of positioned elements (higher = on top)</div>
                                    <input type="range" class="form-range" id="layout-z-index" min="-10" max="10" value="1" oninput="updateRangeValue('layout-z-index')" onchange="updateDemo('layout')">
                                </div>

                                <!-- Float -->
                                <div class="control-group">
                                    <label class="control-label">Float Property</label>
                                    <div class="description-text">Makes element float to left or right (legacy layout method)</div>
                                    <select class="form-select" id="layout-float" onchange="updateDemo('layout')">
                                        <option value="none" selected>none - No floating</option>
                                        <option value="left">left - Float left</option>
                                        <option value="right">right - Float right</option>
                                    </select>
                                </div>

                                <!-- Overflow -->
                                <div class="control-group">
                                    <label class="control-label">Overflow Behavior</label>
                                    <div class="description-text">Controls what happens when content overflows the container</div>
                                    <select class="form-select" id="layout-overflow" onchange="updateDemo('layout')">
                                        <option value="visible" selected>visible - Content overflows</option>
                                        <option value="hidden">hidden - Clips overflow</option>
                                        <option value="scroll">scroll - Always scrollbars</option>
                                        <option value="auto">auto - Scrollbars when needed</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <!-- Demo Area -->
                                <h5><i class="bi bi-eye me-2"></i>Live Preview</h5>
                                <div class="demo-container" id="layout-demo-container">
                                    <div class="demo-element selected" id="layout-demo-element-0" onclick="selectElement('layout', 0)">Element 1</div>
                                </div>
                                
                                <!-- Quick Presets -->
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Quick Layout Presets:</label>
                                    <div>
                                        <button class="preset-btn" onclick="applyLayoutPreset('centered')">
                                            <i class="bi bi-bullseye me-1"></i>Centered
                                        </button>
                                        <button class="preset-btn" onclick="applyLayoutPreset('fixed-header')">
                                            <i class="bi bi-pin me-1"></i>Fixed Header
                                        </button>
                                        <button class="preset-btn" onclick="applyLayoutPreset('sticky-nav')">
                                            <i class="bi bi-menu-up me-1"></i>Sticky Nav
                                        </button>
                                        <button class="preset-btn" onclick="applyLayoutPreset('floating')">
                                            <i class="bi bi-box me-1"></i>Floating
                                        </button>
                                        <button class="preset-btn" onclick="applyLayoutPreset('overlay')">
                                            <i class="bi bi-layers me-1"></i>Overlay
                                        </button>
                                    </div>
                                </div>

                                <!-- Enhanced Tips -->
                                <div class="alert alert-info">
                                    <h6><i class="bi bi-lightbulb me-2"></i>Pro Layout Tips</h6>
                                    <ul class="mb-0 small">
                                        <li>Use <code>flex</code> or <code>grid</code> for modern, robust layouts</li>
                                        <li><code>position: sticky</code> is perfect for navigation bars that stick on scroll</li>
                                        <li><code>z-index</code> only works on positioned elements (not static)</li>
                                        <li><code>overflow: hidden</code> creates new stacking context and clips content</li>
                                        <li>Avoid <code>float</code> for layout - use flexbox or grid instead</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Generated CSS -->
                        <div class="row mt-4">
                            <div class="col-12">
                                <h5><i class="bi bi-code-square me-2"></i>Generated CSS</h5>
                                <div class="position-relative">
                                    <button class="copy-btn" onclick="copyCode('layout-css-output')">
                                        <i class="bi bi-clipboard me-1"></i>Copy
                                    </button>
                                    <div class="code-output" id="layout-css-output">/* CSS will be generated here as you interact with controls */</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Typography Properties Tab -->
            <div id="typography-tab" class="tab-content">
                <div class="property-card">
                    <div class="property-header">
                        <h3 class="mb-0"><i class="bi bi-type me-2"></i>Typography Properties</h3>
                        <p class="mb-0 opacity-75">Master text styling, fonts, spacing, and advanced typography effects</p>
                        <div class="live-indicator">LIVE</div>
                    </div>
                    <div class="property-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <!-- Element Controls -->
                                <div class="element-controls">
                                    <button class="add-element-btn" onclick="addElement('typography')">
                                        <i class="bi bi-plus-circle me-1"></i>Add Text Element
                                    </button>
                                    <button class="clear-elements-btn" onclick="clearElements('typography')">
                                        <i class="bi bi-trash me-1"></i>Clear All
                                    </button>
                                    <span class="small text-muted">Click text elements to select and style them</span>
                                </div>

                                <!-- Font Family -->
                                <div class="control-group">
                                    <label class="control-label">Font Family</label>
                                    <div class="description-text">Sets the typeface for text - choose web-safe fonts or system fonts</div>
                                    <select class="form-select" id="typography-font-family" onchange="updateDemo('typography')">
                                        <option value="Arial, sans-serif">Arial (Sans-serif)</option>
                                        <option value="Georgia, serif" selected>Georgia (Serif)</option>
                                        <option value="'Courier New', monospace">Courier New (Monospace)</option>
                                        <option value="'Times New Roman', serif">Times New Roman</option>
                                        <option value="Helvetica, sans-serif">Helvetica</option>
                                        <option value="Verdana, sans-serif">Verdana</option>
                                        <option value="system-ui, sans-serif">System UI</option>
                                        <option value="'Inter', system-ui, sans-serif">Inter (Modern)</option>
                                    </select>
                                </div>

                                <!-- Font Size -->
                                <div class="control-group">
                                    <label class="control-label">Font Size: <span class="range-value" id="typography-font-size-value">24px</span></label>
                                    <div class="description-text">Controls the size of text - affects readability and hierarchy</div>
                                    <input type="range" class="form-range" id="typography-font-size" min="8" max="72" value="24" oninput="updateRangeValue('typography-font-size', 'px')" onchange="updateDemo('typography')">
                                </div>

                                <!-- Font Weight -->
                                <div class="control-group">
                                    <label class="control-label">Font Weight</label>
                                    <div class="description-text">Controls the thickness/boldness of text characters</div>
                                    <select class="form-select" id="typography-font-weight" onchange="updateDemo('typography')">
                                        <option value="100">100 - Thin</option>
                                        <option value="200">200 - Extra Light</option>
                                        <option value="300">300 - Light</option>
                                        <option value="400" selected>400 - Normal</option>
                                        <option value="500">500 - Medium</option>
                                        <option value="600">600 - Semi Bold</option>
                                        <option value="700">700 - Bold</option>
                                        <option value="800">800 - Extra Bold</option>
                                        <option value="900">900 - Black</option>
                                    </select>
                                </div>

                                <!-- Line Height -->
                                <div class="control-group">
                                    <label class="control-label">Line Height: <span class="range-value" id="typography-line-height-value">1.5</span></label>
                                    <div class="description-text">Controls vertical spacing between lines - crucial for readability</div>
                                    <input type="range" class="form-range" id="typography-line-height" min="0.8" max="3" step="0.1" value="1.5" oninput="updateRangeValue('typography-line-height')" onchange="updateDemo('typography')">
                                </div>

                                <!-- Letter Spacing -->
                                <div class="control-group">
                                    <label class="control-label">Letter Spacing: <span class="range-value" id="typography-letter-spacing-value">0px</span></label>
                                    <div class="description-text">Controls horizontal space between characters</div>
                                    <input type="range" class="form-range" id="typography-letter-spacing" min="-2" max="10" step="0.5" value="0" oninput="updateRangeValue('typography-letter-spacing', 'px')" onchange="updateDemo('typography')">
                                </div>

                                <!-- Text Transform -->
                                <div class="control-group">
                                    <label class="control-label">Text Transform</label>
                                    <div class="description-text">Controls text capitalization without changing the HTML</div>
                                    <select class="form-select" id="typography-text-transform" onchange="updateDemo('typography')">
                                        <option value="none" selected>none - No transformation</option>
                                        <option value="uppercase">UPPERCASE - All capitals</option>
                                        <option value="lowercase">lowercase - All lowercase</option>
                                        <option value="capitalize">Capitalize Each Word</option>
                                    </select>
                                </div>

                                <!-- Text Decoration -->
                                <div class="control-group">
                                    <label class="control-label">Text Decoration</label>
                                    <div class="description-text">Adds decorative lines to text</div>
                                    <select class="form-select" id="typography-text-decoration" onchange="updateDemo('typography')">
                                        <option value="none" selected>none - No decoration</option>
                                        <option value="underline">underline - Line below</option>
                                        <option value="overline">overline - Line above</option>
                                        <option value="line-through">line-through - Strikethrough</option>
                                        <option value="underline overline">underline + overline</option>
                                    </select>
                                </div>

                                <!-- Text Align -->
                                <div class="control-group">
                                    <label class="control-label">Text Alignment</label>
                                    <div class="description-text">Controls horizontal text alignment within container</div>
                                    <select class="form-select" id="typography-text-align" onchange="updateDemo('typography')">
                                        <option value="left">left - Aligned to left</option>
                                        <option value="center" selected>center - Centered</option>
                                        <option value="right">right - Aligned to right</option>
                                        <option value="justify">justify - Justified text</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <h5><i class="bi bi-eye me-2"></i>Live Preview</h5>
                                <div class="demo-container" id="typography-demo-container">
                                    <div class="demo-text selected" id="typography-demo-element-0" onclick="selectElement('typography', 0)">
                                        The quick brown fox jumps over the lazy dog. This text demonstrates typography properties and how they affect readability and visual appeal.
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Typography Presets:</label>
                                    <div>
                                        <button class="preset-btn" onclick="applyTypographyPreset('heading')">
                                            <i class="bi bi-type-h1 me-1"></i>Heading
                                        </button>
                                        <button class="preset-btn" onclick="applyTypographyPreset('body')">
                                            <i class="bi bi-paragraph me-1"></i>Body Text
                                        </button>
                                        <button class="preset-btn" onclick="applyTypographyPreset('caption')">
                                            <i class="bi bi-fonts me-1"></i>Caption
                                        </button>
                                        <button class="preset-btn" onclick="applyTypographyPreset('code')">
                                            <i class="bi bi-code me-1"></i>Code
                                        </button>
                                        <button class="preset-btn" onclick="applyTypographyPreset('display')">
                                            <i class="bi bi-type-bold me-1"></i>Display
                                        </button>
                                    </div>
                                </div>

                                <div class="alert alert-info">
                                    <h6><i class="bi bi-lightbulb me-2"></i>Typography Best Practices</h6>
                                    <ul class="mb-0 small">
                                        <li>Use <code>line-height: 1.5-1.6</code> for optimal body text readability</li>
                                        <li>Limit line length to 50-75 characters for comfortable reading</li>
                                        <li><code>letter-spacing</code> improves readability for uppercase text</li>
                                        <li>Use font stacks as fallbacks: <code>'Inter', system-ui, sans-serif</code></li>
                                        <li>Maintain consistent typography scale throughout your design</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-12">
                                <h5><i class="bi bi-code-square me-2"></i>Generated CSS</h5>
                                <div class="position-relative">
                                    <button class="copy-btn" onclick="copyCode('typography-css-output')">
                                        <i class="bi bi-clipboard me-1"></i>Copy
                                    </button>
                                    <div class="code-output" id="typography-css-output">/* Typography CSS will be generated here */</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Colors Tab -->
            <div id="colors-tab" class="tab-content">
                <div class="property-card">
                    <div class="property-header colors">
                        <h3 class="mb-0"><i class="bi bi-palette me-2"></i>Colors & Backgrounds</h3>
                        <p class="mb-0 opacity-75">Master color theory, gradients, and background properties</p>
                        <div class="live-indicator">LIVE</div>
                    </div>
                    <div class="property-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <!-- Element Controls -->
                                <div class="element-controls">
                                    <button class="add-element-btn" onclick="addElement('colors')">
                                        <i class="bi bi-plus-circle me-1"></i>Add Element
                                    </button>
                                    <button class="clear-elements-btn" onclick="clearElements('colors')">
                                        <i class="bi bi-trash me-1"></i>Clear All
                                    </button>
                                    <span class="small text-muted">Click elements to select and style their colors</span>
                                </div>

                                <!-- Text Color -->
                                <div class="control-group">
                                    <label class="control-label">Text Color</label>
                                    <div class="description-text">Sets the color of text content - ensure good contrast for accessibility</div>
                                    <div class="d-flex gap-2 align-items-center">
                                        <input type="color" class="color-input" id="colors-text-color" value="#ffffff" onchange="updateDemo('colors')">
                                        <input type="text" class="form-control" id="colors-text-color-hex" value="#ffffff" onchange="updateColorFromHex('colors', 'text-color')" placeholder="#ffffff">
                                    </div>
                                </div>

                                <!-- Background Color -->
                                <div class="control-group">
                                    <label class="control-label">Background Color</label>
                                    <div class="description-text">Sets the background color of the element</div>
                                    <div class="d-flex gap-2 align-items-center">
                                        <input type="color" class="color-input" id="colors-bg-color" value="#667eea" onchange="updateDemo('colors')">
                                        <input type="text" class="form-control" id="colors-bg-color-hex" value="#667eea" onchange="updateColorFromHex('colors', 'bg-color')" placeholder="#667eea">
                                    </div>
                                </div>

                                <!-- Opacity -->
                                <div class="control-group">
                                    <label class="control-label">Opacity: <span class="range-value" id="colors-opacity-value">1</span></label>
                                    <div class="description-text">Controls the transparency of the entire element (0 = invisible, 1 = opaque)</div>
                                    <input type="range" class="form-range" id="colors-opacity" min="0" max="1" step="0.1" value="1" oninput="updateRangeValue('colors-opacity')" onchange="updateDemo('colors')">
                                </div>

                                <!-- Background Gradient -->
                                <div class="control-group">
                                    <label class="control-label">Background Gradient</label>
                                    <div class="description-text">Apply gradient backgrounds for modern visual effects</div>
                                    <select class="form-select" id="colors-gradient" onchange="updateDemo('colors')">
                                        <option value="none" selected>none - Solid color</option>
                                        <option value="linear-gradient(45deg, #667eea, #764ba2)">Linear Blue-Purple</option>
                                        <option value="linear-gradient(135deg, #667eea, #764ba2)">Diagonal Blue-Purple</option>
                                        <option value="radial-gradient(circle, #667eea, #764ba2)">Radial Blue-Purple</option>
                                        <option value="linear-gradient(90deg, #ff6b6b, #4ecdc4)">Linear Red-Teal</option>
                                        <option value="linear-gradient(45deg, #f093fb, #f5576c)">Linear Pink-Red</option>
                                        <option value="conic-gradient(from 0deg, #667eea, #764ba2, #667eea)">Conic Gradient</option>
                                    </select>
                                </div>

                                <!-- Background Size -->
                                <div class="control-group">
                                    <label class="control-label">Background Size</label>
                                    <div class="description-text">Controls how background images/gradients are sized</div>
                                    <select class="form-select" id="colors-bg-size" onchange="updateDemo('colors')">
                                        <option value="auto">auto - Natural size</option>
                                        <option value="cover" selected>cover - Fill container</option>
                                        <option value="contain">contain - Fit in container</option>
                                        <option value="100% 100%">100% 100% - Stretch to fill</option>
                                        <option value="50%">50% - Half size</option>
                                    </select>
                                </div>

                                <!-- Background Repeat -->
                                <div class="control-group">
                                    <label class="control-label">Background Repeat</label>
                                    <div class="description-text">Controls if/how background images repeat</div>
                                    <select class="form-select" id="colors-bg-repeat" onchange="updateDemo('colors')">
                                        <option value="no-repeat" selected>no-repeat - Single image</option>
                                        <option value="repeat">repeat - Tile both directions</option>
                                        <option value="repeat-x">repeat-x - Tile horizontally</option>
                                        <option value="repeat-y">repeat-y - Tile vertically</option>
                                        <option value="space">space - Space between tiles</option>
                                        <option value="round">round - Stretch tiles to fit</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <h5><i class="bi bi-eye me-2"></i>Live Preview</h5>
                                <div class="demo-container" id="colors-demo-container">
                                    <div class="demo-element selected" id="colors-demo-element-0" onclick="selectElement('colors', 0)">Color Demo</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Color Presets:</label>
                                    <div>
                                        <button class="preset-btn" onclick="applyColorPreset('primary')">
                                            <i class="bi bi-circle-fill text-primary me-1"></i>Primary
                                        </button>
                                        <button class="preset-btn" onclick="applyColorPreset('success')">
                                            <i class="bi bi-circle-fill text-success me-1"></i>Success
                                        </button>
                                        <button class="preset-btn" onclick="applyColorPreset('warning')">
                                            <i class="bi bi-circle-fill text-warning me-1"></i>Warning
                                        </button>
                                        <button class="preset-btn" onclick="applyColorPreset('gradient')">
                                            <i class="bi bi-rainbow me-1"></i>Gradient
                                        </button>
                                        <button class="preset-btn" onclick="applyColorPreset('glassmorphism')">
                                            <i class="bi bi-droplet me-1"></i>Glass
                                        </button>
                                    </div>
                                </div>

                                <div class="alert alert-info">
                                    <h6><i class="bi bi-lightbulb me-2"></i>Color Design Tips</h6>
                                    <ul class="mb-0 small">
                                        <li>Ensure sufficient contrast ratio for accessibility (4.5:1 minimum)</li>
                                        <li>Use HSL colors for easier color manipulation and theming</li>
                                        <li><code>currentColor</code> keyword uses the element's text color</li>
                                        <li>CSS custom properties make color themes easier to manage</li>
                                        <li>Modern gradients can create stunning visual effects</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-12">
                                <h5><i class="bi bi-code-square me-2"></i>Generated CSS</h5>
                                <div class="position-relative">
                                    <button class="copy-btn" onclick="copyCode('colors-css-output')">
                                        <i class="bi bi-clipboard me-1"></i>Copy
                                    </button>
                                    <div class="code-output" id="colors-css-output">/* Color CSS will be generated here */</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sizing Tab -->
            <div id="sizing-tab" class="tab-content">
                <div class="property-card">
                    <div class="property-header">
                        <h3 class="mb-0"><i class="bi bi-arrows-move me-2"></i>Sizing & Spacing</h3>
                        <p class="mb-0 opacity-75">Master the CSS box model with width, height, margins, padding, and modern units</p>
                        <div class="live-indicator">LIVE</div>
                    </div>
                    <div class="property-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="element-controls">
                                    <button class="add-element-btn" onclick="addElement('sizing')">
                                        <i class="bi bi-plus-circle me-1"></i>Add Element
                                    </button>
                                    <button class="clear-elements-btn" onclick="clearElements('sizing')">
                                        <i class="bi bi-trash me-1"></i>Clear All
                                    </button>
                                    <span class="small text-muted">Click elements to select and resize them</span>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Width: <span class="range-value" id="sizing-width-value">200px</span></label>
                                    <div class="description-text">Controls the width of the element</div>
                                    <input type="range" class="form-range" id="sizing-width" min="50" max="400" value="200" oninput="updateRangeValue('sizing-width', 'px')" onchange="updateDemo('sizing')">
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Height: <span class="range-value" id="sizing-height-value">100px</span></label>
                                    <div class="description-text">Controls the height of the element</div>
                                    <input type="range" class="form-range" id="sizing-height" min="50" max="300" value="100" oninput="updateRangeValue('sizing-height', 'px')" onchange="updateDemo('sizing')">
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Margin: <span class="range-value" id="sizing-margin-value">10px</span></label>
                                    <div class="description-text">Controls the outer space around the element</div>
                                    <input type="range" class="form-range" id="sizing-margin" min="0" max="50" value="10" oninput="updateRangeValue('sizing-margin', 'px')" onchange="updateDemo('sizing')">
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Padding: <span class="range-value" id="sizing-padding-value">20px</span></label>
                                    <div class="description-text">Controls the inner space within the element</div>
                                    <input type="range" class="form-range" id="sizing-padding" min="0" max="50" value="20" oninput="updateRangeValue('sizing-padding', 'px')" onchange="updateDemo('sizing')">
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Box Sizing</label>
                                    <div class="description-text">Controls how width and height are calculated</div>
                                    <select class="form-select" id="sizing-box-sizing" onchange="updateDemo('sizing')">
                                        <option value="content-box">content-box (default)</option>
                                        <option value="border-box" selected>border-box (includes padding & border)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <h5><i class="bi bi-eye me-2"></i>Live Preview</h5>
                                <div class="demo-container" id="sizing-demo-container">
                                    <div class="demo-element selected" id="sizing-demo-element-0" onclick="selectElement('sizing', 0)">Sizing Demo</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Sizing Presets:</label>
                                    <div>
                                        <button class="preset-btn" onclick="applySizingPreset('small')">
                                            <i class="bi bi-square me-1"></i>Small
                                        </button>
                                        <button class="preset-btn" onclick="applySizingPreset('medium')">
                                            <i class="bi bi-square me-1"></i>Medium
                                        </button>
                                        <button class="preset-btn" onclick="applySizingPreset('large')">
                                            <i class="bi bi-square me-1"></i>Large
                                        </button>
                                    </div>
                                </div>

                                <div class="alert alert-info">
                                    <h6><i class="bi bi-lightbulb

        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
            crossorigin="anonymous"></script>
    
    <script>
        // Enhanced Global State Management
        let currentTab = 'layout';
        let elementCounts = {
            layout: 1,
            typography: 1,
            colors: 1,
            sizing: 1,
            borders: 1,
            effects: 1,
            animations: 1,
            advanced: 4,
            learning: 1
        };
        
        let selectedElements = {
            layout: 0,
            typography: 0,
            colors: 0,
            sizing: 0,
            borders: 0,
            effects: 0,
            animations: 0,
            advanced: 0,
            learning: 0
        };

        let measurementsEnabled = false;
        let propertyGuideEnabled = false;
        let isFullscreen = false;

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializePlayground();
            setupKeyboardShortcuts();
            setupAdvancedFeatures();
            
            // Initialize all demos
            Object.keys(elementCounts).forEach(tab => {
                if (tab !== 'learning') {
                    updateDemo(tab);
                }
            });
            
            // Show welcome message
            setTimeout(() => {
                showToast('🎉 Welcome to CSS Properties Master Playground! Press Ctrl+D to toggle theme, use number keys to switch tabs.', 'info');
            }, 1000);
        });

        function initializePlayground() {
            // Initialize range values
            const rangeInputs = document.querySelectorAll('input[type="range"]');
            rangeInputs.forEach(input => {
                const id = input.id;
                if (id.includes('font-size') || id.includes('width') || id.includes('height') || 
                    id.includes('margin') || id.includes('padding') || id.includes('radius') ||
                    id.includes('shadow') || id.includes('top') || id.includes('left') ||
                    id.includes('blur') || id.includes('spacing')) {
                    updateRangeValue(id, 'px');
                } else if (id.includes('opacity') || id.includes('line-height') || 
                          id.includes('scale') || id.includes('grow') || id.includes('shrink')) {
                    updateRangeValue(id);
                } else if (id.includes('brightness') || id.includes('contrast')) {
                    updateRangeValue(id, '%');
                } else if (id.includes('rotate')) {
                    updateRangeValue(id, 'deg');
                } else if (id.includes('duration') || id.includes('transition')) {
                    updateRangeValue(id, 's');
                }
            });
        }

        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Prevent shortcuts when typing in inputs
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
                    return;
                }

                // Number keys 1-9 to switch tabs
                if (e.key >= '1' && e.key <= '9' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    const tabNames = ['layout', 'typography', 'colors', 'sizing', 'borders', 'effects', 'animations', 'advanced', 'learning'];
                    const tabIndex = parseInt(e.key) - 1;
                    if (tabIndex < tabNames.length) {
                        switchPropertyTab(tabNames[tabIndex]);
                    }
                }

                // A key to add new element
                if (e.key === 'a' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    addElement(currentTab);
                }

                // Delete key to clear elements
                if (e.key === 'Delete' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    clearElements(currentTab);
                }

                // Ctrl/Cmd + Enter to copy current CSS
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    e.preventDefault();
                    const activeTab = document.querySelector('.tab-content.active');
                    if (activeTab) {
                        const codeOutput = activeTab.querySelector('.code-output');
                        if (codeOutput) {
                            copyToClipboard(codeOutput.textContent || '');
                            showToast('CSS copied via keyboard shortcut!', 'success');
                        }
                    }
                }

                // Ctrl/Cmd + D to toggle dark mode
                if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                    e.preventDefault();
                    toggleTheme();
                }

                // F11 for fullscreen
                if (e.key === 'F11') {
                    e.preventDefault();
                    toggleFullscreen();
                }

                // ESC to exit fullscreen
                if (e.key === 'Escape' && isFullscreen) {
                    e.preventDefault();
                    toggleFullscreen();
                }

                // M for measurements
                if (e.key === 'm' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    toggleMeasurements();
                }

                // G for guide
                if (e.key === 'g' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    togglePropertyGuide();
                }

                // H for help/shortcuts
                if (e.key === 'h' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    toggleKeyboardShortcuts();
                }
            });
        }

        function setupAdvancedFeatures() {
            // Setup theme toggle
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
                updateThemeToggle();
            }

            // Setup intersection observer for scroll effects
            const cards = document.querySelectorAll('.property-card');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationDelay = Math.random() * 0.3 + 's';
                        entry.target.classList.add('animate-in');
                    }
                });
            }, { threshold: 0.1 });

            cards.forEach(card => observer.observe(card));
        }

        // Enhanced Tab Switching
        function switchPropertyTab(tabName) {
            currentTab = tabName;
            
            // Hide all tab contents with animation
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.opacity = '0';
                tab.style.transform = 'translateY(10px)';
                setTimeout(() => {
                    tab.classList.remove('active');
                }, 150);
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab content with animation
            setTimeout(() => {
                const targetTab = document.getElementById(tabName + '-tab');
                if (targetTab) {
                    targetTab.classList.add('active');
                    targetTab.style.opacity = '1';
                    targetTab.style.transform = 'translateY(0)';
                }
                
                // Add active class to clicked button
                const activeBtn = document.querySelector(`[onclick="switchPropertyTab('${tabName}')"]`);
                if (activeBtn) {
                    activeBtn.classList.add('active');
                }
            }, 150);

            // Update URL without reload
            if (history.pushState) {
                history.pushState(null, null, `#${tabName}`);
            }

            showToast(`Switched to ${tabName.charAt(0).toUpperCase() + tabName.slice(1)} properties`, 'info');
        }

        // Enhanced range value updates
        function updateRangeValue(id, unit = '') {
            const element = document.getElementById(id);
            const valueElement = document.getElementById(id + '-value');
            if (element && valueElement) {
                valueElement.textContent = element.value + unit;
                
                // Add visual feedback
                valueElement.style.transform = 'scale(1.1)';
                valueElement.style.color = 'var(--theme-border-focus)';
                setTimeout(() => {
                    valueElement.style.transform = 'scale(1)';
                    valueElement.style.color = 'var(--theme-border-focus)';
                }, 200);
            }
        }

        // Enhanced element management
        function addElement(tabName) {
            const container = document.getElementById(tabName + '-demo-container');
            if (!container) return;

            const elementId = tabName + '-demo-element-' + elementCounts[tabName];
            const element = document.createElement('div');
            element.id = elementId;
            element.onclick = function() { selectElement(tabName, elementCounts[tabName]); };

            if (tabName === 'typography') {
                element.className = 'demo-text';
                element.textContent = `Text Element ${elementCounts[tabName] + 1}: Lorem ipsum dolor sit amet.`;
            } else {
                element.className = 'demo-element';
                element.textContent = `Element ${elementCounts[tabName] + 1}`;
            }

            // Add with animation
            element.style.opacity = '0';
            element.style.transform = 'scale(0.8)';
            container.appendChild(element);
            
            setTimeout(() => {
                element.style.opacity = '1';
                element.style.transform = 'scale(1)';
            }, 50);

            elementCounts[tabName]++;
            
            // Select the new element
            selectElement(tabName, elementCounts[tabName] - 1);
            updateDemo(tabName);
            showToast(`Added new ${tabName} element!`, 'success');
        }

        function clearElements(tabName) {
            const container = document.getElementById(tabName + '-demo-container');
            if (!container) return;

            // Animate out existing elements
            const elements = container.querySelectorAll('.demo-element, .demo-text');
            elements.forEach((el, index) => {
                setTimeout(() => {
                    el.style.opacity = '0';
                    el.style.transform = 'scale(0.8)';
                }, index * 50);
            });

            setTimeout(() => {
                container.innerHTML = '';
                elementCounts[tabName] = 0;
                selectedElements[tabName] = 0;
                
                // Add one element back
                addElement(tabName);
                showToast(`Cleared all ${tabName} elements!`, 'warning');
            }, elements.length * 50 + 200);
        }

        function selectElement(tabName, index) {
            // Remove selection from all elements in this tab
            const container = document.getElementById(tabName + '-demo-container');
            if (container) {
                container.querySelectorAll('.demo-element, .demo-text').forEach(el => {
                    el.classList.remove('selected');
                });
            }

            // Add selection to clicked element
            const element = document.getElementById(tabName + '-demo-element-' + index);
            if (element) {
                element.classList.add('selected');
                selectedElements[tabName] = index;
                
                // Visual feedback
                element.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    element.style.transform = '';
                }, 200);
            }
        }

        // Enhanced color updates
        function updateColorFromHex(tabName, colorType) {
            const hexInput = document.getElementById(tabName + '-' + colorType + '-hex');
            const colorInput = document.getElementById(tabName + '-' + colorType);
            
            if (hexInput && colorInput) {
                colorInput.value = hexInput.value;
                updateDemo(tabName);
            }
        }

        // Additional demo update functions for remaining tabs
        function updateSizingDemo() {
            const selectedElement = document.getElementById('sizing-demo-element-' + selectedElements.sizing);
            if (!selectedElement) return;

            const width = document.getElementById('sizing-width').value + 'px';
            const height = document.getElementById('sizing-height').value + 'px';
            const margin = document.getElementById('sizing-margin').value + 'px';
            const padding = document.getElementById('sizing-padding').value + 'px';
            const boxSizing = document.getElementById('sizing-box-sizing').value;

            Object.assign(selectedElement.style, {
                width, height, margin, padding, boxSizing
            });

            generateSizingCSS();
        }

        function generateSizingCSS() {
            const width = document.getElementById('sizing-width').value;
            const height = document.getElementById('sizing-height').value;
            const margin = document.getElementById('sizing-margin').value;
            const padding = document.getElementById('sizing-padding').value;
            const boxSizing = document.getElementById('sizing-box-sizing').value;

            let css = `<span class="css-selector">.sizing-element</span> {\n`;
            css += `  <span class="css-property">width</span>: <span class="css-value">${width}px</span>;\n`;
            css += `  <span class="css-property">height</span>: <span class="css-value">${height}px</span>;\n`;
            css += `  <span class="css-property">margin</span>: <span class="css-value">${margin}px</span>;\n`;
            css += `  <span class="css-property">padding</span>: <span class="css-value">${padding}px</span>;\n`;
            css += `  <span class="css-property">box-sizing</span>: <span class="css-value">${boxSizing}</span>;\n`;
            css += `}`;

            document.getElementById('sizing-css-output').innerHTML = css;
        }

        function updateBordersDemo() {
            const selectedElement = document.getElementById('borders-demo-element-' + selectedElements.borders);
            if (!selectedElement) return;

            const borderWidth = document.getElementById('borders-width').value + 'px';
            const borderStyle = document.getElementById('borders-style').value;
            const borderColor = document.getElementById('borders-color').value;
            const borderRadius = document.getElementById('borders-radius').value + 'px';

            // Update hex input
            document.getElementById('borders-color-hex').value = borderColor;

            Object.assign(selectedElement.style, {
                borderWidth, borderStyle, borderColor, borderRadius
            });

            generateBordersCSS();
        }

        function generateBordersCSS() {
            const borderWidth = document.getElementById('borders-width').value;
            const borderStyle = document.getElementById('borders-style').value;
            const borderColor = document.getElementById('borders-color').value;
            const borderRadius = document.getElementById('borders-radius').value;

            let css = `<span class="css-selector">.border-element</span> {\n`;
            
            if (borderStyle !== 'none') {
                css += `  <span class="css-property">border</span>: <span class="css-value">${borderWidth}px ${borderStyle} ${borderColor}</span>;\n`;
            }
            
            if (borderRadius !== '0') css += `  <span class="css-property">border-radius</span>: <span class="css-value">${borderRadius}px</span>;\n`;
            
            css += `}`;

            document.getElementById('borders-css-output').innerHTML = css;
        }

        function updateEffectsDemo() {
            const selectedElement = document.getElementById('effects-demo-element-' + selectedElements.effects);
            if (!selectedElement) return;

            const shadowBlur = document.getElementById('effects-shadow-blur').value;
            const shadowX = document.getElementById('effects-shadow-x').value;
            const shadowColor = document.getElementById('effects-shadow-color').value;
            const scale = document.getElementById('effects-scale').value;
            const blur = document.getElementById('effects-blur').value;

            // Update hex input
            document.getElementById('effects-shadow-color-hex').value = shadowColor;

            const boxShadow = shadowBlur === '0' ? 'none' : `${shadowX}px ${shadowX}px ${shadowBlur}px ${shadowColor}`;
            const transform = scale !== '1' ? `scale(${scale})` : 'none';
            const filter = blur !== '0' ? `blur(${blur}px)` : 'none';

            Object.assign(selectedElement.style, {
                boxShadow, transform, filter
            });

            generateEffectsCSS();
        }

        function generateEffectsCSS() {
            const shadowBlur = document.getElementById('effects-shadow-blur').value;
            const shadowX = document.getElementById('effects-shadow-x').value;
            const shadowColor = document.getElementById('effects-shadow-color').value;
            const scale = document.getElementById('effects-scale').value;
            const blur = document.getElementById('effects-blur').value;

            let css = `<span class="css-selector">.effects-element</span> {\n`;
            
            if (shadowBlur !== '0') {
                css += `  <span class="css-property">box-shadow</span>: <span class="css-value">${shadowX}px ${shadowX}px ${shadowBlur}px ${shadowColor}</span>;\n`;
            }
            
            if (scale !== '1') {
                css += `  <span class="css-property">transform</span>: <span class="css-value">scale(${scale})</span>;\n`;
            }
            
            if (blur !== '0') {
                css += `  <span class="css-property">filter</span>: <span class="css-value">blur(${blur}px)</span>;\n`;
            }
            
            css += `}`;

            document.getElementById('effects-css-output').innerHTML = css;
        }

        function updateAnimationsDemo() {
            const selectedElement = document.getElementById('animations-demo-element-' + selectedElements.animations);
            if (!selectedElement) return;

            const animationName = document.getElementById('animations-name').value;
            const animationDuration = document.getElementById('animations-duration').value + 's';
            const animationIteration = document.getElementById('animations-iteration').value;
            const transitionDuration = document.getElementById('animations-transition').value + 's';

            // Remove existing animation classes
            selectedElement.classList.remove('spin', 'bounce', 'shake', 'fade', 'zoom', 'float');
            
            if (animationName !== 'none') {
                selectedElement.classList.add('animation-demo', animationName);
                selectedElement.style.animationDuration = animationDuration;
                selectedElement.style.animationIterationCount = animationIteration;
            } else {
                selectedElement.classList.remove('animation-demo');
            }

            selectedElement.style.transition = `all ${transitionDuration}`;

            // Add hover effect
            selectedElement.onmouseenter = function() {
                this.style.transform = 'scale(1.1)';
            };
            selectedElement.onmouseleave = function() {
                this.style.transform = 'scale(1)';
            };

            generateAnimationsCSS();
        }

        function generateAnimationsCSS() {
            const animationName = document.getElementById('animations-name').value;
            const animationDuration = document.getElementById('animations-duration').value;
            const animationIteration = document.getElementById('animations-iteration').value;
            const transitionDuration = document.getElementById('animations-transition').value;

            let css = `<span class="css-selector">.animation-element</span> {\n`;
            
            if (animationName !== 'none') {
                css += `  <span class="css-property">animation</span>: <span class="css-value">${animationName} ${animationDuration}s infinite</span>;\n`;
            }
            
            if (transitionDuration !== '0') {
                css += `  <span class="css-property">transition</span>: <span class="css-value">all ${transitionDuration}s</span>;\n`;
            }
            
            css += `}\n\n`;
            css += `<span class="css-selector">.animation-element:hover</span> {\n`;
            css += `  <span class="css-property">transform</span>: <span class="css-value">scale(1.1)</span>;\n`;
            css += `}`;

            document.getElementById('animations-css-output').innerHTML = css;
        }

        function updateAdvancedDemo() {
            const container = document.getElementById('advanced-demo-container');
            if (!container) return;

            const displayMode = document.getElementById('advanced-display-mode').value;
            const gridColumns = document.getElementById('advanced-grid-columns').value;
            const gridGap = document.getElementById('advanced-grid-gap').value + 'px';
            const justifyContent = document.getElementById('advanced-justify-content').value;

            // Show/hide controls based on display mode
            const gridControls = document.getElementById('grid-controls');
            const flexControls = document.getElementById('flex-controls');
            
            if (displayMode === 'grid') {
                gridControls.style.display = 'block';
                flexControls.style.display = 'none';
                Object.assign(container.style, {
                    display: 'grid',
                    gridTemplateColumns: gridColumns,
                    gap: gridGap
                });
            } else if (displayMode === 'flex') {
                gridControls.style.display = 'none';
                flexControls.style.display = 'block';
                Object.assign(container.style, {
                    display: 'flex',
                    justifyContent: justifyContent,
                    gap: gridGap,
                    flexWrap: 'wrap'
                });
            } else {
                gridControls.style.display = 'none';
                flexControls.style.display = 'none';
                container.style.display = 'block';
            }

            generateAdvancedCSS();
        }

        function generateAdvancedCSS() {
            const displayMode = document.getElementById('advanced-display-mode').value;
            const gridColumns = document.getElementById('advanced-grid-columns').value;
            const gridGap = document.getElementById('advanced-grid-gap').value;
            const justifyContent = document.getElementById('advanced-justify-content').value;

            let css = `<span class="css-selector">.container</span> {\n`;
            css += `  <span class="css-property">display</span>: <span class="css-value">${displayMode}</span>;\n`;
            
            if (displayMode === 'grid') {
                css += `  <span class="css-property">grid-template-columns</span>: <span class="css-value">${gridColumns}</span>;\n`;
                css += `  <span class="css-property">gap</span>: <span class="css-value">${gridGap}px</span>;\n`;
            } else if (displayMode === 'flex') {
                css += `  <span class="css-property">justify-content</span>: <span class="css-value">${justifyContent}</span>;\n`;
                css += `  <span class="css-property">gap</span>: <span class="css-value">${gridGap}px</span>;\n`;
                css += `  <span class="css-property">flex-wrap</span>: <span class="css-value">wrap</span>;\n`;
            }
            
            css += `}`;

            document.getElementById('advanced-css-output').innerHTML = css;
        }

        // Enhanced preset functions for remaining tabs
        function applySizingPreset(preset) {
            const presets = {
                'small': { width: '100', height: '60', padding: '10', margin: '5' },
                'medium': { width: '200', height: '100', padding: '20', margin: '10' },
                'large': { width: '300', height: '150', padding: '30', margin: '15' }
            };

            const config = presets[preset];
            if (config) {
                Object.entries(config).forEach(([key, value]) => {
                    const element = document.getElementById(`sizing-${key}`);
                    if (element) {
                        element.value = value;
                        updateRangeValue(element.id, 'px');
                    }
                });
                updateDemo('sizing');
                showToast(`Applied ${preset} sizing preset!`, 'success');
            }
        }

        function applyBorderPreset(preset) {
            const presets = {
                'thin': { width: '1', style: 'solid', radius: '0' },
                'thick': { width: '5', style: 'solid', radius: '0' },
                'rounded': { width: '2', style: 'solid', radius: '25' }
            };

            const config = presets[preset];
            if (config) {
                Object.entries(config).forEach(([key, value]) => {
                    const element = document.getElementById(`borders-${key}`);
                    if (element) {
                        element.value = value;
                        if (element.type === 'range') {
                            updateRangeValue(element.id, 'px');
                        }
                    }
                });
                updateDemo('borders');
                showToast(`Applied ${preset} border preset!`, 'success');
            }
        }

        function applyEffectPreset(preset) {
            const presets = {
                'glow': { shadowBlur: '20', shadowX: '0', shadowColor: '#667eea', scale: '1' },
                'shadow': { shadowBlur: '15', shadowX: '5', shadowColor: '#000000', scale: '1' },
                'blur': { shadowBlur: '0', shadowX: '0', blur: '5', scale: '1' }
            };

            const config = presets[preset];
            if (config) {
                Object.entries(config).forEach(([key, value]) => {
                    const element = document.getElementById(`effects-${key.replace(/([A-Z])/g, '-$1').toLowerCase()}`);
                    if (element) {
                        element.value = value;
                        if (element.type === 'range') {
                            const unit = key.includes('Color') ? '' : 'px';
                            updateRangeValue(element.id, unit);
                        }
                        if (key.includes('Color')) {
                            const hexElement = document.getElementById(element.id + '-hex');
                            if (hexElement) hexElement.value = value;
                        }
                    }
                });
                updateDemo('effects');
                showToast(`Applied ${preset} effect preset!`, 'success');
            }
        }

        function applyAnimationPreset(preset) {
            const presets = {
                'pulse': { name: 'zoom', duration: '1', iteration: 'infinite' },
                'wiggle': { name: 'shake', duration: '0.5', iteration: 'infinite' },
                'glow': { name: 'fade', duration: '2', iteration: 'infinite' }
            };

            const config = presets[preset];
            if (config) {
                Object.entries(config).forEach(([key, value]) => {
                    const element = document.getElementById(`animations-${key}`);
                    if (element) {
                        element.value = value;
                        if (element.type === 'range') {
                            updateRangeValue(element.id, 's');
                        }
                    }
                });
                updateDemo('animations');
                showToast(`Applied ${preset} animation preset!`, 'success');
            }
        }

        function applyAdvancedPreset(preset) {
            const presets = {
                'flexbox': { displayMode: 'flex', justifyContent: 'space-between' },
                'grid': { displayMode: 'grid', gridColumns: 'repeat(3, 1fr)' },
                'holy-grail': { displayMode: 'grid', gridColumns: '200px 1fr 200px' }
            };

            const config = presets[preset];
            if (config) {
                Object.entries(config).forEach(([key, value]) => {
                    const element = document.getElementById(`advanced-${key.replace(/([A-Z])/g, '-$1').toLowerCase()}`);
                    if (element) {
                        element.value = value;
                    }
                });
                updateDemo('advanced');
                showToast(`Applied ${preset} layout preset!`, 'success');
            }
        }

        // Animation control functions
        function pauseAnimation() {
            const selectedElement = document.getElementById('animations-demo-element-' + selectedElements.animations);
            if (selectedElement) {
                selectedElement.style.animationPlayState = 'paused';
                showToast('Animation paused', 'info');
            }
        }

        function playAnimation() {
            const selectedElement = document.getElementById('animations-demo-element-' + selectedElements.animations);
            if (selectedElement) {
                selectedElement.style.animationPlayState = 'running';
                showToast('Animation playing', 'info');
            }
        }

        function restartAnimation() {
            const selectedElement = document.getElementById('animations-demo-element-' + selectedElements.animations);
            if (selectedElement) {
                selectedElement.style.animation = 'none';
                setTimeout(() => {
                    updateAnimationsDemo();
                }, 10);
                showToast('Animation restarted', 'info');
            }
        }

        // Learning Lab functions
        function startChallenge(challengeType) {
            showToast(`Starting ${challengeType} challenge...`, 'info');
            
            // Update progress
            const progressBar = document.getElementById('learning-progress');
            let currentWidth = parseInt(progressBar.style.width) || 0;
            let newWidth = Math.min(currentWidth + 15, 100);
            progressBar.style.width = newWidth + '%';
            
            // Challenge-specific logic would be implemented here
            const challenges = {
                'layout': 'Create a centered card layout using CSS Grid',
                'responsive': 'Make this design work on mobile devices',
                'animations': 'Add smooth hover animations to buttons',
                'modern': 'Use CSS custom properties for theming',
                'performance': 'Optimize this CSS for better performance',
                'accessibility': 'Ensure this design is accessible to all users'
            };
            
            showToast(`Challenge: ${challenges[challengeType]}`, 'info');
        }

        // CSS Learning Card Styles
        const learningCardStyles = `
            .learning-challenge-card {
                background: var(--theme-bg-primary);
                border: 1px solid var(--theme-border-color);
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
                cursor: pointer;
                transition: all var(--transition-base);
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

            .learning-challenge-card:hover {
                transform: translateY(-4px);
                box-shadow: var(--theme-shadow-lg);
                border-color: var(--theme-border-focus);
            }

            .challenge-icon {
                font-size: 2.5rem;
                color: var(--theme-border-focus);
                margin-bottom: 1rem;
            }

            .challenge-difficulty {
                margin-top: 1rem;
            }
        `;

        // Add the learning card styles to the page
        const styleSheet = document.createElement('style');
        styleSheet.textContent = learningCardStyles;
        document.head.appendChild(styleSheet);

        // Update demo function to handle all tabs
        function updateDemo(tabName) {
            switch(tabName) {
                case 'layout':
                    updateLayoutDemo();
                    break;
                case 'typography':
                    updateTypographyDemo();
                    break;
                case 'colors':
                    updateColorsDemo();
                    break;
                case 'sizing':
                    updateSizingDemo();
                    break;
                case 'borders':
                    updateBordersDemo();
                    break;
                case 'effects':
                    updateEffectsDemo();
                    break;
                case 'animations':
                    updateAnimationsDemo();
                    break;
                case 'advanced':
                    updateAdvancedDemo();
                    break;
            }
        }

        // Initialize all demos when page loads
        function initializeAllDemos() {
            ['layout', 'typography', 'colors', 'sizing', 'borders', 'effects', 'animations', 'advanced'].forEach(tab => {
                updateDemo(tab);
            });
        }

        // Enhanced initialization
        document.addEventListener('DOMContentLoaded', function() {
            initializePlayground();
            setupKeyboardShortcuts();
            setupAdvancedFeatures();
            initializeAllDemos();
            
            // Initialize theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.documentElement.classList.add('dark-mode');
            }
            updateThemeToggle();
            
            // Show welcome message
            setTimeout(() => {
                showToast('🎉 Welcome to CSS Properties Master Playground! Use 1-9 keys to switch tabs, A to add elements, Del to clear.', 'info');
            }, 1500);
        });

        function updateLayoutDemo() {
            const selectedElement = document.getElementById('layout-demo-element-' + selectedElements.layout);
            if (!selectedElement) return;

            const display = document.getElementById('layout-display').value;
            const position = document.getElementById('layout-position').value;
            const top = document.getElementById('layout-top').value + 'px';
            const left = document.getElementById('layout-left').value + 'px';
            const zIndex = document.getElementById('layout-z-index').value;
            const float = document.getElementById('layout-float').value;
            const overflow = document.getElementById('layout-overflow').value;

            Object.assign(selectedElement.style, {
                display, position, top, left, zIndex, float, overflow
            });

            generateLayoutCSS();
        }

        function generateLayoutCSS() {
            const display = document.getElementById('layout-display').value;
            const position = document.getElementById('layout-position').value;
            const top = document.getElementById('layout-top').value;
            const left = document.getElementById('layout-left').value;
            const zIndex = document.getElementById('layout-z-index').value;
            const float = document.getElementById('layout-float').value;
            const overflow = document.getElementById('layout-overflow').value;

            let css = `<span class="css-selector">.element</span> {\n`;
            css += `  <span class="css-property">display</span>: <span class="css-value">${display}</span>;\n`;
            css += `  <span class="css-property">position</span>: <span class="css-value">${position}</span>;\n`;
            
            if (position !== 'static') {
                if (top !== '0') css += `  <span class="css-property">top</span>: <span class="css-value">${top}px</span>;\n`;
                if (left !== '0') css += `  <span class="css-property">left</span>: <span class="css-value">${left}px</span>;\n`;
                if (zIndex !== '1') css += `  <span class="css-property">z-index</span>: <span class="css-value">${zIndex}</span>;\n`;
            }
            
            if (float !== 'none') css += `  <span class="css-property">float</span>: <span class="css-value">${float}</span>;\n`;
            if (overflow !== 'visible') css += `  <span class="css-property">overflow</span>: <span class="css-value">${overflow}</span>;\n`;
            
            css += `}`;

            document.getElementById('layout-css-output').innerHTML = css;
        }

        function updateTypographyDemo() {
            const selectedElement = document.getElementById('typography-demo-element-' + selectedElements.typography);
            if (!selectedElement) return;

            const fontFamily = document.getElementById('typography-font-family').value;
            const fontSize = document.getElementById('typography-font-size').value + 'px';
            const fontWeight = document.getElementById('typography-font-weight').value;
            const lineHeight = document.getElementById('typography-line-height').value;
            const letterSpacing = document.getElementById('typography-letter-spacing').value + 'px';
            const textTransform = document.getElementById('typography-text-transform').value;
            const textDecoration = document.getElementById('typography-text-decoration').value;
            const textAlign = document.getElementById('typography-text-align').value;

            Object.assign(selectedElement.style, {
                fontFamily, fontSize, fontWeight, lineHeight, letterSpacing,
                textTransform, textDecoration, textAlign
            });

            generateTypographyCSS();
        }

        function generateTypographyCSS() {
            const fontFamily = document.getElementById('typography-font-family').value;
            const fontSize = document.getElementById('typography-font-size').value;
            const fontWeight = document.getElementById('typography-font-weight').value;
            const lineHeight = document.getElementById('typography-line-height').value;
            const letterSpacing = document.getElementById('typography-letter-spacing').value;
            const textTransform = document.getElementById('typography-text-transform').value;
            const textDecoration = document.getElementById('typography-text-decoration').value;
            const textAlign = document.getElementById('typography-text-align').value;

            let css = `<span class="css-selector">.text-element</span> {\n`;
            css += `  <span class="css-property">font-family</span>: <span class="css-value">${fontFamily}</span>;\n`;
            css += `  <span class="css-property">font-size</span>: <span class="css-value">${fontSize}px</span>;\n`;
            css += `  <span class="css-property">font-weight</span>: <span class="css-value">${fontWeight}</span>;\n`;
            css += `  <span class="css-property">line-height</span>: <span class="css-value">${lineHeight}</span>;\n`;
            css += `  <span class="css-property">text-align</span>: <span class="css-value">${textAlign}</span>;\n`;
            
            if (letterSpacing !== '0') css += `  <span class="css-property">letter-spacing</span>: <span class="css-value">${letterSpacing}px</span>;\n`;
            if (textTransform !== 'none') css += `  <span class="css-property">text-transform</span>: <span class="css-value">${textTransform}</span>;\n`;
            if (textDecoration !== 'none') css += `  <span class="css-property">text-decoration</span>: <span class="css-value">${textDecoration}</span>;\n`;
            
            css += `}`;

            document.getElementById('typography-css-output').innerHTML = css;
        }

        function updateColorsDemo() {
            const selectedElement = document.getElementById('colors-demo-element-' + selectedElements.colors);
            if (!selectedElement) return;

            const textColor = document.getElementById('colors-text-color').value;
            const bgColor = document.getElementById('colors-bg-color').value;
            const opacity = document.getElementById('colors-opacity').value;
            const gradient = document.getElementById('colors-gradient').value;
            const bgSize = document.getElementById('colors-bg-size').value;
            const bgRepeat = document.getElementById('colors-bg-repeat').value;

            // Update hex inputs
            document.getElementById('colors-text-color-hex').value = textColor;
            document.getElementById('colors-bg-color-hex').value = bgColor;

            Object.assign(selectedElement.style, {
                color: textColor,
                backgroundColor: gradient === 'none' ? bgColor : 'transparent',
                backgroundImage: gradient === 'none' ? 'none' : gradient,
                opacity: opacity,
                backgroundSize: bgSize,
                backgroundRepeat: bgRepeat
            });

            generateColorsCSS();
        }

        function generateColorsCSS() {
            const textColor = document.getElementById('colors-text-color').value;
            const bgColor = document.getElementById('colors-bg-color').value;
            const opacity = document.getElementById('colors-opacity').value;
            const gradient = document.getElementById('colors-gradient').value;
            const bgSize = document.getElementById('colors-bg-size').value;
            const bgRepeat = document.getElementById('colors-bg-repeat').value;

            let css = `<span class="css-selector">.color-element</span> {\n`;
            css += `  <span class="css-property">color</span>: <span class="css-value">${textColor}</span>;\n`;
            
            if (gradient === 'none') {
                css += `  <span class="css-property">background-color</span>: <span class="css-value">${bgColor}</span>;\n`;
            } else {
                css += `  <span class="css-property">background-image</span>: <span class="css-value">${gradient}</span>;\n`;
            }
            
            if (opacity !== '1') css += `  <span class="css-property">opacity</span>: <span class="css-value">${opacity}</span>;\n`;
            if (bgSize !== 'auto') css += `  <span class="css-property">background-size</span>: <span class="css-value">${bgSize}</span>;\n`;
            if (bgRepeat !== 'repeat') css += `  <span class="css-property">background-repeat</span>: <span class="css-value">${bgRepeat}</span>;\n`;
            
            css += `}`;

            document.getElementById('colors-css-output').innerHTML = css;
        }

        // Enhanced preset functions
        function applyLayoutPreset(preset) {
            const presets = {
                'centered': {
                    position: 'absolute',
                    top: '50',
                    left: '50',
                    display: 'flex'
                },
                'fixed-header': {
                    position: 'fixed',
                    top: '0',
                    left: '0',
                    display: 'block'
                },
                'sticky-nav': {
                    position: 'sticky',
                    top: '0',
                    display: 'block'
                },
                'floating': {
                    position: 'relative',
                    float: 'right',
                    display: 'block'
                },
                'overlay': {
                    position: 'absolute',
                    top: '0',
                    left: '0',
                    zIndex: '5'
                }
            };

            const config = presets[preset];
            if (config) {
                Object.entries(config).forEach(([key, value]) => {
                    const element = document.getElementById(`layout-${key.replace(/([A-Z])/g, '-$1').toLowerCase()}`);
                    if (element) {
                        element.value = value;
                        if (element.type === 'range') {
                            updateRangeValue(element.id, key.includes('top') || key.includes('left') ? 'px' : '');
                        }
                    }
                });
                updateDemo('layout');
                showToast(`Applied ${preset.replace('-', ' ')} layout preset!`, 'success');
            }
        }

        function applyTypographyPreset(preset) {
            const presets = {
                'heading': {
                    fontSize: '36',
                    fontWeight: '700',
                    lineHeight: '1.2',
                    fontFamily: 'Arial, sans-serif'
                },
                'body': {
                    fontSize: '16',
                    fontWeight: '400',
                    lineHeight: '1.6',
                    fontFamily: 'Georgia, serif'
                },
                'caption': {
                    fontSize: '12',
                    fontWeight: '400',
                    textTransform: 'uppercase',
                    letterSpacing: '1'
                },
                'code': {
                    fontFamily: "'Courier New', monospace",
                    fontSize: '14',
                    fontWeight: '400'
                },
                'display': {
                    fontSize: '48',
                    fontWeight: '900',
                    lineHeight: '1.1',
                    letterSpacing: '-1'
                }
            };

            const config = presets[preset];
            if (config) {
                Object.entries(config).forEach(([key, value]) => {
                    const element = document.getElementById(`typography-${key.replace(/([A-Z])/g, '-$1').toLowerCase()}`);
                    if (element) {
                        element.value = value;
                        if (element.type === 'range') {
                            const unit = key.includes('Size') || key.includes('Spacing') ? 'px' : '';
                            updateRangeValue(element.id, unit);
                        }
                    }
                });
                updateDemo('typography');
                showToast(`Applied ${preset} typography preset!`, 'success');
            }
        }

        function applyColorPreset(preset) {
            const presets = {
                'primary': {
                    textColor: '#ffffff',
                    bgColor: '#007bff',
                    gradient: 'none'
                },
                'success': {
                    textColor: '#ffffff',
                    bgColor: '#28a745',
                    gradient: 'none'
                },
                'warning': {
                    textColor: '#212529',
                    bgColor: '#ffc107',
                    gradient: 'none'
                },
                'gradient': {
                    textColor: '#ffffff',
                    bgColor: '#667eea',
                    gradient: 'linear-gradient(135deg, #667eea, #764ba2)'
                },
                'glassmorphism': {
                    textColor: '#ffffff',
                    bgColor: '#ffffff',
                    gradient: 'linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05))',
                    opacity: '0.9'
                }
            };

            const config = presets[preset];
            if (config) {
                Object.entries(config).forEach(([key, value]) => {
                    const element = document.getElementById(`colors-${key.replace(/([A-Z])/g, '-$1').toLowerCase()}`);
                    if (element) {
                        element.value = value;
                        if (key.includes('Color')) {
                            const hexElement = document.getElementById(element.id + '-hex');
                            if (hexElement) hexElement.value = value;
                        }
                    }
                });
                updateDemo('colors');
                showToast(`Applied ${preset} color preset!`, 'success');
            }
        }

        // Advanced Features
        function toggleFullscreen() {
            const mainContent = document.getElementById('main-content');
            const icon = document.getElementById('fullscreen-icon');
            
            if (!isFullscreen) {
                mainContent.classList.add('fullscreen-mode');
                icon.className = 'bi bi-fullscreen-exit';
                
                // Add exit button
                const exitBtn = document.createElement('button');
                exitBtn.className = 'fullscreen-exit';
                exitBtn.innerHTML = '<i class="bi bi-x-lg"></i>';
                exitBtn.onclick = toggleFullscreen;
                exitBtn.id = 'fullscreen-exit-btn';
                document.body.appendChild(exitBtn);
                
                isFullscreen = true;
                showToast('Entered fullscreen mode. Press ESC or F11 to exit.', 'info');
            } else {
                mainContent.classList.remove('fullscreen-mode');
                icon.className = 'bi bi-fullscreen';
                
                const exitBtn = document.getElementById('fullscreen-exit-btn');
                if (exitBtn) exitBtn.remove();
                
                isFullscreen = false;
                showToast('Exited fullscreen mode.', 'info');
            }
        }

        function toggleMeasurements() {
            measurementsEnabled = !measurementsEnabled;
            const btn = document.getElementById('measurements-btn');
            
            if (measurementsEnabled) {
                btn.classList.add('active');
                document.querySelectorAll('.demo-container').forEach(container => {
                    container.classList.add('with-measurements');
                });
                showToast('Measurements enabled - see grid overlay on demo areas', 'info');
            } else {
                btn.classList.remove('active');
                document.querySelectorAll('.demo-container').forEach(container => {
                    container.classList.remove('with-measurements');
                });
                showToast('Measurements disabled', 'info');
            }
        }

        function togglePropertyGuide() {
            propertyGuideEnabled = !propertyGuideEnabled;
            const btn = document.getElementById('guide-btn');
            
            if (propertyGuideEnabled) {
                btn.classList.add('active');
                showToast('Property guide enabled - hover over properties for detailed explanations', 'info');
                // Add enhanced tooltips/guides
            } else {
                btn.classList.remove('active');
                showToast('Property guide disabled', 'info');
            }
        }

        function toggleKeyboardShortcuts() {
            const shortcuts = document.getElementById('keyboard-shortcuts');
            if (shortcuts.classList.contains('show')) {
                shortcuts.classList.remove('show');
            } else {
                shortcuts.classList.add('show');
                setTimeout(() => {
                    shortcuts.classList.remove('show');
                }, 5000);
            }
        }

        function exportCSS() {
            let allCSS = '/* Exported CSS from CSS Properties Master Playground */\n\n';
            
            // Collect CSS from all active tabs
            document.querySelectorAll('.code-output').forEach(output => {
                const css = output.textContent || '';
                if (css.trim() && !css.includes('will be generated')) {
                    allCSS += css + '\n\n';
                }
            });

            copyToClipboard(allCSS);
            showToast('All CSS exported to clipboard!', 'success');
        }

        function resetAll() {
            if (confirm('Reset all properties to default values?')) {
                // Reset all form elements
                document.querySelectorAll('input, select').forEach(input => {
                    if (input.type === 'range') {
                        input.value = input.defaultValue || '0';
                    } else if (input.type === 'color') {
                        input.value = input.defaultValue || '#000000';
                    } else {
                        input.selectedIndex = 0;
                    }
                });

                // Update all demos
                Object.keys(elementCounts).forEach(tab => {
                    if (tab !== 'learning') {
                        updateDemo(tab);
                    }
                });

                showToast('All properties reset to defaults!', 'warning');
            }
        }

        // Theme Management
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.getElementById('theme-toggle');
            const isDark = body.classList.contains('dark-mode');
            
            if (isDark) {
                body.classList.remove('dark-mode');
                document.documentElement.classList.remove('dark-mode');
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('dark-mode');
                document.documentElement.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark');
            }
            
            updateThemeToggle();
            showToast(`Switched to ${isDark ? 'light' : 'dark'} theme`, 'info');
        }

        function updateThemeToggle() {
            const themeToggle = document.getElementById('theme-toggle');
            const isDark = document.body.classList.contains('dark-mode');
            
            if (themeToggle) {
                if (isDark) {
                    themeToggle.classList.add('dark');
                } else {
                    themeToggle.classList.remove('dark');
                }
            }
        }

        // Enhanced clipboard functionality
        function copyCode(outputId) {
            const codeElement = document.getElementById(outputId);
            if (!codeElement) return;

            const codeText = codeElement.textContent || '';
            copyToClipboard(codeText);
            
            const button = codeElement.parentElement.querySelector('.copy-btn');
            showCopySuccess(button);
        }

        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text);
            } else {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
            }
        }

        function showCopySuccess(button) {
            if (!button) return;
            
            const originalHTML = button.innerHTML;
            
            button.classList.add('copied');
            button.innerHTML = '<i class="bi bi-check me-1"></i>Copied!';
            
            setTimeout(() => {
                button.classList.remove('copied');
                button.innerHTML = originalHTML;
            }, 2000);
            
            showToast('CSS code copied to clipboard!', 'success');
        }

        // Enhanced toast notification system
        function showToast(message, type = 'success') {
            const toastContainer = document.getElementById('toast-container');
            if (!toastContainer) return;

            const toast = document.createElement('div');
            toast.className = `toast-custom show ${type}`;
            
            const iconMap = {
                success: 'check-circle-fill',
                warning: 'exclamation-triangle-fill',
                error: 'x-circle-fill',
                info: 'info-circle-fill'
            };

            toast.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="bi bi-${iconMap[type]} me-2" style="font-size: 1.2rem;"></i>
                    <span>${message}</span>
                    <button type="button" class="btn-close btn-close-white ms-auto" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;

            toastContainer.appendChild(toast);

            // Auto remove after 4 seconds
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.style.animation = 'slideInToast 0.3s ease reverse';
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toastContainer.removeChild(toast);
                        }
                    }, 300);
                }
            }, 4000);
        }

        // Global preset functions
        function loadGlobalPreset(presetName) {
            // Implementation for global presets that affect multiple properties
            showToast(`Loading ${presetName} preset...`, 'info');
            
            // This would be expanded to include comprehensive preset configurations
            // affecting multiple tabs simultaneously
        }

        // Initialize theme on load
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                if (savedTheme === 'dark') {
                    document.body.classList.add('dark-mode');
                    document.documentElement.classList.add('dark-mode');
                }
                updateThemeToggle();
            }
        });

        // Performance monitoring
        if ('performance' in window) {
            window.addEventListener('load', function() {
                setTimeout(() => {
                    const loadTime = performance.now();
                    console.log(`CSS Playground loaded in ${loadTime.toFixed(2)}ms`);
                }, 0);
            });
        }
    </script>
</body>
</html>
