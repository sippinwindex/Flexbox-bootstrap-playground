<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive CSS properties playground for learning all CSS properties">
    <meta name="keywords" content="CSS, properties, playground, learning, interactive, web development">
    <title>CSS Properties Master Playground - Secure Edition</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --success-gradient: linear-gradient(135deg, #28a745, #20c997);
            --warning-gradient: linear-gradient(135deg, #ffc107, #ff8c00);
            --info-gradient: linear-gradient(135deg, #17a2b8, #20c997);
            --danger-gradient: linear-gradient(135deg, #dc3545, #fd79a8);
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --bg-light: #f8f9fa;
            --border-color: #dee2e6;
            --text-muted: #6c757d;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 15px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 25px rgba(0,0,0,0.2);
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: var(--bg-light);
            line-height: 1.6;
        }

        .hero-section {
            background: var(--primary-gradient);
            color: white;
            padding: 2rem 0;
        }

        .property-card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            overflow: hidden;
            margin-bottom: 1.5rem;
            transition: transform 0.3s ease;
        }

        .property-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .property-header {
            background: var(--primary-gradient);
            color: white;
            padding: 1rem 1.5rem;
            border-bottom: none;
            position: relative;
        }

        .property-header.colors { background: var(--success-gradient); }
        .property-header.effects { background: var(--info-gradient); }
        .property-header.animations { background: var(--warning-gradient); }
        .property-header.advanced { background: var(--danger-gradient); }

        .property-body {
            padding: 1.5rem;
        }

        .demo-container {
            background: #f8f9fa;
            border: 3px dashed #667eea;
            border-radius: 12px;
            padding: 2rem;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .demo-container::before {
            content: 'Live Demo Area';
            position: absolute;
            top: -12px;
            left: 20px;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            z-index: 10;
        }

        .demo-element {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 2rem;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
            min-width: 120px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        .demo-element:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .demo-text {
            font-size: 1.2rem;
            font-weight: 500;
            color: #333;
            line-height: 1.6;
            max-width: 400px;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
        }

        .code-output {
            background: #1a1a1a;
            color: #e6e6e6;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.5;
            max-height: 300px;
            overflow-y: auto;
            position: relative;
            margin: 1rem 0;
            white-space: pre;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            opacity: 0.8;
            transition: all 0.2s;
            z-index: 10;
        }

        .copy-btn:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .copy-btn.copied {
            background: var(--info-color);
        }

        .css-property { color: #79b6f2; font-weight: 500; }
        .css-value { color: #90ee90; }
        .css-selector { color: #ffd700; font-weight: 500; }
        .css-comment { color: #9ca3af; font-style: italic; }

        .control-group {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .control-group:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .control-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
            display: block;
        }

        .range-value {
            font-weight: 600;
            color: #667eea;
            min-width: 4rem;
            text-align: center;
            font-size: 0.9rem;
            display: inline-block;
        }

        .property-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 0.25rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 0.25rem;
        }

        .tab-btn {
            flex: 1;
            min-width: 100px;
            padding: 0.75rem;
            border: none;
            background: transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.85rem;
            margin: 0.125rem;
            color: #6c757d;
        }

        .tab-btn.active {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            color: #667eea;
        }

        .tab-btn:hover:not(.active) {
            background: rgba(255,255,255,0.7);
            color: #495057;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .info-badge {
            background: #e7f3ff;
            color: #0066cc;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .preset-btn {
            padding: 0.375rem 0.75rem;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.25rem;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .preset-btn:hover,
        .preset-btn.active {
            background: #667eea;
            color: white;
            transform: translateY(-1px);
        }

        .description-text {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .live-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Color picker styling */
        .color-input {
            width: 60px;
            height: 40px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
        }

        /* Animation demos */
        .animation-demo {
            animation-duration: 2s;
            animation-iteration-count: infinite;
        }

        .spin { animation-name: spin; }
        .bounce { animation-name: bounce; }
        .shake { animation-name: shake; }
        .fade { animation-name: fade; }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes fade {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Toast notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
        }

        .toast-custom {
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            padding: 1rem;
            margin-bottom: 0.5rem;
            display: none;
            min-width: 300px;
        }

        .toast-custom.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Learning tips */
        .learning-tip {
            background: linear-gradient(135deg, #e7f3ff, #cce7ff);
            border-left: 4px solid #0066cc;
            padding: 0.75rem;
            margin: 1rem 0;
            border-radius: 0 6px 6px 0;
            font-size: 0.9rem;
            position: relative;
        }

        .learning-tip::before {
            content: '💡';
            position: absolute;
            left: -2px;
            top: -2px;
            font-size: 1.2rem;
        }

        @media (max-width: 768px) {
            .property-tabs {
                flex-direction: column;
            }
            .tab-btn {
                flex: none;
                margin: 0.125rem 0;
            }
            .demo-container {
                min-height: 200px;
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container">
        <!-- Change this line -->
        <a class="navbar-brand" href="index.html">
            <i class="bi bi-house me-2"></i>CSS Learning Guide
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav ms-auto">
                <!-- Change this line -->
                <a class="nav-link" href="index.html"><i class="bi bi-house me-1"></i>Home</a>
                <a class="nav-link" href="#getting-started"><i class="bi bi-play-circle me-1"></i>Get Started</a>
                <a class="nav-link" href="#selectors"><i class="bi bi-cursor me-1"></i>Selectors</a>
                <a class="nav-link" href="#flexbox"><i class="bi bi-grid-3x3 me-1"></i>Flexbox</a>
                <a class="nav-link" href="#responsive"><i class="bi bi-phone me-1"></i>Responsive</a>
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-grid-3x3-gap me-1"></i>More
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="showComingSoon('CSS Playground')"><i class="bi bi-palette me-2"></i>CSS Playground</a></li>
                        <li><a class="dropdown-item" href="#" onclick="showComingSoon('Flexbox Playground')"><i class="bi bi-grid-3x3 me-2"></i>Flexbox Playground</a></li>
                        <li><a class="dropdown-item" href="#" onclick="showComingSoon('HTML Guide')"><i class="bi bi-code me-2"></i>HTML Guide</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" onclick="showAbout()"><i class="bi bi-info-circle me-2"></i>About</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-6 fw-bold mb-3">
                        <i class="bi bi-palette2 me-3"></i>CSS Properties Master Playground
                    </h1>
                    <p class="lead mb-0">Master ALL CSS properties with interactive examples, live demos, and instant feedback. From basics to advanced techniques - explore the complete power of CSS.</p>
                </div>
                <div class="col-lg-4 text-center">
                    <div class="d-flex justify-content-center align-items-center" style="height: 120px;">
                        <div class="d-flex flex-column align-items-center">
                            <i class="bi bi-palette2 display-1 opacity-75"></i>
                            <small class="opacity-75">Interactive CSS Properties</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="container mt-4">
        <!-- Property Categories -->
        <div class="property-tabs">
            <button class="tab-btn active" onclick="switchPropertyTab('layout')">
                <i class="bi bi-grid me-1"></i>Layout
            </button>
            <button class="tab-btn" onclick="switchPropertyTab('typography')">
                <i class="bi bi-type me-1"></i>Typography
            </button>
            <button class="tab-btn" onclick="switchPropertyTab('colors')">
                <i class="bi bi-palette me-1"></i>Colors
            </button>
            <button class="tab-btn" onclick="switchPropertyTab('sizing')">
                <i class="bi bi-arrows-move me-1"></i>Sizing
            </button>
            <button class="tab-btn" onclick="switchPropertyTab('borders')">
                <i class="bi bi-square me-1"></i>Borders
            </button>
            <button class="tab-btn" onclick="switchPropertyTab('effects')">
                <i class="bi bi-stars me-1"></i>Effects
            </button>
            <button class="tab-btn" onclick="switchPropertyTab('animations')">
                <i class="bi bi-arrow-repeat me-1"></i>Animations
            </button>
            <button class="tab-btn" onclick="switchPropertyTab('advanced')">
                <i class="bi bi-gear me-1"></i>Advanced
            </button>
        </div>

        <!-- Layout Properties -->
        <div id="layout-tab" class="tab-content active">
            <div class="property-card">
                <div class="property-header">
                    <h3 class="mb-0"><i class="bi bi-grid me-2"></i>Layout & Positioning</h3>
                    <p class="mb-0 opacity-75">Control element positioning, display types, and layout behavior</p>
                    <div class="live-indicator">LIVE</div>
                </div>
                <div class="property-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <!-- Display -->
                            <div class="control-group">
                                <label class="control-label">Display</label>
                                <div class="description-text">Defines how an element is displayed and participates in layout</div>
                                <select class="form-select" id="display" onchange="updateDemo()">
                                    <option value="block">block</option>
                                    <option value="inline">inline</option>
                                    <option value="inline-block">inline-block</option>
                                    <option value="flex" selected>flex</option>
                                    <option value="inline-flex">inline-flex</option>
                                    <option value="grid">grid</option>
                                    <option value="none">none</option>
                                    <option value="table">table</option>
                                    <option value="table-cell">table-cell</option>
                                </select>
                                <div class="learning-tip mt-2">
                                    <strong>Most Used:</strong> <code>block</code>, <code>inline</code>, <code>flex</code>, and <code>grid</code> are the foundation of modern layouts.
                                </div>
                            </div>

                            <!-- Position -->
                            <div class="control-group">
                                <label class="control-label">Position</label>
                                <div class="description-text">Determines the positioning method for an element</div>
                                <select class="form-select" id="position" onchange="updateDemo()">
                                    <option value="static">static</option>
                                    <option value="relative" selected>relative</option>
                                    <option value="absolute">absolute</option>
                                    <option value="fixed">fixed</option>
                                    <option value="sticky">sticky</option>
                                </select>
                                <div class="learning-tip mt-2">
                                    <strong>Key Difference:</strong> <code>static</code> = normal flow, <code>relative</code> = offset from normal, <code>absolute</code> = positioned relative to parent, <code>fixed</code> = relative to viewport.
                                </div>
                            </div>

                            <!-- Position Offsets -->
                            <div class="control-group" id="position-offsets">
                                <label class="control-label">Position Offsets</label>
                                <div class="description-text">Control exact positioning when position is not static</div>
                                <div class="row g-2">
                                    <div class="col-6">
                                        <label class="form-label small">Top: <span class="range-value" id="top-value">0px</span></label>
                                        <input type="range" class="form-range" id="top" min="-100" max="100" value="0" oninput="updatePositionValue('top')" onchange="updateDemo()">
                                    </div>
                                    <div class="col-6">
                                        <label class="form-label small">Left: <span class="range-value" id="left-value">0px</span></label>
                                        <input type="range" class="form-range" id="left" min="-100" max="100" value="0" oninput="updatePositionValue('left')" onchange="updateDemo()">
                                    </div>
                                </div>
                            </div>

                            <!-- Z-Index -->
                            <div class="control-group">
                                <label class="control-label">Z-Index: <span class="range-value" id="z-index-value">1</span></label>
                                <div class="description-text">Controls stacking order of positioned elements (higher = front)</div>
                                <input type="range" class="form-range" id="z-index" min="-10" max="10" value="1" oninput="updateRangeValue('z-index')" onchange="updateDemo()">
                            </div>

                            <!-- Float -->
                            <div class="control-group">
                                <label class="control-label">Float</label>
                                <div class="description-text">Makes element float to left or right (legacy layout method)</div>
                                <select class="form-select" id="float" onchange="updateDemo()">
                                    <option value="none" selected>none</option>
                                    <option value="left">left</option>
                                    <option value="right">right</option>
                                </select>
                                <div class="learning-tip mt-2">
                                    <strong>Modern Alternative:</strong> Use Flexbox or Grid instead of float for layouts.
                                </div>
                            </div>

                            <!-- Overflow -->
                            <div class="control-group">
                                <label class="control-label">Overflow</label>
                                <div class="description-text">Controls what happens when content overflows container</div>
                                <select class="form-select" id="overflow" onchange="updateDemo()">
                                    <option value="visible" selected>visible</option>
                                    <option value="hidden">hidden</option>
                                    <option value="scroll">scroll</option>
                                    <option value="auto">auto</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <!-- Demo Area -->
                            <h5>Live Demo</h5>
                            <div class="demo-container" id="demo-container">
                                <div class="demo-element" id="demo-element">CSS Demo</div>
                            </div>
                            
                            <!-- Quick Presets -->
                            <div class="mb-3">
                                <label class="form-label fw-bold">Quick Layout Presets:</label>
                                <div>
                                    <button class="preset-btn" onclick="applyLayoutPreset('centered')">
                                        <i class="bi bi-bullseye me-1"></i>Centered
                                    </button>
                                    <button class="preset-btn" onclick="applyLayoutPreset('fixed-header')">
                                        <i class="bi bi-pin me-1"></i>Fixed Header
                                    </button>
                                    <button class="preset-btn" onclick="applyLayoutPreset('sticky-nav')">
                                        <i class="bi bi-menu-up me-1"></i>Sticky Nav
                                    </button>
                                    <button class="preset-btn" onclick="applyLayoutPreset('floating')">
                                        <i class="bi bi-box me-1"></i>Floating
                                    </button>
                                </div>
                            </div>

                            <!-- Tips -->
                            <div class="alert alert-info">
                                <h6><i class="bi bi-lightbulb me-2"></i>Layout Tips</h6>
                                <ul class="mb-0 small">
                                    <li>Use <code>flex</code> or <code>grid</code> for modern layouts</li>
                                    <li><code>position: sticky</code> is great for navigation bars</li>
                                    <li><code>z-index</code> only works on positioned elements</li>
                                    <li><code>overflow: hidden</code> creates new stacking context</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Generated CSS -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <h5>Generated CSS</h5>
                            <div class="position-relative">
                                <button class="copy-btn" onclick="copyCode('layout-css-output')">
                                    <i class="bi bi-clipboard me-1"></i>Copy
                                </button>
                                <div class="code-output" id="layout-css-output">/* CSS will be generated here */</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Typography Properties -->
        <div id="typography-tab" class="tab-content">
            <div class="property-card">
                <div class="property-header">
                    <h3 class="mb-0"><i class="bi bi-type me-2"></i>Typography Properties</h3>
                    <p class="mb-0 opacity-75">Control text appearance, fonts, spacing, and text effects</p>
                    <div class="live-indicator">LIVE</div>
                </div>
                <div class="property-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <!-- Font Family -->
                            <div class="control-group">
                                <label class="control-label">Font Family</label>
                                <div class="description-text">Sets the typeface for text</div>
                                <select class="form-select" id="font-family" onchange="updateTypographyDemo()">
                                    <option value="Arial, sans-serif">Arial (Sans-serif)</option>
                                    <option value="Georgia, serif" selected>Georgia (Serif)</option>
                                    <option value="'Courier New', monospace">Courier New (Monospace)</option>
                                    <option value="'Times New Roman', serif">Times New Roman</option>
                                    <option value="Helvetica, sans-serif">Helvetica</option>
                                    <option value="Verdana, sans-serif">Verdana</option>
                                    <option value="system-ui, sans-serif">System UI</option>
                                </select>
                            </div>

                            <!-- Font Size -->
                            <div class="control-group">
                                <label class="control-label">Font Size: <span class="range-value" id="font-size-value">24px</span></label>
                                <div class="description-text">Controls the size of text</div>
                                <input type="range" class="form-range" id="font-size" min="8" max="72" value="24" oninput="updateRangeValue('font-size', 'px')" onchange="updateTypographyDemo()">
                            </div>

                            <!-- Font Weight -->
                            <div class="control-group">
                                <label class="control-label">Font Weight</label>
                                <div class="description-text">Controls the thickness/boldness of text</div>
                                <select class="form-select" id="font-weight" onchange="updateTypographyDemo()">
                                    <option value="100">100 - Thin</option>
                                    <option value="200">200 - Extra Light</option>
                                    <option value="300">300 - Light</option>
                                    <option value="400" selected>400 - Normal</option>
                                    <option value="500">500 - Medium</option>
                                    <option value="600">600 - Semi Bold</option>
                                    <option value="700">700 - Bold</option>
                                    <option value="800">800 - Extra Bold</option>
                                    <option value="900">900 - Black</option>
                                </select>
                            </div>

                            <!-- Line Height -->
                            <div class="control-group">
                                <label class="control-label">Line Height: <span class="range-value" id="line-height-value">1.5</span></label>
                                <div class="description-text">Controls the space between lines of text</div>
                                <input type="range" class="form-range" id="line-height" min="0.8" max="3" step="0.1" value="1.5" oninput="updateRangeValue('line-height')" onchange="updateTypographyDemo()">
                            </div>

                            <!-- Letter Spacing -->
                            <div class="control-group">
                                <label class="control-label">Letter Spacing: <span class="range-value" id="letter-spacing-value">0px</span></label>
                                <div class="description-text">Controls space between characters</div>
                                <input type="range" class="form-range" id="letter-spacing" min="-2" max="10" step="0.5" value="0" oninput="updateRangeValue('letter-spacing', 'px')" onchange="updateTypographyDemo()">
                            </div>

                            <!-- Word Spacing -->
                            <div class="control-group">
                                <label class="control-label">Word Spacing: <span class="range-value" id="word-spacing-value">0px</span></label>
                                <div class="description-text">Controls space between words</div>
                                <input type="range" class="form-range" id="word-spacing" min="-5" max="20" step="1" value="0" oninput="updateRangeValue('word-spacing', 'px')" onchange="updateTypographyDemo()">
                            </div>

                            <!-- Text Transform -->
                            <div class="control-group">
                                <label class="control-label">Text Transform</label>
                                <div class="description-text">Controls text capitalization</div>
                                <select class="form-select" id="text-transform" onchange="updateTypographyDemo()">
                                    <option value="none" selected>none</option>
                                    <option value="uppercase">UPPERCASE</option>
                                    <option value="lowercase">lowercase</option>
                                    <option value="capitalize">Capitalize Each Word</option>
                                </select>
                            </div>

                            <!-- Text Decoration -->
                            <div class="control-group">
                                <label class="control-label">Text Decoration</label>
                                <div class="description-text">Adds decorative lines to text</div>
                                <select class="form-select" id="text-decoration" onchange="updateTypographyDemo()">
                                    <option value="none" selected>none</option>
                                    <option value="underline">underline</option>
                                    <option value="overline">overline</option>
                                    <option value="line-through">line-through</option>
                                    <option value="underline overline">underline + overline</option>
                                </select>
                            </div>

                            <!-- Text Align -->
                            <div class="control-group">
                                <label class="control-label">Text Align</label>
                                <div class="description-text">Controls horizontal text alignment</div>
                                <select class="form-select" id="text-align" onchange="updateTypographyDemo()">
                                    <option value="left">left</option>
                                    <option value="center" selected>center</option>
                                    <option value="right">right</option>
                                    <option value="justify">justify</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <h5>Live Demo</h5>
                            <div class="demo-container" id="typo-demo-container">
                                <div class="demo-text" id="typo-demo-element">
                                    The quick brown fox jumps over the lazy dog. This text demonstrates various typography properties including font family, size, weight, spacing, and text effects in real-time.
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label fw-bold">Typography Presets:</label>
                                <div>
                                    <button class="preset-btn" onclick="applyTypographyPreset('heading')">
                                        <i class="bi bi-type-h1 me-1"></i>Heading
                                    </button>
                                    <button class="preset-btn" onclick="applyTypographyPreset('body')">
                                        <i class="bi bi-paragraph me-1"></i>Body Text
                                    </button>
                                    <button class="preset-btn" onclick="applyTypographyPreset('caption')">
                                        <i class="bi bi-fonts me-1"></i>Caption
                                    </button>
                                    <button class="preset-btn" onclick="applyTypographyPreset('code')">
                                        <i class="bi bi-code me-1"></i>Code
                                    </button>
                                </div>
                            </div>

                            <div class="alert alert-info">
                                <h6><i class="bi bi-lightbulb me-2"></i>Typography Tips</h6>
                                <ul class="mb-0 small">
                                    <li>Use <code>line-height: 1.5-1.6</code> for better readability</li>
                                    <li>Limit line length to 50-75 characters for body text</li>
                                    <li><code>letter-spacing</code> improves readability for uppercase text</li>
                                    <li>Use web-safe fonts or load Google Fonts</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <h5>Generated CSS</h5>
                            <div class="position-relative">
                                <button class="copy-btn" onclick="copyCode('typo-css-output')">
                                    <i class="bi bi-clipboard me-1"></i>Copy
                                </button>
                                <div class="code-output" id="typo-css-output">/* CSS will be generated here */</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Colors Tab -->
        <div id="colors-tab" class="tab-content">
            <div class="property-card">
                <div class="property-header colors">
                    <h3 class="mb-0"><i class="bi bi-palette me-2"></i>Colors & Backgrounds</h3>
                    <p class="mb-0 opacity-75">Control text colors, background colors, and gradients</p>
                    <div class="live-indicator">LIVE</div>
                </div>
                <div class="property-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <!-- Text Color -->
                            <div class="control-group">
                                <label class="control-label">Text Color</label>
                                <div class="description-text">Sets the color of text content</div>
                                <div class="d-flex gap-2 align-items-center">
                                    <input type="color" class="color-input" id="text-color" value="#ffffff" onchange="updateColorsDemo()">
                                    <input type="text" class="form-control" id="text-color-hex" value="#ffffff" onchange="updateColorFromHex('text-color')" placeholder="#ffffff">
                                </div>
                            </div>

                            <!-- Background Color -->
                            <div class="control-group">
                                <label class="control-label">Background Color</label>
                                <div class="description-text">Sets the background color of the element</div>
                                <div class="d-flex gap-2 align-items-center">
                                    <input type="color" class="color-input" id="bg-color" value="#667eea" onchange="updateColorsDemo()">
                                    <input type="text" class="form-control" id="bg-color-hex" value="#667eea" onchange="updateColorFromHex('bg-color')" placeholder="#667eea">
                                </div>
                            </div>

                            <!-- Opacity -->
                            <div class="control-group">
                                <label class="control-label">Opacity: <span class="range-value" id="opacity-value">1</span></label>
                                <div class="description-text">Controls the transparency of the entire element</div>
                                <input type="range" class="form-range" id="opacity" min="0" max="1" step="0.1" value="1" oninput="updateRangeValue('opacity')" onchange="updateColorsDemo()">
                            </div>

                            <!-- Background Size -->
                            <div class="control-group">
                                <label class="control-label">Background Size</label>
                                <div class="description-text">Controls how background images are sized</div>
                                <select class="form-select" id="bg-size" onchange="updateColorsDemo()">
                                    <option value="auto">auto</option>
                                    <option value="cover" selected>cover</option>
                                    <option value="contain">contain</option>
                                    <option value="100% 100%">stretch (100% 100%)</option>
                                </select>
                            </div>

                            <!-- Background Repeat -->
                            <div class="control-group">
                                <label class="control-label">Background Repeat</label>
                                <div class="description-text">Controls if/how background images repeat</div>
                                <select class="form-select" id="bg-repeat" onchange="updateColorsDemo()">
                                    <option value="no-repeat" selected>no-repeat</option>
                                    <option value="repeat">repeat</option>
                                    <option value="repeat-x">repeat-x</option>
                                    <option value="repeat-y">repeat-y</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <h5>Live Demo</h5>
                            <div class="demo-container" id="colors-demo-container">
                                <div class="demo-element" id="colors-demo-element">Color Demo</div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label fw-bold">Color Presets:</label>
                                <div>
                                    <button class="preset-btn" onclick="applyColorPreset('primary')">
                                        <i class="bi bi-circle-fill text-primary me-1"></i>Primary
                                    </button>
                                    <button class="preset-btn" onclick="applyColorPreset('success')">
                                        <i class="bi bi-circle-fill text-success me-1"></i>Success
                                    </button>
                                    <button class="preset-btn" onclick="applyColorPreset('warning')">
                                        <i class="bi bi-circle-fill text-warning me-1"></i>Warning
                                    </button>
                                    <button class="preset-btn" onclick="applyColorPreset('gradient')">
                                        <i class="bi bi-rainbow me-1"></i>Gradient
                                    </button>
                                </div>
                            </div>

                            <div class="alert alert-info">
                                <h6><i class="bi bi-lightbulb me-2"></i>Color Tips</h6>
                                <ul class="mb-0 small">
                                    <li>Ensure sufficient contrast for accessibility (4.5:1 ratio)</li>
                                    <li>Use HSL colors for easier color manipulation</li>
                                    <li><code>currentColor</code> uses the text color value</li>
                                    <li>CSS variables make color themes easier to manage</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <h5>Generated CSS</h5>
                            <div class="position-relative">
                                <button class="copy-btn" onclick="copyCode('colors-css-output')">
                                    <i class="bi bi-clipboard me-1"></i>Copy
                                </button>
                                <div class="code-output" id="colors-css-output">/* CSS will be generated here */</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other tabs can be added here following the same pattern -->
        <!-- For brevity, I'll add placeholders for the remaining tabs -->
        
        <div id="sizing-tab" class="tab-content">
            <div class="property-card">
                <div class="property-header">
                    <h3 class="mb-0"><i class="bi bi-arrows-move me-2"></i>Sizing & Spacing</h3>
                    <p class="mb-0 opacity-75">Control width, height, margins, padding, and box model</p>
                </div>
                <div class="property-body">
                    <div class="text-center py-5">
                        <i class="bi bi-tools display-1 text-muted"></i>
                        <h5 class="mt-3 text-muted">Sizing Controls Coming Soon</h5>
                        <p class="text-muted">Width, height, margin, padding, and box-sizing controls will be available here.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="borders-tab" class="tab-content">
            <div class="property-card">
                <div class="property-header">
                    <h3 class="mb-0"><i class="bi bi-square me-2"></i>Borders & Outlines</h3>
                    <p class="mb-0 opacity-75">Control border styles, width, colors, and border-radius</p>
                </div>
                <div class="property-body">
                    <div class="text-center py-5">
                        <i class="bi bi-tools display-1 text-muted"></i>
                        <h5 class="mt-3 text-muted">Border Controls Coming Soon</h5>
                        <p class="text-muted">Border styles, width, colors, and radius controls will be available here.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="effects-tab" class="tab-content">
            <div class="property-card">
                <div class="property-header effects">
                    <h3 class="mb-0"><i class="bi bi-stars me-2"></i>Effects & Filters</h3>
                    <p class="mb-0 opacity-75">Add shadows, filters, transforms, and visual effects</p>
                </div>
                <div class="property-body">
                    <div class="text-center py-5">
                        <i class="bi bi-tools display-1 text-muted"></i>
                        <h5 class="mt-3 text-muted">Effects Controls Coming Soon</h5>
                        <p class="text-muted">Box shadows, text shadows, filters, and transforms will be available here.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="animations-tab" class="tab-content">
            <div class="property-card">
                <div class="property-header animations">
                    <h3 class="mb-0"><i class="bi bi-arrow-repeat me-2"></i>Animations & Transitions</h3>
                    <p class="mb-0 opacity-75">Create smooth transitions and keyframe animations</p>
                </div>
                <div class="property-body">
                    <div class="text-center py-5">
                        <i class="bi bi-tools display-1 text-muted"></i>
                        <h5 class="mt-3 text-muted">Animation Controls Coming Soon</h5>
                        <p class="text-muted">Transition and animation controls with keyframe editors will be available here.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="advanced-tab" class="tab-content">
            <div class="property-card">
                <div class="property-header advanced">
                    <h3 class="mb-0"><i class="bi bi-gear me-2"></i>Advanced Properties</h3>
                    <p class="mb-0 opacity-75">Explore CSS Grid, custom properties, and modern CSS features</p>
                </div>
                <div class="property-body">
                    <div class="text-center py-5">
                        <i class="bi bi-tools display-1 text-muted"></i>
                        <h5 class="mt-3 text-muted">Advanced Controls Coming Soon</h5>
                        <p class="text-muted">CSS Grid, custom properties, and cutting-edge CSS features will be available here.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
            crossorigin="anonymous"></script>
    
    <!-- Security Utils (MUST be loaded before main script) -->
    <script>
        // Security utility functions
        const SecurityUtils = {
            // Input validation and sanitization
            sanitizeHTML: function(input) {
                if (typeof input !== 'string') return '';
                
                // Remove dangerous tags and attributes
                const div = document.createElement('div');
                div.textContent = input;
                let sanitized = div.innerHTML;
                
                // Remove script tags and event handlers
                sanitized = sanitized.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
                sanitized = sanitized.replace(/on\w+\s*=\s*"[^"]*"/gi, '');
                sanitized = sanitized.replace(/on\w+\s*=\s*'[^']*'/gi, '');
                sanitized = sanitized.replace(/javascript:/gi, '');
                
                return sanitized;
            },

            // CSS property validation
            validateCSSProperty: function(property, value) {
                const allowedProperties = [
                    'display', 'position', 'top', 'left', 'right', 'bottom', 'z-index',
                    'float', 'clear', 'overflow', 'font-family', 'font-size', 'font-weight',
                    'line-height', 'letter-spacing', 'word-spacing', 'text-transform',
                    'text-decoration', 'text-align', 'color', 'background-color',
                    'background-image', 'background-size', 'background-repeat',
                    'width', 'height', 'margin', 'padding', 'border', 'border-radius',
                    'box-shadow', 'text-shadow', 'opacity', 'transform', 'transition',
                    'animation', 'filter'
                ];
                
                if (!allowedProperties.includes(property)) return false;
                
                // Basic value validation
                if (typeof value !== 'string') return false;
                if (value.length > 200) return false;
                if (/[<>'"]/g.test(value)) return false;
                
                return true;
            },

            // Color validation
            validateColor: function(color) {
                if (!color || typeof color !== 'string') return false;
                
                // Allow hex colors, rgb, rgba, hsl, hsla, and named colors
                const colorRegex = /^(#[0-9A-F]{3,8}|rgb\(.*\)|rgba\(.*\)|hsl\(.*\)|hsla\(.*\)|[a-z]+)$/i;
                return colorRegex.test(color) && color.length <= 50;
            },

            // Numeric value validation
            validateNumeric: function(value, min = -1000, max = 1000) {
                const num = parseFloat(value);
                return !isNaN(num) && num >= min && num <= max;
            },

            // Rate limiting for user actions
            rateLimiter: {
                actions: new Map(),
                
                isAllowed: function(action, limit = 10, window = 60000) {
                    const now = Date.now();
                    const key = action;
                    
                    if (!this.actions.has(key)) {
                        this.actions.set(key, []);
                    }
                    
                    const timestamps = this.actions.get(key);
                    
                    // Remove old timestamps
                    while (timestamps.length > 0 && now - timestamps[0] > window) {
                        timestamps.shift();
                    }
                    
                    if (timestamps.length >= limit) {
                        return false;
                    }
                    
                    timestamps.push(now);
                    return true;
                }
            },

            // Error handling
            handleError: function(error, context = '') {
                console.error(`Security Error ${context}:`, error);
                
                // Log to a secure endpoint in production
                if (typeof window.reportError === 'function') {
                    window.reportError({
                        error: error.message,
                        context: context,
                        timestamp: new Date().toISOString(),
                        userAgent: navigator.userAgent
                    });
                }
            }
        };

        // Global error handlers
        window.addEventListener('error', function(event) {
            SecurityUtils.handleError(event.error, 'Global Error Handler');
        });

        window.addEventListener('unhandledrejection', function(event) {
            SecurityUtils.handleError(event.reason, 'Unhandled Promise Rejection');
        });
    </script>
    
    <!-- Main Application Script -->
    <script>
        // Initialize on page load with error handling
        document.addEventListener('DOMContentLoaded', function() {
            try {
                updateDemo();
                updateTypographyDemo();
                updateColorsDemo();
            } catch (error) {
                SecurityUtils.handleError(error, 'Initialization');
            }
        });

        // Tab switching with validation
        function switchPropertyTab(tabName) {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('switchTab', 20, 10000)) {
                    console.warn('Rate limit exceeded for tab switching');
                    return;
                }

                const validTabs = ['layout', 'typography', 'colors', 'sizing', 'borders', 'effects', 'animations', 'advanced'];
                if (!validTabs.includes(tabName)) {
                    throw new Error('Invalid tab name');
                }

                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Remove active class from all tab buttons
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Show selected tab content
                const targetTab = document.getElementById(tabName + '-tab');
                if (targetTab) {
                    targetTab.classList.add('active');
                }
                
                // Add active class to clicked button
                if (event && event.target) {
                    event.target.classList.add('active');
                }

                // Announce change for accessibility
                announceChange(`Switched to ${tabName} properties tab`);

            } catch (error) {
                SecurityUtils.handleError(error, 'Tab Switching');
            }
        }

        // Update range value displays with validation
        function updateRangeValue(id, unit = '') {
            try {
                const element = document.getElementById(id);
                const valueElement = document.getElementById(id + '-value');
                if (element && valueElement) {
                    const value = parseFloat(element.value);
                    if (SecurityUtils.validateNumeric(value, -1000, 1000)) {
                        valueElement.textContent = value + unit;
                    }
                }
            } catch (error) {
                SecurityUtils.handleError(error, 'Range Value Update');
            }
        }

        function updatePositionValue(property) {
            try {
                updateRangeValue(property, 'px');
            } catch (error) {
                SecurityUtils.handleError(error, 'Position Value Update');
            }
        }

        // Layout Demo Functions with security
        function updateDemo() {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('updateDemo', 50, 10000)) {
                    console.warn('Rate limit exceeded for demo updates');
                    return;
                }

                const element = document.getElementById('demo-element');
                const container = document.getElementById('demo-container');
                
                if (!element || !container) return;

                // Get values with validation
                const display = document.getElementById('display')?.value || 'flex';
                const position = document.getElementById('position')?.value || 'relative';
                const top = document.getElementById('top')?.value || '0';
                const left = document.getElementById('left')?.value || '0';
                const zIndex = document.getElementById('z-index')?.value || '1';
                const float = document.getElementById('float')?.value || 'none';
                const overflow = document.getElementById('overflow')?.value || 'visible';

                // Validate CSS properties and values
                const cssProperties = {
                    display, position, 
                    top: top + 'px', 
                    left: left + 'px', 
                    'z-index': zIndex, 
                    float, 
                    overflow
                };

                let validatedStyles = {};
                for (const [prop, value] of Object.entries(cssProperties)) {
                    if (SecurityUtils.validateCSSProperty(prop, value)) {
                        validatedStyles[prop] = value;
                    }
                }

                // Apply validated styles safely
                Object.assign(element.style, validatedStyles);
                
                // Special handling for container overflow
                if (SecurityUtils.validateCSSProperty('overflow', overflow)) {
                    container.style.overflow = overflow;
                }
                
                generateLayoutCSS();

            } catch (error) {
                SecurityUtils.handleError(error, 'Layout Demo Update');
            }
        }

        function generateLayoutCSS() {
            try {
                const display = document.getElementById('display')?.value || 'flex';
                const position = document.getElementById('position')?.value || 'relative';
                const top = document.getElementById('top')?.value || '0';
                const left = document.getElementById('left')?.value || '0';
                const zIndex = document.getElementById('z-index')?.value || '1';
                const float = document.getElementById('float')?.value || 'none';
                const overflow = document.getElementById('overflow')?.value || 'visible';

                let css = `<span class="css-selector">.element</span> {\n`;
                css += `  <span class="css-property">display</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(display)}</span>;\n`;
                css += `  <span class="css-property">position</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(position)}</span>;\n`;
                
                if (position !== 'static') {
                    if (top !== '0') css += `  <span class="css-property">top</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(top)}px</span>;\n`;
                    if (left !== '0') css += `  <span class="css-property">left</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(left)}px</span>;\n`;
                    if (zIndex !== '1') css += `  <span class="css-property">z-index</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(zIndex)}</span>;\n`;
                }
                
                if (float !== 'none') css += `  <span class="css-property">float</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(float)}</span>;\n`;
                if (overflow !== 'visible') css += `  <span class="css-property">overflow</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(overflow)}</span>;\n`;
                
                css += `}`;

                const outputEl = document.getElementById('layout-css-output');
                if (outputEl) {
                    outputEl.innerHTML = css;
                }

            } catch (error) {
                SecurityUtils.handleError(error, 'Layout CSS Generation');
            }
        }

        // Typography Demo Functions with security
        function updateTypographyDemo() {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('updateTypographyDemo', 50, 10000)) {
                    console.warn('Rate limit exceeded for typography updates');
                    return;
                }

                const element = document.getElementById('typo-demo-element');
                if (!element) return;
                
                // Get values with validation
                const fontFamily = document.getElementById('font-family')?.value || 'Georgia, serif';
                const fontSize = document.getElementById('font-size')?.value || '24';
                const fontWeight = document.getElementById('font-weight')?.value || '400';
                const lineHeight = document.getElementById('line-height')?.value || '1.5';
                const letterSpacing = document.getElementById('letter-spacing')?.value || '0';
                const wordSpacing = document.getElementById('word-spacing')?.value || '0';
                const textTransform = document.getElementById('text-transform')?.value || 'none';
                const textDecoration = document.getElementById('text-decoration')?.value || 'none';
                const textAlign = document.getElementById('text-align')?.value || 'center';

                // Validate and apply styles
                const cssProperties = {
                    'font-family': fontFamily,
                    'font-size': fontSize + 'px',
                    'font-weight': fontWeight,
                    'line-height': lineHeight,
                    'letter-spacing': letterSpacing + 'px',
                    'word-spacing': wordSpacing + 'px',
                    'text-transform': textTransform,
                    'text-decoration': textDecoration,
                    'text-align': textAlign
                };

                let validatedStyles = {};
                for (const [prop, value] of Object.entries(cssProperties)) {
                    if (SecurityUtils.validateCSSProperty(prop, value)) {
                        validatedStyles[prop] = value;
                    }
                }

                Object.assign(element.style, validatedStyles);
                generateTypographyCSS();

            } catch (error) {
                SecurityUtils.handleError(error, 'Typography Demo Update');
            }
        }

        function generateTypographyCSS() {
            try {
                const fontFamily = document.getElementById('font-family')?.value || 'Georgia, serif';
                const fontSize = document.getElementById('font-size')?.value || '24';
                const fontWeight = document.getElementById('font-weight')?.value || '400';
                const lineHeight = document.getElementById('line-height')?.value || '1.5';
                const letterSpacing = document.getElementById('letter-spacing')?.value || '0';
                const wordSpacing = document.getElementById('word-spacing')?.value || '0';
                const textTransform = document.getElementById('text-transform')?.value || 'none';
                const textDecoration = document.getElementById('text-decoration')?.value || 'none';
                const textAlign = document.getElementById('text-align')?.value || 'center';

                let css = `<span class="css-selector">.text-element</span> {\n`;
                css += `  <span class="css-property">font-family</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(fontFamily)}</span>;\n`;
                css += `  <span class="css-property">font-size</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(fontSize)}px</span>;\n`;
                css += `  <span class="css-property">font-weight</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(fontWeight)}</span>;\n`;
                css += `  <span class="css-property">line-height</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(lineHeight)}</span>;\n`;
                css += `  <span class="css-property">text-align</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(textAlign)}</span>;\n`;
                
                if (letterSpacing !== '0') css += `  <span class="css-property">letter-spacing</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(letterSpacing)}px</span>;\n`;
                if (wordSpacing !== '0') css += `  <span class="css-property">word-spacing</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(wordSpacing)}px</span>;\n`;
                if (textTransform !== 'none') css += `  <span class="css-property">text-transform</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(textTransform)}</span>;\n`;
                if (textDecoration !== 'none') css += `  <span class="css-property">text-decoration</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(textDecoration)}</span>;\n`;
                
                css += `}`;

                const outputEl = document.getElementById('typo-css-output');
                if (outputEl) {
                    outputEl.innerHTML = css;
                }

            } catch (error) {
                SecurityUtils.handleError(error, 'Typography CSS Generation');
            }
        }

        // Colors Demo Functions with security
        function updateColorsDemo() {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('updateColorsDemo', 50, 10000)) {
                    console.warn('Rate limit exceeded for colors updates');
                    return;
                }

                const element = document.getElementById('colors-demo-element');
                if (!element) return;

                // Get values with validation
                const textColor = document.getElementById('text-color')?.value || '#ffffff';
                const bgColor = document.getElementById('bg-color')?.value || '#667eea';
                const opacity = document.getElementById('opacity')?.value || '1';
                const bgSize = document.getElementById('bg-size')?.value || 'cover';
                const bgRepeat = document.getElementById('bg-repeat')?.value || 'no-repeat';

                // Update hex inputs
                const textColorHex = document.getElementById('text-color-hex');
                const bgColorHex = document.getElementById('bg-color-hex');
                if (textColorHex) textColorHex.value = textColor;
                if (bgColorHex) bgColorHex.value = bgColor;

                // Validate and apply styles
                const cssProperties = {
                    color: textColor,
                    'background-color': bgColor,
                    opacity: opacity,
                    'background-size': bgSize,
                    'background-repeat': bgRepeat
                };

                let validatedStyles = {};
                for (const [prop, value] of Object.entries(cssProperties)) {
                    if (prop === 'color' || prop === 'background-color') {
                        if (SecurityUtils.validateColor(value)) {
                            validatedStyles[prop] = value;
                        }
                    } else if (SecurityUtils.validateCSSProperty(prop, value)) {
                        validatedStyles[prop] = value;
                    }
                }

                Object.assign(element.style, validatedStyles);
                generateColorsCSS();

            } catch (error) {
                SecurityUtils.handleError(error, 'Colors Demo Update');
            }
        }

        function updateColorFromHex(colorType) {
            try {
                const hexInput = document.getElementById(colorType + '-hex');
                const colorInput = document.getElementById(colorType);
                
                if (hexInput && colorInput) {
                    const hexValue = hexInput.value;
                    if (SecurityUtils.validateColor(hexValue)) {
                        colorInput.value = hexValue;
                        updateColorsDemo();
                    }
                }
            } catch (error) {
                SecurityUtils.handleError(error, 'Color Hex Update');
            }
        }

        function generateColorsCSS() {
            try {
                const textColor = document.getElementById('text-color')?.value || '#ffffff';
                const bgColor = document.getElementById('bg-color')?.value || '#667eea';
                const opacity = document.getElementById('opacity')?.value || '1';
                const bgSize = document.getElementById('bg-size')?.value || 'cover';
                const bgRepeat = document.getElementById('bg-repeat')?.value || 'no-repeat';

                let css = `<span class="css-selector">.color-element</span> {\n`;
                css += `  <span class="css-property">color</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(textColor)}</span>;\n`;
                css += `  <span class="css-property">background-color</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(bgColor)}</span>;\n`;
                
                if (opacity !== '1') css += `  <span class="css-property">opacity</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(opacity)}</span>;\n`;
                if (bgSize !== 'auto') css += `  <span class="css-property">background-size</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(bgSize)}</span>;\n`;
                if (bgRepeat !== 'repeat') css += `  <span class="css-property">background-repeat</span>: <span class="css-value">${SecurityUtils.sanitizeHTML(bgRepeat)}</span>;\n`;
                
                css += `}`;

                const outputEl = document.getElementById('colors-css-output');
                if (outputEl) {
                    outputEl.innerHTML = css;
                }

            } catch (error) {
                SecurityUtils.handleError(error, 'Colors CSS Generation');
            }
        }

        // Preset functions with validation
        function applyLayoutPreset(preset) {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('applyPreset', 20, 60000)) {
                    console.warn('Rate limit exceeded for applying presets');
                    return;
                }

                const validPresets = ['centered', 'fixed-header', 'sticky-nav', 'floating'];
                if (!validPresets.includes(preset)) {
                    throw new Error('Invalid preset name');
                }

                switch(preset) {
                    case 'centered':
                        document.getElementById('position').value = 'absolute';
                        document.getElementById('top').value = '50';
                        document.getElementById('left').value = '50';
                        updateRangeValue('top', 'px');
                        updateRangeValue('left', 'px');
                        const demoElement = document.getElementById('demo-element');
                        if (demoElement) {
                            demoElement.style.transform = 'translate(-50%, -50%)';
                        }
                        break;
                    case 'fixed-header':
                        document.getElementById('position').value = 'fixed';
                        document.getElementById('top').value = '0';
                        document.getElementById('left').value = '0';
                        updateRangeValue('top', 'px');
                        updateRangeValue('left', 'px');
                        break;
                    case 'sticky-nav':
                        document.getElementById('position').value = 'sticky';
                        document.getElementById('top').value = '0';
                        updateRangeValue('top', 'px');
                        break;
                    case 'floating':
                        document.getElementById('position').value = 'relative';
                        document.getElementById('float').value = 'right';
                        break;
                }
                updateDemo();
                showToast(`Applied ${preset.replace('-', ' ')} preset!`, 'success');

            } catch (error) {
                SecurityUtils.handleError(error, 'Apply Layout Preset');
            }
        }

        function applyTypographyPreset(preset) {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('applyTypographyPreset', 20, 60000)) {
                    console.warn('Rate limit exceeded for typography presets');
                    return;
                }

                const validPresets = ['heading', 'body', 'caption', 'code'];
                if (!validPresets.includes(preset)) {
                    throw new Error('Invalid typography preset');
                }

                switch(preset) {
                    case 'heading':
                        document.getElementById('font-size').value = '36';
                        document.getElementById('font-weight').value = '700';
                        document.getElementById('line-height').value = '1.2';
                        document.getElementById('font-family').value = 'Arial, sans-serif';
                        document.getElementById('text-transform').value = 'none';
                        document.getElementById('letter-spacing').value = '0';
                        break;
                    case 'body':
                        document.getElementById('font-size').value = '16';
                        document.getElementById('font-weight').value = '400';
                        document.getElementById('line-height').value = '1.6';
                        document.getElementById('font-family').value = 'Georgia, serif';
                        document.getElementById('text-transform').value = 'none';
                        document.getElementById('letter-spacing').value = '0';
                        break;
                    case 'caption':
                        document.getElementById('font-size').value = '12';
                        document.getElementById('font-weight').value = '400';
                        document.getElementById('line-height').value = '1.4';
                        document.getElementById('text-transform').value = 'uppercase';
                        document.getElementById('letter-spacing').value = '1';
                        break;
                    case 'code':
                        document.getElementById('font-family').value = "'Courier New', monospace";
                        document.getElementById('font-size').value = '14';
                        document.getElementById('font-weight').value = '400';
                        document.getElementById('line-height').value = '1.5';
                        document.getElementById('text-transform').value = 'none';
                        document.getElementById('letter-spacing').value = '0';
                        break;
                }
                updateRangeValue('font-size', 'px');
                updateRangeValue('line-height');
                updateRangeValue('letter-spacing', 'px');
                updateTypographyDemo();
                showToast(`Applied ${preset} typography preset!`, 'success');

            } catch (error) {
                SecurityUtils.handleError(error, 'Apply Typography Preset');
            }
        }

        function applyColorPreset(preset) {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('applyColorPreset', 20, 60000)) {
                    console.warn('Rate limit exceeded for color presets');
                    return;
                }

                const validPresets = ['primary', 'success', 'warning', 'gradient'];
                if (!validPresets.includes(preset)) {
                    throw new Error('Invalid color preset');
                }

                switch(preset) {
                    case 'primary':
                        document.getElementById('text-color').value = '#ffffff';
                        document.getElementById('bg-color').value = '#007bff';
                        break;
                    case 'success':
                        document.getElementById('text-color').value = '#ffffff';
                        document.getElementById('bg-color').value = '#28a745';
                        break;
                    case 'warning':
                        document.getElementById('text-color').value = '#212529';
                        document.getElementById('bg-color').value = '#ffc107';
                        break;
                    case 'gradient':
                        document.getElementById('text-color').value = '#ffffff';
                        document.getElementById('bg-color').value = '#667eea';
                        const element = document.getElementById('colors-demo-element');
                        if (element) {
                            element.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                        }
                        break;
                }
                updateColorsDemo();
                showToast(`Applied ${preset} color preset!`, 'success');

            } catch (error) {
                SecurityUtils.handleError(error, 'Apply Color Preset');
            }
        }

        // Copy functionality with security
        function copyCode(outputId) {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('copyCode', 10, 60000)) {
                    console.warn('Rate limit exceeded for copy operations');
                    return;
                }

                const codeElement = document.getElementById(outputId);
                if (!codeElement) return;

                const codeText = codeElement.textContent || '';
                
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(codeText).then(() => {
                        showCopySuccess(event.target);
                    }).catch((error) => {
                        SecurityUtils.handleError(error, 'Clipboard API');
                        fallbackCopy(codeText, event.target);
                    });
                } else {
                    fallbackCopy(codeText, event.target);
                }
            } catch (error) {
                SecurityUtils.handleError(error, 'Copy Code');
            }
        }

        function fallbackCopy(text, button) {
            try {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showCopySuccess(button);
            } catch (error) {
                SecurityUtils.handleError(error, 'Fallback Copy');
            }
        }

        function showCopySuccess(button) {
            try {
                if (!button) return;
                
                const originalHTML = button.innerHTML;
                
                button.classList.add('copied');
                button.innerHTML = '<i class="bi bi-check me-1"></i>Copied!';
                
                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = originalHTML;
                }, 2000);
                
                showToast('CSS code copied to clipboard!', 'success');
            } catch (error) {
                SecurityUtils.handleError(error, 'Copy Success Display');
            }
        }

        // Toast notification system with rate limiting
        function showToast(message, type = 'info') {
            try {
                if (!SecurityUtils.rateLimiter.isAllowed('showToast', 20, 30000)) {
                    return;
                }

                const toastContainer = document.getElementById('toast-container');
                if (!toastContainer) return;

                const toast = document.createElement('div');
                toast.className = `toast-custom show`;
                
                const iconMap = {
                    success: 'check-circle',
                    warning: 'exclamation-triangle',
                    error: 'x-circle',
                    info: 'info-circle'
                };

                const colorMap = {
                    success: '#28a745',
                    warning: '#ffc107',
                    error: '#dc3545',
                    info: '#17a2b8'
                };

                toast.innerHTML = `
                    <div class="d-flex align-items-center">
                        <i class="bi bi-${iconMap[type]} me-2" style="color: ${colorMap[type]}; font-size: 1.2rem;"></i>
                        <span>${SecurityUtils.sanitizeHTML(message)}</span>
                    </div>
                `;

                toastContainer.appendChild(toast);

                setTimeout(() => {
                    toast.style.animation = 'slideIn 0.3s ease reverse';
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toastContainer.removeChild(toast);
                        }
                    }, 300);
                }, 3000);

            } catch (error) {
                SecurityUtils.handleError(error, 'Show Toast');
            }
        }

        // Keyboard shortcuts with security
        document.addEventListener('keydown', function(e) {
            try {
                // Ctrl/Cmd + Enter to copy current CSS
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    e.preventDefault();
                    const activeTab = document.querySelector('.tab-content.active');
                    if (activeTab) {
                        const codeOutput = activeTab.querySelector('.code-output');
                        if (codeOutput) {
                            const codeText = codeOutput.textContent || '';
                            if (navigator.clipboard) {
                                navigator.clipboard.writeText(codeText);
                                showToast('CSS copied via keyboard shortcut!', 'success');
                            }
                        }
                    }
                }
                
                // Escape to reset current tab
                if (e.key === 'Escape') {
                    e.preventDefault();
                    const activeTabId = document.querySelector('.tab-content.active')?.id;
                    if (activeTabId === 'layout-tab') {
                        resetLayoutControls();
                    } else if (activeTabId === 'typography-tab') {
                        resetTypographyControls();
                    } else if (activeTabId === 'colors-tab') {
                        resetColorControls();
                    }
                }
                
                // Number keys 1-8 to switch tabs
                if (e.key >= '1' && e.key <= '8' && !e.ctrlKey && !e.metaKey) {
                    e.preventDefault();
                    const tabNames = ['layout', 'typography', 'colors', 'sizing', 'borders', 'effects', 'animations', 'advanced'];
                    const tabIndex = parseInt(e.key) - 1;
                    if (tabIndex < tabNames.length) {
                        switchPropertyTab(tabNames[tabIndex]);
                    }
                }
            } catch (error) {
                SecurityUtils.handleError(error, 'Keyboard Shortcuts');
            }
        });

        // Reset functions
        function resetLayoutControls() {
            try {
                document.getElementById('display').value = 'flex';
                document.getElementById('position').value = 'relative';
                document.getElementById('top').value = '0';
                document.getElementById('left').value = '0';
                document.getElementById('z-index').value = '1';
                document.getElementById('float').value = 'none';
                document.getElementById('overflow').value = 'visible';
                
                updateRangeValue('top', 'px');
                updateRangeValue('left', 'px');
                updateRangeValue('z-index');
                updateDemo();
                showToast('Layout controls reset!', 'info');
            } catch (error) {
                SecurityUtils.handleError(error, 'Reset Layout Controls');
            }
        }

        function resetTypographyControls() {
            try {
                document.getElementById('font-family').value = 'Georgia, serif';
                document.getElementById('font-size').value = '24';
                document.getElementById('font-weight').value = '400';
                document.getElementById('line-height').value = '1.5';
                document.getElementById('letter-spacing').value = '0';
                document.getElementById('word-spacing').value = '0';
                document.getElementById('text-transform').value = 'none';
                document.getElementById('text-decoration').value = 'none';
                document.getElementById('text-align').value = 'center';
                
                updateRangeValue('font-size', 'px');
                updateRangeValue('line-height');
                updateRangeValue('letter-spacing', 'px');
                updateRangeValue('word-spacing', 'px');
                updateTypographyDemo();
                showToast('Typography controls reset!', 'info');
            } catch (error) {
                SecurityUtils.handleError(error, 'Reset Typography Controls');
            }
        }

        function resetColorControls() {
            try {
                document.getElementById('text-color').value = '#ffffff';
                document.getElementById('bg-color').value = '#667eea';
                document.getElementById('opacity').value = '1';
                document.getElementById('bg-size').value = 'cover';
                document.getElementById('bg-repeat').value = 'no-repeat';
                
                updateRangeValue('opacity');
                updateColorsDemo();
                showToast('Color controls reset!', 'info');
            } catch (error) {
                SecurityUtils.handleError(error, 'Reset Color Controls');
            }
        }

        // Accessibility announcements
        function announceChange(message) {
            try {
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'polite');
                announcement.setAttribute('aria-atomic', 'true');
                announcement.className = 'visually-hidden';
                announcement.textContent = SecurityUtils.sanitizeHTML(message);
                document.body.appendChild(announcement);
                
                setTimeout(() => {
                    if (announcement.parentNode) {
                        document.body.removeChild(announcement);
                    }
                }, 1000);
            } catch (error) {
                SecurityUtils.handleError(error, 'Accessibility Announcement');
            }
        }

        // Performance monitoring
        if ('performance' in window && 'mark' in performance) {
            performance.mark('css-playground-loaded');
        }
    </script>

    <!-- Error Boundary and Monitoring -->
    <script>
        // Additional security monitoring
        (function() {
            'use strict';
            
            // Monitor for suspicious activity
            let suspiciousActivity = 0;
            const MAX_SUSPICIOUS_ACTIVITY = 10;
            
            // Monitor DOM modifications
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    // Check for suspicious script injections
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === Node.ELEMENT_NODE) {
                                if (node.tagName === 'SCRIPT' || 
                                    node.innerHTML.includes('<script') ||
                                    node.innerHTML.includes('javascript:') ||
                                    node.innerHTML.includes('data:text/html')) {
                                    suspiciousActivity++;
                                    console.warn('Suspicious content detected and blocked');
                                    node.remove();
                                    
                                    if (suspiciousActivity >= MAX_SUSPICIOUS_ACTIVITY) {
                                        console.error('Maximum suspicious activity threshold reached');
                                        // Could implement additional security measures here
                                    }
                                }
                            }
                        });
                    }
                });
            });

            // Start observing
            observer.observe(document.body, {
                childList: true,
                subtree: true,
                characterData: true
            });

            // Content Security Policy violation handler
            document.addEventListener('securitypolicyviolation', function(event) {
                SecurityUtils.handleError({
                    message: 'CSP Violation',
                    violatedDirective: event.violatedDirective,
                    blockedURI: event.blockedURI,
                    lineNumber: event.lineNumber,
                    sourceFile: event.sourceFile
                }, 'CSP Violation');
            });

            // Performance monitoring
            if ('performance' in window && 'mark' in performance) {
                performance.mark('css-playground-security-loaded');
            }
        })();
    </script>
</body>
</html>