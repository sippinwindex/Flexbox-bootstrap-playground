<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- CRITICAL: No-flash script for dark mode -->
    <script>
    (function() {
        'use strict';
        const THEME_KEY = 'theme';
        const DARK_MODE_CLASS = 'dark-mode';
        try {
            const savedTheme = localStorage.getItem(THEME_KEY);
            if (savedTheme === 'dark') {
                document.documentElement.classList.add(DARK_MODE_CLASS);
                if (document.body) document.body.classList.add(DARK_MODE_CLASS);
            } else if (savedTheme === 'light') {
                document.documentElement.classList.remove(DARK_MODE_CLASS);
                if (document.body) document.body.classList.remove(DARK_MODE_CLASS);
            } else {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add(DARK_MODE_CLASS);
                    if (document.body) document.body.classList.add(DARK_MODE_CLASS);
                }
            }
        } catch (e) {
            console.warn('Theme persistence not available:', e);
        }
    })();
    </script>
    
    <meta name="description" content="Complete interactive CSS properties playground for mastering all CSS properties with visual learning tools">
    <meta name="keywords" content="CSS, properties, playground, learning, interactive, web development, visual tools">
    <title>CSS Properties Master Playground - Complete Production Edition</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- External CSS Files -->
    <link rel="stylesheet" href="css/theme-variables.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>

<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Keyboard shortcuts overlay -->
    <div class="keyboard-shortcuts" id="keyboard-shortcuts">
        <h6><i class="bi bi-keyboard me-2"></i>Shortcuts</h6>
        <div id="shortcuts-list">
            <!-- Dynamically populated by JavaScript -->
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top" id="main-navbar">
        <!-- Navigation content will be loaded by navigation.js -->
    </nav>

    <!-- Main content wrapper -->
    <div id="main-content">
        <!-- Hero Section -->
        <section class="hero-section" id="hero-section">
            <!-- Hero content will be loaded by hero.js -->
        </section>

        <div class="container mt-4">
            <!-- Visual Toolbar -->
            <div class="visual-toolbar" id="visual-toolbar">
                <!-- Toolbar content will be loaded by toolbar.js -->
            </div>

            <!-- Property Tabs -->
            <div class="property-tabs" id="property-tabs">
                <!-- Tab buttons will be loaded by tabs.js -->
            </div>

            <!-- Tab Content Container -->
            <div id="tab-content-container">
                <!-- Tab content will be dynamically loaded -->
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Core JavaScript Modules -->
    <script src="js/core/app-state.js"></script>
    <script src="js/core/theme-manager.js"></script>
    <script src="js/core/event-manager.js"></script>
    <script src="js/core/storage-manager.js"></script>
    
    <!-- UI Components -->
    <script src="js/components/navigation.js"></script>
    <script src="js/components/hero.js"></script>
    <script src="js/components/toolbar.js"></script>
    <script src="js/components/tabs.js"></script>
    <script src="js/components/toast.js"></script>
    
    <!-- Property Modules -->
    <script src="js/properties/layout-properties.js"></script>
    <script src="js/properties/typography-properties.js"></script>
    <script src="js/properties/color-properties.js"></script>
    <script src="js/properties/sizing-properties.js"></script>
    <script src="js/properties/border-properties.js"></script>
    <script src="js/properties/effect-properties.js"></script>
    <script src="js/properties/animation-properties.js"></script>
    <script src="js/properties/advanced-properties.js"></script>
    
    <!-- Demo System -->
    <script src="js/demo/demo-manager.js"></script>
    <script src="js/demo/css-generator.js"></script>
    <script src="js/demo/preset-manager.js"></script>
    
    <!-- Learning System -->
    <script src="js/learning/challenge-system.js"></script>
    <script src="js/learning/tutorial-system.js"></script>
    <script src="js/learning/progress-tracker.js"></script>
    
    <!-- Utilities -->
    <script src="js/utils/keyboard-shortcuts.js"></script>
    <script src="js/utils/export-utils.js"></script>
    <script src="js/utils/validation-utils.js"></script>
    
    <!-- Main Application -->
    <script src="js/app.js"></script>

    <script>
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸŽ¨ CSS Properties Master Playground - Loading...');
            
            // Initialize core systems
            AppState.init();
            ThemeManager.init();
            EventManager.init();
            StorageManager.init();
            
            // Initialize UI components
            Navigation.init();
            Hero.init();
            Toolbar.init();
            Tabs.init();
            Toast.init();
            
            // Initialize property modules
            LayoutProperties.init();
            TypographyProperties.init();
            ColorProperties.init();
            SizingProperties.init();
            BorderProperties.init();
            EffectProperties.init();
            AnimationProperties.init();
            AdvancedProperties.init();
            
            // Initialize demo system
            DemoManager.init();
            CSSGenerator.init();
            PresetManager.init();
            
            // Initialize learning system
            ChallengeSystem.init();
            TutorialSystem.init();
            ProgressTracker.init();
            
            // Initialize utilities
            KeyboardShortcuts.init();
            ExportUtils.init();
            ValidationUtils.init();
            
            // Show welcome message
            setTimeout(() => {
                Toast.show('ðŸŽ‰ Welcome to CSS Properties Master Playground!', 'info');
            }, 1000);
            
            console.log('âœ… CSS Properties Master Playground - Ready!');
        });
    </script>
</body>
</html>