<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- CRITICAL: No-flash script for dark mode -->
    <!-- Dark Mode JS - Advanced theme system -->
    <script>
// js/dark-mode.js - Dark mode toggle functionality
(function() {
    'use strict';
    
    const THEME_KEY = 'bootstrap-playground-theme';
    const SYNTAX_THEME_KEY = 'syntaxTheme';
    const TOGGLE_POSITION_KEY = 'themeTogglePosition';
    const DARK_MODE_CLASS = 'dark-mode';
    
    const THEMES = {
        LIGHT: 'light',
        DARK: 'dark'
    };
    
    const SYNTAX_THEMES = {
        DEFAULT: 'default',
        DRACULA: 'dracula',
        MONOKAI: 'monokai',
        MATERIAL: 'material'
    };
    
    // Cache DOM elements
    let themeToggle = null;
    let themeSelector = null;
    let themeToggleWrapper = null;
    let sunIcon = null;
    let moonIcon = null;
    let isDragging = false;
    let dragOffset = { x: 0, y: 0 };
    
    /**
     * Updates the visibility of sun and moon icons based on current theme
     * @param {boolean} isDarkMode - Whether dark mode is currently active
     */
    function updateIcons(isDarkMode) {
        if (sunIcon && moonIcon) {
            sunIcon.style.display = isDarkMode ? 'none' : 'inline-block';
            moonIcon.style.display = isDarkMode ? 'inline-block' : 'none';
        }
    }
    
    /**
     * Gets the current theme from localStorage or system preference
     * @returns {string} 'dark' or 'light'
     */
    function getCurrentTheme() {
        const savedTheme = localStorage.getItem(THEME_KEY);
        
        if (savedTheme === THEMES.DARK || savedTheme === THEMES.LIGHT) {
            return savedTheme;
        }
        
        // Check system preference if no saved theme
        return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches 
            ? THEMES.DARK 
            : THEMES.LIGHT;
    }
    
    /**
     * Gets the current syntax theme from localStorage
     * @returns {string} syntax theme name
     */
    function getCurrentSyntaxTheme() {
        return localStorage.getItem(SYNTAX_THEME_KEY) || SYNTAX_THEMES.DRACULA;
    }
    
    /**
     * Applies the given theme to the document
     * @param {string} theme - 'dark' or 'light'
     */
    function applyTheme(theme) {
        const isDarkMode = theme === THEMES.DARK;
        
        if (isDarkMode) {
            document.body.classList.add(DARK_MODE_CLASS);
            document.documentElement.classList.add(DARK_MODE_CLASS);
        } else {
            document.body.classList.remove(DARK_MODE_CLASS);
            document.documentElement.classList.remove(DARK_MODE_CLASS);
        }
        
        // Store the preference
        localStorage.setItem(THEME_KEY, theme);
        
        // Update icons
        updateIcons(isDarkMode);
        
        // Update syntax highlighting if applicable
        updateSyntaxHighlighting();
        
        // Dispatch custom event for other scripts to listen to
        window.dispatchEvent(new CustomEvent('themeChanged', {
            detail: { theme, isDarkMode }
        }));
    }
    
    /**
     * Applies syntax theme to code blocks
     * @param {string} syntaxTheme - syntax theme name
     */
    function applySyntaxTheme(syntaxTheme) {
        localStorage.setItem(SYNTAX_THEME_KEY, syntaxTheme);
        updateSyntaxHighlighting();
        
        // Dispatch event for other components to update
        window.dispatchEvent(new CustomEvent('syntaxThemeChanged', {
            detail: { syntaxTheme }
        }));
    }
    
    /**
     * Updates syntax highlighting based on current theme
     */
    function updateSyntaxHighlighting() {
        const syntaxTheme = getCurrentSyntaxTheme();
        const codeOutputs = document.querySelectorAll('.code-output');
        
        codeOutputs.forEach(output => {
            // Remove existing theme classes
            output.classList.remove('syntax-default', 'syntax-dracula', 'syntax-monokai', 'syntax-material');
            
            // Add new theme class
            output.classList.add(`syntax-${syntaxTheme}`);
            
            // Apply theme-specific styles
            switch(syntaxTheme) {
                case SYNTAX_THEMES.DRACULA:
                    output.style.background = 'linear-gradient(135deg, #282a36, #44475a)';
                    output.style.color = '#f8f8f2';
                    break;
                case SYNTAX_THEMES.MONOKAI:
                    output.style.background = 'linear-gradient(135deg, #272822, #3e3d32)';
                    output.style.color = '#f8f8f2';
                    break;
                case SYNTAX_THEMES.MATERIAL:
                    output.style.background = 'linear-gradient(135deg, #263238, #37474f)';
                    output.style.color = '#eeffff';
                    break;
                default:
                    output.style.background = 'linear-gradient(135deg, #1a1a1a, #2d2d2d)';
                    output.style.color = '#e6e6e6';
            }
        });
    }
    
    /**
     * Updates active theme option in selector
     */
    function updateActiveThemeOption() {
        if (!themeSelector) return;
        
        const currentTheme = getCurrentTheme();
        const currentSyntax = getCurrentSyntaxTheme();
        const themeOptions = themeSelector.querySelectorAll('.theme-option');
        
        themeOptions.forEach(option => {
            option.classList.remove('active');
            if (option.dataset.theme === currentTheme && option.dataset.syntax === currentSyntax) {
                option.classList.add('active');
            }
        });
    }
    
    /**
     * Makes the theme toggle draggable
     */
    function makeDraggable() {
        if (!themeToggleWrapper) return;
        
        let currentX, currentY, initialX, initialY;
        
        function dragStart(e) {
            if (e.target.closest('.theme-selector')) return;
            
            const clientX = e.clientX || (e.touches && e.touches[0].clientX);
            const clientY = e.clientY || (e.touches && e.touches[0].clientY);
            
            if (!clientX || !clientY) return;
            
            initialX = clientX - dragOffset.x;
            initialY = clientY - dragOffset.y;
            
            if (e.target === themeToggleWrapper || e.target.closest('.theme-toggle')) {
                isDragging = true;
                themeToggleWrapper.style.cursor = 'grabbing';
                e.preventDefault();
            }
        }
        
        function drag(e) {
            if (!isDragging) return;
            
            e.preventDefault();
            
            const clientX = e.clientX || (e.touches && e.touches[0].clientX);
            const clientY = e.clientY || (e.touches && e.touches[0].clientY);
            
            if (!clientX || !clientY) return;
            
            currentX = clientX - initialX;
            currentY = clientY - initialY;
            
            dragOffset.x = currentX;
            dragOffset.y = currentY;
            
            // Constrain to viewport
            const rect = themeToggleWrapper.getBoundingClientRect();
            const maxX = window.innerWidth - rect.width;
            const maxY = window.innerHeight - rect.height;
            
            dragOffset.x = Math.max(0, Math.min(maxX, currentX));
            dragOffset.y = Math.max(0, Math.min(maxY, currentY));
            
            themeToggleWrapper.style.transform = `translate(${dragOffset.x}px, ${dragOffset.y}px)`;
        }
        
        function dragEnd() {
            if (!isDragging) return;
            
            isDragging = false;
            themeToggleWrapper.style.cursor = 'move';
            
            // Save position
            localStorage.setItem(TOGGLE_POSITION_KEY, JSON.stringify(dragOffset));
        }
        
        // Mouse events
        themeToggleWrapper.addEventListener('mousedown', dragStart);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', dragEnd);
        
        // Touch events for mobile
        themeToggleWrapper.addEventListener('touchstart', dragStart, { passive: false });
        document.addEventListener('touchmove', drag, { passive: false });
        document.addEventListener('touchend', dragEnd);
        
        // Load saved position
        loadSavedPosition();
    }
    
    /**
     * Loads saved toggle position
     */
    function loadSavedPosition() {
        if (!themeToggleWrapper) return;
        
        const savedPosition = localStorage.getItem(TOGGLE_POSITION_KEY);
        if (savedPosition) {
            try {
                dragOffset = JSON.parse(savedPosition);
                themeToggleWrapper.style.transform = `translate(${dragOffset.x}px, ${dragOffset.y}px)`;
            } catch (e) {
                console.warn('Failed to load saved theme toggle position:', e);
            }
        }
    }
    
    /**
     * Toggles between light and dark themes
     */
    function toggleTheme() {
        const currentTheme = getCurrentTheme();
        const newTheme = currentTheme === THEMES.DARK ? THEMES.LIGHT : THEMES.DARK;
        applyTheme(newTheme);
        showToast(`Switched to ${newTheme} mode`, 'info');
        updateActiveThemeOption();
    }
    
    /**
     * Sets up theme selector functionality
     */
    function setupThemeSelector() {
        if (!themeToggle || !themeSelector) return;
        
        // Toggle theme selector
        themeToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            if (!isDragging) {
                themeSelector.classList.toggle('show');
            }
        });
        
        // Close theme selector when clicking outside
        document.addEventListener('click', (e) => {
            if (!themeSelector.contains(e.target) && !themeToggle.contains(e.target)) {
                themeSelector.classList.remove('show');
            }
        });
        
        // Theme option selection
        const themeOptions = themeSelector.querySelectorAll('.theme-option');
        themeOptions.forEach(option => {
            option.addEventListener('click', () => {
                const theme = option.dataset.theme;
                const syntax = option.dataset.syntax;
                
                applyTheme(theme);
                applySyntaxTheme(syntax);
                updateActiveThemeOption();
                
                themeSelector.classList.remove('show');
                
                const themeName = option.textContent.trim().split('\n')[0];
                showToast(`Applied ${themeName} theme`, 'success');
            });
        });
        
        updateActiveThemeOption();
    }
    
    /**
     * Creates theme toggle HTML if it doesn't exist
     */
    function createThemeToggle() {
        if (document.getElementById('themeToggleWrapper')) return;
        
        const html = `
            <div class="theme-toggle-wrapper" id="themeToggleWrapper">
                <button class="theme-toggle" id="themeToggle" title="Toggle Theme" aria-label="Toggle between light and dark themes">
                    <i class="bi bi-sun-fill sun-icon" id="sunIcon"></i>
                    <i class="bi bi-moon-fill moon-icon" id="moonIcon" style="display: none;"></i>
                </button>
                
                <div class="theme-selector" id="themeSelector">
                    <div class="theme-option" data-theme="light" data-syntax="default">
                        <i class="bi bi-sun-fill"></i>
                        <div>
                            <div>Light Theme</div>
                            <small>Default syntax</small>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="dark" data-syntax="dracula">
                        <i class="bi bi-moon-fill"></i>
                        <div>
                            <div>Dark Dracula</div>
                            <small>Dracula syntax</small>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="dark" data-syntax="monokai">
                        <i class="bi bi-circle-fill" style="color: #a6e22e;"></i>
                        <div>
                            <div>Dark Monokai</div>
                            <small>Monokai syntax</small>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="dark" data-syntax="material">
                        <i class="bi bi-circle-fill" style="color: #80cbc4;"></i>
                        <div>
                            <div>Material Dark</div>
                            <small>Material syntax</small>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', html);
    }
    
    /**
     * Initializes the theme system
     */
    function initializeTheme() {
        // Create theme toggle if it doesn't exist
        createThemeToggle();
        
        // Cache DOM elements
        themeToggle = document.getElementById('themeToggle');
        themeSelector = document.getElementById('themeSelector');
        themeToggleWrapper = document.getElementById('themeToggleWrapper');
        sunIcon = document.getElementById('sunIcon');
        moonIcon = document.getElementById('moonIcon');
        
        // Apply the initial theme
        const currentTheme = getCurrentTheme();
        applyTheme(currentTheme);
        
        // Set up event listeners
        if (themeToggle) {
            // Add keyboard support
            themeToggle.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    if (themeSelector && themeSelector.classList.contains('show')) {
                        themeSelector.classList.remove('show');
                    } else {
                        toggleTheme();
                    }
                }
            });
        }
        
        // Setup theme selector
        setupThemeSelector();
        
        // Make draggable
        makeDraggable();
        
        // Listen for system theme changes
        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        if (mediaQuery.addEventListener) {
            mediaQuery.addEventListener('change', function(e) {
                // Only apply system preference if user hasn't manually set a theme
                const savedTheme = localStorage.getItem(THEME_KEY);
                if (!savedTheme) {
                    applyTheme(e.matches ? THEMES.DARK : THEMES.LIGHT);
                }
            });
        }
    }
    
    /**
     * Public API for other scripts
     */
    window.ThemeManager = {
        getCurrentTheme: getCurrentTheme,
        getCurrentSyntaxTheme: getCurrentSyntaxTheme,
        applyTheme: applyTheme,
        applySyntaxTheme: applySyntaxTheme,
        toggleTheme: toggleTheme,
        updateActiveThemeOption: updateActiveThemeOption,
        isDarkMode: function() {
            return document.body.classList.contains(DARK_MODE_CLASS);
        },
        THEMES: THEMES,
        SYNTAX_THEMES: SYNTAX_THEMES,
        createThemeToggle: createThemeToggle
    };
    
    // Apply theme immediately to prevent flash of unstyled content
    function applyInitialTheme() {
        const savedTheme = localStorage.getItem(THEME_KEY);
        
        if (savedTheme === THEMES.DARK) {
            document.documentElement.classList.add(DARK_MODE_CLASS);
            if (document.body) {
                document.body.classList.add(DARK_MODE_CLASS);
            }
        } else if (savedTheme === THEMES.LIGHT) {
            document.documentElement.classList.remove(DARK_MODE_CLASS);
            if (document.body) {
                document.body.classList.remove(DARK_MODE_CLASS);
            }
        } else {
            // Check system preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add(DARK_MODE_CLASS);
                if (document.body) {
                    document.body.classList.add(DARK_MODE_CLASS);
                }
            }
        }
    }
    
    // Apply initial theme immediately
    applyInitialTheme();
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeTheme);
    } else {
        initializeTheme();
    }
    
})();
    </script>

    <script>
    (function() {
        'use strict';
        const THEME_KEY = 'bootstrap-playground-theme';
        const DARK_MODE_CLASS = 'dark-mode';
        try {
            const savedTheme = localStorage.getItem(THEME_KEY);
            if (savedTheme === 'dark') {
                document.documentElement.classList.add(DARK_MODE_CLASS);
                if (document.body) document.body.classList.add(DARK_MODE_CLASS);
            } else if (savedTheme === 'light') {
                document.documentElement.classList.remove(DARK_MODE_CLASS);
                if (document.body) document.body.classList.remove(DARK_MODE_CLASS);
            } else {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add(DARK_MODE_CLASS);
                    if (document.body) document.body.classList.add(DARK_MODE_CLASS);
                }
            }
        } catch (e) {
            console.warn('Theme persistence not available:', e);
        }
    })();
    </script>
    
    <meta name="description" content="Complete interactive Bootstrap components playground with visual learning tools">
    <meta name="keywords" content="Bootstrap, components, playground, learning, interactive, web development, UI framework">
    <title>Bootstrap Master Playground - Complete Interactive Edition</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
:root {
    /* Enhanced theme variables that change with dark mode */
    --theme-bg-primary: #ffffff;
    --theme-bg-secondary: #f8f9fa;
    --theme-bg-tertiary: #e9ecef;
    --theme-text-primary: #495057;
    --theme-text-secondary: #6c757d;
    --theme-text-muted: #a0aec0;
    --theme-border-color: #dee2e6;
    --theme-border-focus: #0d6efd;
    --theme-shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
    --theme-shadow-md: 0 4px 15px rgba(0,0,0,0.15);
    --theme-shadow-lg: 0 8px 25px rgba(0,0,0,0.2);

    /* Bootstrap-themed gradients */
    --primary-gradient: linear-gradient(135deg, #0d6efd 0%, #6610f2 100%);
    --success-gradient: linear-gradient(135deg, #198754, #20c997);
    --warning-gradient: linear-gradient(135deg, #ffc107, #fd7e14);
    --info-gradient: linear-gradient(135deg, #0dcaf0, #6f42c1);
    --danger-gradient: linear-gradient(135deg, #dc3545, #d63384);
    --secondary-gradient: linear-gradient(135deg, #6c757d, #adb5bd);
    
    /* Individual colors matching Bootstrap */
    --bs-primary-custom: #0d6efd;
    --bs-success-custom: #198754;
    --bs-warning-custom: #ffc107;
    --bs-danger-custom: #dc3545;
    --bs-info-custom: #0dcaf0;
    --bs-secondary-custom: #6c757d;
    
    /* Animation Variables */
    --transition-fast: 0.15s ease-out;
    --transition-base: 0.3s ease-out;
    --transition-slow: 0.5s ease-out;
    
    /* Glass morphism variables */
    --glass-bg: rgba(255, 255, 255, 0.1);
    --glass-border: rgba(255, 255, 255, 0.2);
    --glass-backdrop: blur(20px);
}

/* Dark mode overrides - enhanced */
body.dark-mode {
    --theme-bg-primary: #1a202c;
    --theme-bg-secondary: #2d3748;
    --theme-bg-tertiary: #4a5568;
    --theme-text-primary: #e2e8f0;
    --theme-text-secondary: #a0aec0;
    --theme-text-muted: #718096;
    --theme-border-color: #4a5568;
    --theme-border-focus: #0d6efd;
    --theme-shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
    --theme-shadow-md: 0 4px 15px rgba(0,0,0,0.4);
    --theme-shadow-lg: 0 8px 25px rgba(0,0,0,0.3);
    
    --glass-bg: rgba(0, 0, 0, 0.2);
    --glass-border: rgba(255, 255, 255, 0.1);
}

/* Enhanced global transitions */
*,
*::before,
*::after {
    transition: 
        background-color var(--transition-base),
        color var(--transition-base),
        border-color var(--transition-base),
        box-shadow var(--transition-base),
        transform var(--transition-fast);
}

body {
    font-family: system-ui, -apple-system, sans-serif;
    background-color: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
    line-height: 1.6;
    overflow-x: hidden;
}

/* FULLSCREEN STYLES */
.fullscreen-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: var(--theme-bg-secondary);
    z-index: 9999;
    overflow: hidden;
    padding: 0;
    margin: 0;
    display: none;
}

.fullscreen-container.active {
    display: flex;
}

.fullscreen-header {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    z-index: 10000;
    border-bottom: 1px solid var(--theme-border-color);
}

.fullscreen-content {
    position: absolute;
    top: 60px;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    overflow: hidden;
}

.fullscreen-playground {
    flex: 1;
    padding: 20px;
    overflow: auto;
    background: var(--theme-bg-primary);
}

.fullscreen-controls {
    width: 400px;
    background: var(--theme-bg-secondary);
    border-left: 1px solid var(--theme-border-color);
    overflow-y: auto;
    padding: 20px;
}

.exit-fullscreen {
    background: #dc3545;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all var(--transition-base);
}

.exit-fullscreen:hover {
    background: #b02a37;
    transform: scale(1.05);
}

/* Enhanced hero section */
.hero-section {
    background: var(--primary-gradient);
    color: white;
    padding: 3rem 0;
    position: relative;
    overflow: hidden;
}

.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="bsgrain" patternUnits="userSpaceOnUse" width="100" height="100"><filter id="bsnoiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23bsnoiseFilter)" opacity="0.1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23bsgrain)"/></svg>') repeat;
    opacity: 0.1;
    pointer-events: none;
}

.hero-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1rem;
    margin-top: 2rem;
}

.hero-stat {
    text-align: center;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    backdrop-filter: blur(10px);
}

.hero-stat-number {
    font-size: 2rem;
    font-weight: 700;
    display: block;
}

.hero-stat-label {
    font-size: 0.9rem;
    opacity: 0.8;
}

/* Enhanced component cards */
.component-card {
    background-color: var(--theme-bg-primary);
    border-radius: 16px;
    box-shadow: var(--theme-shadow-md);
    overflow: hidden;
    margin-bottom: 2rem;
    transition: all var(--transition-base);
    border: 1px solid var(--theme-border-color);
    position: relative;
}

.component-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--primary-gradient);
    opacity: 0;
    transition: opacity var(--transition-base);
}

.component-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--theme-shadow-lg);
}

.component-card:hover::before {
    opacity: 1;
}

.component-header {
    background: var(--primary-gradient);
    color: white;
    padding: 1.5rem 2rem;
    border-bottom: none;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1rem;
}

.component-header.layout { background: var(--success-gradient); }
.component-header.forms { background: var(--info-gradient); }
.component-header.content { background: var(--warning-gradient); }
.component-header.utilities { background: var(--danger-gradient); }
.component-header.advanced { background: var(--secondary-gradient); }

.component-header h3 {
    margin: 0;
    flex: 1;
}

.component-header .live-indicator {
    background: rgba(255, 255, 255, 0.2);
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
}

.fullscreen-btn {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all var(--transition-base);
    font-size: 0.9rem;
    font-weight: 500;
}

.fullscreen-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}

.component-body {
    padding: 2rem;
    background-color: var(--theme-bg-primary);
    color: var(--theme-text-primary);
}

/* Enhanced demo container */
.demo-container {
    background-color: var(--theme-bg-tertiary);
    border: 3px dashed var(--theme-border-focus);
    border-radius: 16px;
    padding: 3rem;
    min-height: 500px;
    margin: 1.5rem 0;
    position: relative;
    overflow: auto;
    transition: all var(--transition-base);
}

.demo-container::before {
    content: 'Live Bootstrap Demo';
    position: absolute;
    top: -12px;
    left: 20px;
    background: var(--theme-border-focus);
    color: white;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 10;
    box-shadow: var(--theme-shadow-sm);
}

.demo-container.with-measurements {
    background-image: 
        linear-gradient(to right, rgba(13, 110, 253, 0.1) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(13, 110, 253, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
}

/* Enhanced code output */
.code-output {
    background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
    color: #e6e6e6;
    border-radius: 12px;
    padding: 1.5rem;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', monospace;
    font-size: 14px;
    line-height: 1.6;
    max-height: 400px;
    overflow-y: auto;
    position: relative;
    margin: 1.5rem 0;
    white-space: pre-wrap;
    border: 1px solid var(--theme-border-color);
    box-shadow: var(--theme-shadow-md);
}

.copy-btn {
    position: absolute;
    top: 12px;
    right: 12px;
    background: var(--bs-success-custom);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 0.8rem;
    cursor: pointer;
    opacity: 0.9;
    transition: all var(--transition-base);
    z-index: 10;
    font-weight: 500;
}

.copy-btn:hover {
    opacity: 1;
    transform: scale(1.05);
    box-shadow: var(--theme-shadow-sm);
}

.copy-btn.copied {
    background: var(--bs-info-custom);
    transform: scale(0.95);
}

/* Enhanced syntax highlighting */
.html-tag { color: #79b6f2; font-weight: 600; }
.html-attr { color: #90ee90; font-weight: 500; }
.html-value { color: #ffd700; }
.html-content { color: #e6e6e6; }
.html-comment { color: #9ca3af; font-style: italic; }
.bootstrap-class { color: #ff6b6b; font-weight: 600; }

/* Enhanced control groups */
.control-group {
    background-color: var(--theme-bg-primary);
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    border-left: 4px solid var(--theme-border-focus);
    box-shadow: var(--theme-shadow-sm);
    transition: all var(--transition-base);
    border: 1px solid var(--theme-border-color);
    position: relative;
}

.control-group:hover {
    transform: translateY(-2px);
    box-shadow: var(--theme-shadow-md);
}

.control-label {
    font-weight: 700;
    color: var(--theme-text-primary);
    margin-bottom: 0.75rem;
    display: block;
    font-size: 1rem;
}

.description-text {
    font-size: 0.85rem;
    color: var(--theme-text-secondary);
    margin-bottom: 0.75rem;
    line-height: 1.4;
}

.range-value {
    font-weight: 700;
    color: var(--theme-border-focus);
    min-width: 5rem;
    text-align: center;
    font-size: 1rem;
    display: inline-block;
    background: var(--theme-bg-tertiary);
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
}

/* Enhanced tabs system */
.component-tabs {
    display: flex;
    background-color: var(--theme-bg-tertiary);
    border-radius: 12px;
    padding: 0.5rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 0.5rem;
    border: 1px solid var(--theme-border-color);
    box-shadow: var(--theme-shadow-sm);
}

.tab-btn {
    flex: 1;
    min-width: 120px;
    padding: 1rem 1.5rem;
    border: none;
    background: transparent;
    border-radius: 8px;
    cursor: pointer;
    transition: all var(--transition-base);
    font-weight: 600;
    font-size: 0.9rem;
    margin: 0.25rem;
    color: var(--theme-text-secondary);
    position: relative;
    overflow: hidden;
}

.tab-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(13, 110, 253, 0.1), transparent);
    transition: left 0.6s ease;
}

.tab-btn:hover::before {
    left: 100%;
}

.tab-btn.active {
    background: var(--theme-bg-primary);
    box-shadow: var(--theme-shadow-md);
    color: var(--theme-border-focus);
    transform: translateY(-2px);
}

.tab-btn:hover:not(.active) {
    background-color: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
    transform: translateY(-1px);
}

/* Enhanced preset buttons */
.preset-btn {
    padding: 0.75rem 1.25rem;
    border: 2px solid var(--theme-border-focus);
    background: transparent;
    color: var(--theme-border-focus);
    border-radius: 25px;
    cursor: pointer;
    transition: all var(--transition-base);
    margin: 0.5rem 0.25rem;
    font-size: 0.9rem;
    font-weight: 600;
    position: relative;
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.preset-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: var(--theme-border-focus);
    transition: left 0.3s ease;
    z-index: -1;
}

.preset-btn:hover::before {
    left: 0;
}

.preset-btn:hover,
.preset-btn.active {
    color: white;
    transform: translateY(-2px);
    box-shadow: var(--theme-shadow-md);
}

/* Enhanced toolbar */
.visual-toolbar {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-backdrop);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 1rem;
    margin-bottom: 1.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    align-items: center;
}

.toolbar-btn {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border-color);
    color: var(--theme-text-primary);
    padding: 0.5rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all var(--transition-base);
    font-size: 0.9rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.toolbar-btn:hover {
    background: var(--theme-border-focus);
    color: white;
    transform: translateY(-1px);
}

.toolbar-btn.active {
    background: var(--theme-border-focus);
    color: white;
}

/* Advanced theme toggle styles for dark-mode.js integration */
.theme-toggle-wrapper {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1100;
    cursor: move;
    user-select: none;
}

.theme-toggle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 2px solid var(--theme-border-color);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-backdrop);
    color: var(--theme-text-primary);
    cursor: pointer;
    transition: all var(--transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    box-shadow: var(--theme-shadow-md);
    position: relative;
    overflow: hidden;
}

.theme-toggle::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.6s ease;
}

.theme-toggle:hover::before {
    left: 100%;
}

.theme-toggle:hover {
    transform: scale(1.1);
    border-color: var(--theme-border-focus);
    box-shadow: var(--theme-shadow-lg);
}

.theme-toggle:focus {
    outline: 2px solid var(--theme-border-focus);
    outline-offset: 2px;
}

.sun-icon, .moon-icon {
    transition: all var(--transition-base);
}

.moon-icon {
    color: #ffd700;
}

.sun-icon {
    color: #ff6b35;
}

/* Theme selector dropdown */
.theme-selector {
    position: absolute;
    top: 60px;
    right: 0;
    min-width: 200px;
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border-color);
    border-radius: 12px;
    box-shadow: var(--theme-shadow-lg);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all var(--transition-base);
    z-index: 1000;
    overflow: hidden;
}

.theme-selector.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.theme-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    cursor: pointer;
    transition: all var(--transition-base);
    border-bottom: 1px solid var(--theme-border-color);
    position: relative;
}

.theme-option:last-child {
    border-bottom: none;
}

.theme-option::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--theme-border-focus);
    transform: scaleY(0);
    transition: transform var(--transition-base);
}

.theme-option:hover::before,
.theme-option.active::before {
    transform: scaleY(1);
}

.theme-option:hover {
    background: var(--theme-bg-tertiary);
    transform: translateX(4px);
}

.theme-option.active {
    background: rgba(13, 110, 253, 0.1);
    color: var(--theme-border-focus);
    font-weight: 600;
}

.theme-option i {
    font-size: 1.1rem;
    width: 20px;
    text-align: center;
}

.theme-option div {
    flex: 1;
}

.theme-option small {
    display: block;
    margin-top: 2px;
    font-size: 0.75rem;
    opacity: 0.7;
}

/* Remove old theme toggle styles */
.theme-toggle-container {
    display: none;
}

/* Enhanced animations */
@keyframes componentFadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes componentSlideIn {
    from { transform: translateX(-100%); }
    to { transform: translateX(0); }
}

@keyframes componentBounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
}

/* Component animation classes */
.animate-fade-in { animation: componentFadeIn 0.5s ease-out; }
.animate-slide-in { animation: componentSlideIn 0.5s ease-out; }
.animate-bounce { animation: componentBounce 1s ease-out; }

/* Enhanced form elements theming */
.form-select,
.form-control,
.form-range {
    background-color: var(--theme-bg-primary);
    border-color: var(--theme-border-color);
    color: var(--theme-text-primary);
    border-radius: 8px;
    transition: all var(--transition-base);
}

.form-select:focus,
.form-control:focus {
    background-color: var(--theme-bg-primary);
    border-color: var(--theme-border-focus);
    color: var(--theme-text-primary);
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

/* Enhanced range inputs */
input[type="range"] {
    background: var(--theme-bg-tertiary);
    height: 8px;
    border-radius: 4px;
    outline: none;
    -webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    background: var(--theme-border-focus);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: var(--theme-shadow-sm);
    transition: all var(--transition-base);
}

input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.2);
    box-shadow: var(--theme-shadow-md);
}

/* Enhanced navigation */
.navbar {
    background-color: var(--theme-bg-primary) !important;
    border-bottom: 1px solid var(--theme-border-color);
    backdrop-filter: blur(20px);
    box-shadow: var(--theme-shadow-sm);
}

.navbar-dark {
    background-color: var(--theme-bg-tertiary) !important;
}

/* Enhanced toast notifications */
.toast-container {
    position: fixed;
    top: 80px;
    right: 20px;
    z-index: 1050;
    max-width: 400px;
}

.toast-custom {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-backdrop);
    color: var(--theme-text-primary);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    box-shadow: var(--theme-shadow-lg);
    padding: 1.25rem;
    margin-bottom: 0.75rem;
    display: none;
    min-width: 320px;
    position: relative;
    overflow: hidden;
}

.toast-custom::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: var(--bs-success-custom);
}

.toast-custom.warning::before { background: var(--bs-warning-custom); }
.toast-custom.error::before { background: var(--bs-danger-custom); }
.toast-custom.info::before { background: var(--bs-info-custom); }

.toast-custom.show {
    display: block;
    animation: slideInToast 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes slideInToast {
    from { 
        transform: translateX(100%) scale(0.8); 
        opacity: 0; 
    }
    to { 
        transform: translateX(0) scale(1); 
        opacity: 1; 
    }
}

/* Enhanced learning tips */
.learning-tip {
    background: linear-gradient(135deg, #e7f3ff, #cce7ff);
    border-left: 4px solid var(--bs-info-custom);
    padding: 1.25rem;
    margin: 1.5rem 0;
    border-radius: 0 8px 8px 0;
    font-size: 0.95rem;
    position: relative;
    box-shadow: var(--theme-shadow-sm);
}

body.dark-mode .learning-tip {
    background: linear-gradient(135deg, #2d4a66, #1e3a5f);
    border-left-color: #0dcaf0;
    color: var(--theme-text-primary);
}

.learning-tip::before {
    content: '🚀';
    position: absolute;
    left: -2px;
    top: -2px;
    font-size: 1.5rem;
    background: var(--theme-bg-primary);
    border-radius: 50%;
    padding: 0.25rem;
}

/* Tab content management */
.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: componentFadeIn 0.5s ease-out;
}

/* Enhanced challenge cards */
.challenge-card {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border-color);
    border-radius: 12px;
    transition: all var(--transition-base);
    box-shadow: var(--theme-shadow-sm);
}

.challenge-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--theme-shadow-md);
}

.challenge-icon {
    color: var(--theme-border-focus);
}

/* Pattern cards */
.pattern-card {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border-color);
    transition: all var(--transition-base);
}

.pattern-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--theme-shadow-sm);
}

.pattern-card pre {
    background: var(--theme-bg-tertiary);
    border-radius: 6px;
    padding: 0.75rem;
    margin: 0;
    font-size: 0.8rem;
}

/* Enhanced keyboard shortcuts display */
.keyboard-shortcuts {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-backdrop);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 1rem;
    color: var(--theme-text-primary);
    font-size: 0.85rem;
    opacity: 0;
    transform: translateY(20px);
    transition: all var(--transition-base);
    z-index: 1000;
    max-width: 250px;
}

.keyboard-shortcuts.show {
    opacity: 1;
    transform: translateY(0);
}

.shortcut-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.shortcut-key {
    background: var(--theme-bg-tertiary);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-family: monospace;
    font-size: 0.8rem;
}

/* Mobile responsive enhancements */
@media (max-width: 768px) {
    .component-tabs {
        flex-direction: column;
    }
    
    .tab-btn {
        flex: none;
        margin: 0.25rem 0;
        min-width: auto;
    }
    
    .demo-container {
        min-height: 300px;
        padding: 1.5rem;
    }
    
    .component-body {
        padding: 1.5rem;
    }
    
    .visual-toolbar {
        justify-content: center;
    }
    
    .fullscreen-controls {
        width: 320px;
    }

    .fullscreen-header {
        height: 50px;
        padding: 0 15px;
    }

    .fullscreen-content {
        top: 50px;
    }
    
    .keyboard-shortcuts {
        display: none;
    }
    
    .theme-toggle-container {
        margin: 1rem 0;
    }

    .hero-stats {
        grid-template-columns: repeat(2, 1fr);
    }

    .component-header {
        padding: 1rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }

    .component-header h3 {
        font-size: 1.25rem;
    }
}

/* Enhanced scrollbars */
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    background: var(--theme-bg-tertiary);
    border-radius: 6px;
}

::-webkit-scrollbar-thumb {
    background: var(--theme-border-color);
    border-radius: 6px;
    border: 2px solid var(--theme-bg-tertiary);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--theme-text-secondary);
}

/* Focus styles */
:focus-visible {
    outline: 2px solid var(--theme-border-focus);
    outline-offset: 2px;
    border-radius: 4px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --theme-border-color: #000000;
        --theme-text-primary: #000000;
        --theme-text-secondary: #333333;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    html {
        scroll-behavior: auto;
    }
}

/* Smooth scroll behavior */
html {
    scroll-behavior: smooth;
}

/* Enhanced selection styling */
::selection {
    background: rgba(13, 110, 253, 0.3);
    color: var(--theme-text-primary);
}

::-moz-selection {
    background: rgba(13, 110, 253, 0.3);
    color: var(--theme-text-primary);
}

/* Bootstrap component live previews styling */
.component-preview {
    background: var(--theme-bg-primary);
    padding: 2rem;
    border-radius: 8px;
    border: 1px solid var(--theme-border-color);
    margin: 1rem 0;
    position: relative;
    overflow: visible;
}

.component-preview::before {
    content: 'Live Preview';
    position: absolute;
    top: -10px;
    left: 15px;
    background: var(--bs-primary-custom);
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
}

/* Enhanced Bootstrap component interactions */
.bs-component {
    transition: all var(--transition-base);
    cursor: pointer;
    position: relative;
}

.bs-component.selected {
    outline: 3px solid var(--bs-warning-custom);
    outline-offset: 2px;
    border-radius: 4px;
}

.bs-component:hover {
    transform: translateY(-1px);
    box-shadow: var(--theme-shadow-sm);
}

/* Learning progress bar */
.learning-progress {
    height: 8px;
    background: var(--theme-bg-tertiary);
    border-radius: 4px;
    overflow: hidden;
    margin: 1rem 0;
}

.learning-progress-bar {
    height: 100%;
    background: var(--success-gradient);
    border-radius: 4px;
    transition: width 0.6s ease;
}

/* Component controls visibility */
.component-controls {
    display: none;
}

.component-controls.active {
    display: block;
}

/* Template cards */
.template-card {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border-color);
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    transition: all var(--transition-base);
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.template-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(13, 110, 253, 0.1), transparent);
    transition: left 0.6s ease;
}

.template-card:hover::before {
    left: 100%;
}

.template-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--theme-shadow-lg);
    border-color: var(--theme-border-focus);
}

.template-preview {
    width: 100%;
    height: 120px;
    background: var(--theme-bg-tertiary);
    border-radius: 8px;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: var(--theme-text-secondary);
}

/* Progress tracking */
.progress-ring {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: conic-gradient(
        var(--bs-success-custom) 0deg,
        var(--bs-success-custom) calc(var(--progress, 0) * 3.6deg),
        var(--theme-bg-tertiary) calc(var(--progress, 0) * 3.6deg),
        var(--theme-bg-tertiary) 360deg
    );
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.progress-ring::before {
    content: '';
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: var(--theme-bg-primary);
    position: absolute;
}

.progress-text {
    position: relative;
    z-index: 1;
    font-weight: 700;
    font-size: 0.8rem;
    color: var(--theme-text-primary);
}

/* Enhanced utility classes for better spacing */
.mb-6 { margin-bottom: 4rem !important; }
.mt-6 { margin-top: 4rem !important; }
.py-6 { padding-top: 4rem !important; padding-bottom: 4rem !important; }

/* Special gradient text effect */
.gradient-text {
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 700;
}

/* Pulse animation for live indicators */
@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

.pulse {
    animation: pulse 2s infinite;
}
    </style>
</head>

<body>
    <!-- FULLSCREEN CONTAINER -->
    <div class="fullscreen-container" id="fullscreenContainer">
        <div class="fullscreen-header">
            <div class="d-flex align-items-center">
                <i class="bi bi-arrows-fullscreen me-2"></i>
                <h5 class="mb-0">Bootstrap Master Playground - Fullscreen Mode</h5>
            </div>
            <div class="d-flex align-items-center gap-3">
                <div class="d-flex gap-2">
                    <button class="toolbar-btn" id="fullscreen-guide-toggle" onclick="toggleComponentGuides()">
                        <i class="bi bi-grid-3x3"></i>
                        Component Guides
                    </button>
                    <button class="toolbar-btn" id="fullscreen-measure-toggle" onclick="toggleMeasurements()">
                        <i class="bi bi-rulers"></i>
                        Measurements
                    </button>
                    <button class="toolbar-btn" id="fullscreen-tips-toggle" onclick="toggleLearningTips()">
                        <i class="bi bi-lightbulb"></i>
                        Bootstrap Tips
                    </button>
                </div>
                <button class="exit-fullscreen" onclick="exitFullscreen()">
                    <i class="bi bi-x-lg"></i>
                    Exit Fullscreen
                </button>
            </div>
        </div>
        <div class="fullscreen-content">
            <div class="fullscreen-playground">
                <div id="fullscreen-playground-content"></div>
            </div>
            <div class="fullscreen-controls">
                <div id="fullscreen-controls-content"></div>
            </div>
        </div>
    </div>

    <!-- Advanced Theme Toggle (will be created by dark-mode.js) -->

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Keyboard shortcuts overlay -->
    <div class="keyboard-shortcuts" id="keyboard-shortcuts">
        <h6><i class="bi bi-keyboard me-2"></i>Shortcuts</h6>
        <div class="shortcut-item">
            <span>Switch components</span>
            <span class="shortcut-key">1-9</span>
        </div>
        <div class="shortcut-item">
            <span>Add component</span>
            <span class="shortcut-key">A</span>
        </div>
        <div class="shortcut-item">
            <span>Clear components</span>
            <span class="shortcut-key">Del</span>
        </div>
        <div class="shortcut-item">
            <span>Toggle theme</span>
            <span class="shortcut-key">Ctrl+D</span>
        </div>
        <div class="shortcut-item">
            <span>Fullscreen</span>
            <span class="shortcut-key">F11</span>
        </div>
        <div class="shortcut-item">
            <span>Copy HTML</span>
            <span class="shortcut-key">Ctrl+Enter</span>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#" onclick="showToast('Welcome to Bootstrap Master Playground!', 'info')">
                <i class="bi bi-bootstrap me-2"></i>Bootstrap Master Playground
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link" href="#" onclick="switchComponentTab('components')">
                        <i class="bi bi-puzzle me-1"></i>Components
                    </a>
                    <a class="nav-link" href="#" onclick="switchComponentTab('layout')">
                        <i class="bi bi-grid-3x3 me-1"></i>Layout
                    </a>
                    <a class="nav-link" href="#" onclick="switchComponentTab('forms')">
                        <i class="bi bi-ui-checks me-1"></i>Forms
                    </a>
                    <a class="nav-link" href="#" onclick="switchComponentTab('utilities')">
                        <i class="bi bi-tools me-1"></i>Utilities
                    </a>
                    <a class="nav-link" href="#" onclick="switchComponentTab('learning')">
                        <i class="bi bi-mortarboard me-1"></i>Learning Lab
                    </a>
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-collection me-1"></i>Templates
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="loadBootstrapTemplate('dashboard')">
                                <i class="bi bi-speedometer2 me-2"></i>Dashboard
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadBootstrapTemplate('landing')">
                                <i class="bi bi-layout-text-window me-2"></i>Landing Page
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadBootstrapTemplate('blog')">
                                <i class="bi bi-journal-text me-2"></i>Blog Layout
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadBootstrapTemplate('portfolio')">
                                <i class="bi bi-person-workspace me-2"></i>Portfolio
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="loadBootstrapTemplate('ecommerce')">
                                <i class="bi bi-shop me-2"></i>E-commerce
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadBootstrapTemplate('admin')">
                                <i class="bi bi-gear me-2"></i>Admin Panel
                            </a></li>
                        </ul>
                    </div>
                    <li class="nav-item ms-2">
                        <button class="toolbar-btn" onclick="toggleFullscreen()" title="Toggle Fullscreen (F11)">
                            <i class="bi bi-fullscreen" id="fullscreen-icon"></i>
                        </button>
                    </li>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-5 fw-bold mb-3">
                        <i class="bi bi-bootstrap me-3"></i>Bootstrap Master Playground
                        <span class="badge bg-light text-dark ms-2">Pro</span>
                    </h1>
                    <p class="lead mb-4">Master ALL Bootstrap components with advanced interactive tools, visual learning aids, and comprehensive challenges. From basic components to complex layouts - explore the complete power of Bootstrap 5.</p>
                    
                    <!-- Hero stats -->
                    <div class="hero-stats">
                        <div class="hero-stat">
                            <span class="hero-stat-number">150+</span>
                            <span class="hero-stat-label">Components</span>
                        </div>
                        <div class="hero-stat">
                            <span class="hero-stat-number">50+</span>
                            <span class="hero-stat-label">Interactive Demos</span>
                        </div>
                        <div class="hero-stat">
                            <span class="hero-stat-number">25+</span>
                            <span class="hero-stat-label">Templates</span>
                        </div>
                        <div class="hero-stat">
                            <span class="hero-stat-number">100%</span>
                            <span class="hero-stat-label">Bootstrap 5</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <div class="d-flex justify-content-center align-items-center" style="height: 200px;">
                        <div class="d-flex flex-column align-items-center">
                            <i class="bi bi-bootstrap display-1 opacity-75 mb-3"></i>
                            <small class="opacity-75">Interactive Bootstrap Learning</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="container mt-4">
        <!-- Visual Toolbar -->
        <div class="visual-toolbar">
            <div class="d-flex align-items-center flex-wrap gap-2">
                <span class="fw-bold me-3">Bootstrap Tools:</span>
                <button class="toolbar-btn" onclick="toggleMeasurements()" id="measurements-btn">
                    <i class="bi bi-rulers"></i>Measurements
                </button>
                <button class="toolbar-btn" onclick="toggleComponentGuides()" id="guide-btn">
                    <i class="bi bi-diagram-3"></i>Component Guides
                </button>
                <button class="toolbar-btn" onclick="exportBootstrapHTML()" title="Export all HTML">
                    <i class="bi bi-download"></i>Export HTML
                </button>
                <button class="toolbar-btn" onclick="resetAllComponents()" title="Reset all components">
                    <i class="bi bi-arrow-clockwise"></i>Reset All
                </button>
                <button class="toolbar-btn" onclick="toggleKeyboardShortcuts()" title="Show keyboard shortcuts">
                    <i class="bi bi-keyboard"></i>Shortcuts
                </button>
                <button class="toolbar-btn" onclick="validateBootstrapHTML()" title="Validate HTML">
                    <i class="bi bi-check-square"></i>Validate
                </button>
            </div>
        </div>

        <!-- Component Categories -->
        <div class="component-tabs">
            <button class="tab-btn active" onclick="switchComponentTab('components')">
                <i class="bi bi-puzzle me-1"></i>Basic Components
            </button>
            <button class="tab-btn" onclick="switchComponentTab('layout')">
                <i class="bi bi-grid-3x3 me-1"></i>Layout System
            </button>
            <button class="tab-btn" onclick="switchComponentTab('forms')">
                <i class="bi bi-ui-checks me-1"></i>Forms & Inputs
            </button>
            <button class="tab-btn" onclick="switchComponentTab('content')">
                <i class="bi bi-card-text me-1"></i>Content & Typography
            </button>
            <button class="tab-btn" onclick="switchComponentTab('navigation')">
                <i class="bi bi-menu-button-wide me-1"></i>Navigation
            </button>
            <button class="tab-btn" onclick="switchComponentTab('utilities')">
                <i class="bi bi-tools me-1"></i>Utilities
            </button>
            <button class="tab-btn" onclick="switchComponentTab('advanced')">
                <i class="bi bi-gear me-1"></i>Advanced
            </button>
            <button class="tab-btn" onclick="switchComponentTab('learning')">
                <i class="bi bi-mortarboard me-1"></i>Learning Lab
            </button>
        </div>

        <!-- Basic Components Tab -->
        <div id="components-tab" class="tab-content active">
            <div class="component-card">
                <div class="component-header">
                    <div>
                        <h3 class="mb-0"><i class="bi bi-puzzle me-2"></i>Basic Bootstrap Components</h3>
                        <p class="mb-0 opacity-75">Explore alerts, badges, buttons, cards, and other essential Bootstrap components</p>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <div class="live-indicator pulse">LIVE</div>
                        <button class="fullscreen-btn" onclick="enterFullscreen('components')" title="Enter Fullscreen Mode">
                            <i class="bi bi-arrows-fullscreen"></i>
                            Fullscreen
                        </button>
                    </div>
                </div>
                <div class="component-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <!-- Component Selection -->
                            <div class="control-group">
                                <label class="control-label">Component Type</label>
                                <div class="description-text">Choose which Bootstrap component to customize</div>
                                <select class="form-select" id="component-type" onchange="updateComponentDemo()">
                                    <option value="button" selected>Button</option>
                                    <option value="alert">Alert</option>
                                    <option value="badge">Badge</option>
                                    <option value="card">Card</option>
                                    <option value="progress">Progress Bar</option>
                                    <option value="spinner">Spinner</option>
                                    <option value="tooltip">Tooltip</option>
                                    <option value="modal">Modal</option>
                                </select>
                            </div>

                            <!-- Button Controls -->
                            <div id="button-controls" class="component-controls active">
                                <div class="control-group">
                                    <label class="control-label">Button Style</label>
                                    <div class="description-text">Choose the visual style of the button</div>
                                    <select class="form-select" id="button-style" onchange="updateComponentDemo()">
                                        <option value="btn-primary" selected>Primary</option>
                                        <option value="btn-secondary">Secondary</option>
                                        <option value="btn-success">Success</option>
                                        <option value="btn-danger">Danger</option>
                                        <option value="btn-warning">Warning</option>
                                        <option value="btn-info">Info</option>
                                        <option value="btn-light">Light</option>
                                        <option value="btn-dark">Dark</option>
                                        <option value="btn-outline-primary">Outline Primary</option>
                                        <option value="btn-outline-secondary">Outline Secondary</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Button Size</label>
                                    <div class="description-text">Control the size of the button</div>
                                    <select class="form-select" id="button-size" onchange="updateComponentDemo()">
                                        <option value="btn-sm">Small</option>
                                        <option value="" selected>Default</option>
                                        <option value="btn-lg">Large</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Button Text</label>
                                    <div class="description-text">Customize the button text content</div>
                                    <input type="text" class="form-control" id="button-text" value="Click me!" onchange="updateComponentDemo()">
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Button Icon</label>
                                    <div class="description-text">Add a Bootstrap icon to the button</div>
                                    <select class="form-select" id="button-icon" onchange="updateComponentDemo()">
                                        <option value="">No Icon</option>
                                        <option value="bi-check">Check</option>
                                        <option value="bi-download">Download</option>
                                        <option value="bi-heart">Heart</option>
                                        <option value="bi-star">Star</option>
                                        <option value="bi-plus">Plus</option>
                                        <option value="bi-arrow-right">Arrow Right</option>
                                        <option value="bi-gear">Gear</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Additional Classes</label>
                                    <div class="description-text">Add custom Bootstrap utility classes</div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="button-disabled" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="button-disabled">Disabled</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="button-block" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="button-block">Block (Full Width)</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="button-rounded" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="button-rounded">Rounded Pills</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Alert Controls -->
                            <div id="alert-controls" class="component-controls">
                                <div class="control-group">
                                    <label class="control-label">Alert Type</label>
                                    <div class="description-text">Choose the contextual style of the alert</div>
                                    <select class="form-select" id="alert-type" onchange="updateComponentDemo()">
                                        <option value="alert-primary" selected>Primary</option>
                                        <option value="alert-secondary">Secondary</option>
                                        <option value="alert-success">Success</option>
                                        <option value="alert-danger">Danger</option>
                                        <option value="alert-warning">Warning</option>
                                        <option value="alert-info">Info</option>
                                        <option value="alert-light">Light</option>
                                        <option value="alert-dark">Dark</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Alert Content</label>
                                    <div class="description-text">Customize the alert message</div>
                                    <textarea class="form-control" id="alert-content" rows="3" onchange="updateComponentDemo()">This is an important alert message!</textarea>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Alert Features</label>
                                    <div class="description-text">Add interactive features to the alert</div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="alert-dismissible" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="alert-dismissible">Dismissible</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="alert-icon" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="alert-icon">Include Icon</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Badge Controls -->
                            <div id="badge-controls" class="component-controls">
                                <div class="control-group">
                                    <label class="control-label">Badge Style</label>
                                    <div class="description-text">Choose the badge color and style</div>
                                    <select class="form-select" id="badge-style" onchange="updateComponentDemo()">
                                        <option value="badge bg-primary" selected>Primary</option>
                                        <option value="badge bg-secondary">Secondary</option>
                                        <option value="badge bg-success">Success</option>
                                        <option value="badge bg-danger">Danger</option>
                                        <option value="badge bg-warning text-dark">Warning</option>
                                        <option value="badge bg-info">Info</option>
                                        <option value="badge bg-light text-dark">Light</option>
                                        <option value="badge bg-dark">Dark</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Badge Shape</label>
                                    <div class="description-text">Choose between regular or pill-shaped badges</div>
                                    <select class="form-select" id="badge-shape" onchange="updateComponentDemo()">
                                        <option value="">Regular</option>
                                        <option value="rounded-pill">Pill</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Badge Text</label>
                                    <div class="description-text">Customize the badge text content</div>
                                    <input type="text" class="form-control" id="badge-text" value="New" onchange="updateComponentDemo()">
                                </div>
                            </div>

                            <!-- Card Controls -->
                            <div id="card-controls" class="component-controls">
                                <div class="control-group">
                                    <label class="control-label">Card Features</label>
                                    <div class="description-text">Choose which card components to include</div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="card-header" checked onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="card-header">Header</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="card-image" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="card-image">Image</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="card-footer" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="card-footer">Footer</label>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Card Title</label>
                                    <div class="description-text">Set the card title text</div>
                                    <input type="text" class="form-control" id="card-title" value="Card Title" onchange="updateComponentDemo()">
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Card Text</label>
                                    <div class="description-text">Set the card body text content</div>
                                    <textarea class="form-control" id="card-text" rows="3" onchange="updateComponentDemo()">This is a sample card with some text content.</textarea>
                                </div>
                            </div>

                            <!-- Progress Controls -->
                            <div id="progress-controls" class="component-controls">
                                <div class="control-group">
                                    <label class="control-label">Progress Value</label>
                                    <div class="description-text">Set the progress bar completion percentage</div>
                                    <input type="range" class="form-range" id="progress-value" min="0" max="100" value="50" oninput="updateRangeValue('progress-value')" onchange="updateComponentDemo()">
                                    <div class="d-flex justify-content-between small text-muted">
                                        <span>0%</span>
                                        <span class="range-value" id="progress-value-value">50</span>
                                        <span>100%</span>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Progress Style</label>
                                    <div class="description-text">Choose the progress bar color</div>
                                    <select class="form-select" id="progress-style" onchange="updateComponentDemo()">
                                        <option value="bg-primary" selected>Primary</option>
                                        <option value="bg-secondary">Secondary</option>
                                        <option value="bg-success">Success</option>
                                        <option value="bg-danger">Danger</option>
                                        <option value="bg-warning">Warning</option>
                                        <option value="bg-info">Info</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Progress Features</label>
                                    <div class="description-text">Add additional progress bar features</div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="progress-striped" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="progress-striped">Striped</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="progress-animated" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="progress-animated">Animated</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="progress-label" onchange="updateComponentDemo()">
                                        <label class="form-check-label" for="progress-label">Show Label</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Spinner Controls -->
                            <div id="spinner-controls" class="component-controls">
                                <div class="control-group">
                                    <label class="control-label">Spinner Type</label>
                                    <div class="description-text">Choose the spinner animation style</div>
                                    <select class="form-select" id="spinner-type" onchange="updateComponentDemo()">
                                        <option value="spinner-border" selected>Border</option>
                                        <option value="spinner-grow">Grow</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Spinner Color</label>
                                    <div class="description-text">Set the spinner color</div>
                                    <select class="form-select" id="spinner-color" onchange="updateComponentDemo()">
                                        <option value="text-primary" selected>Primary</option>
                                        <option value="text-secondary">Secondary</option>
                                        <option value="text-success">Success</option>
                                        <option value="text-danger">Danger</option>
                                        <option value="text-warning">Warning</option>
                                        <option value="text-info">Info</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">Spinner Size</label>
                                    <div class="description-text">Control the spinner size</div>
                                    <select class="form-select" id="spinner-size" onchange="updateComponentDemo()">
                                        <option value="spinner-border-sm">Small</option>
                                        <option value="" selected>Default</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <h5><i class="bi bi-eye me-2"></i>Live Preview</h5>
                            <div class="demo-container" id="components-demo-container">
                                <button type="button" class="btn btn-primary bs-component selected" id="demo-component">Click me!</button>
                            </div>
                            
                            <!-- Quick Presets -->
                            <div class="mb-3">
                                <label class="form-label fw-bold">Component Presets:</label>
                                <div>
                                    <button class="preset-btn" onclick="applyComponentPreset('cta-button')">
                                        <i class="bi bi-cursor me-1"></i>CTA Button
                                    </button>
                                    <button class="preset-btn" onclick="applyComponentPreset('success-alert')">
                                        <i class="bi bi-check-circle me-1"></i>Success Alert
                                    </button>
                                    <button class="preset-btn" onclick="applyComponentPreset('info-card')">
                                        <i class="bi bi-card-text me-1"></i>Info Card
                                    </button>
                                    <button class="preset-btn" onclick="applyComponentPreset('notification-badge')">
                                        <i class="bi bi-bell me-1"></i>Notification
                                    </button>
                                </div>
                            </div>

                            <!-- Bootstrap Tips -->
                            <div class="alert alert-info">
                                <h6><i class="bi bi-lightbulb me-2"></i>Bootstrap Component Tips</h6>
                                <ul class="mb-0 small">
                                    <li>Use contextual classes (primary, success, danger) for semantic meaning</li>
                                    <li>Combine utility classes for custom spacing and positioning</li>
                                    <li>Bootstrap components are mobile-first and responsive by default</li>
                                    <li>Use <code>data-bs-*</code> attributes for JavaScript interactions</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Generated HTML -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <h5><i class="bi bi-code-square me-2"></i>Generated HTML</h5>
                            <div class="position-relative">
                                <button class="copy-btn" onclick="copyCode('components-html-output')">
                                    <i class="bi bi-clipboard me-1"></i>Copy
                                </button>
                                <div class="code-output" id="components-html-output"><!-- HTML will be generated here --></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Layout System Tab -->
        <div id="layout-tab" class="tab-content">
            <div class="component-card">
                <div class="component-header layout">
                    <div>
                        <h3 class="mb-0"><i class="bi bi-grid-3x3 me-2"></i>Bootstrap Layout System</h3>
                        <p class="mb-0 opacity-75">Master the Bootstrap grid system, containers, and responsive layouts</p>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <div class="live-indicator pulse">LIVE</div>
                        <button class="fullscreen-btn" onclick="enterFullscreen('layout')" title="Enter Fullscreen Mode">
                            <i class="bi bi-arrows-fullscreen"></i>
                            Fullscreen
                        </button>
                    </div>
                </div>
                <div class="component-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <!-- Grid Controls -->
                            <div class="control-group">
                                <label class="control-label">Container Type</label>
                                <div class="description-text">Choose the container type for your layout</div>
                                <select class="form-select" id="layout-container" onchange="updateLayoutDemo()">
                                    <option value="container" selected>Container (Fixed-width)</option>
                                    <option value="container-fluid">Container Fluid (Full-width)</option>
                                    <option value="container-sm">Container SM (≥576px)</option>
                                    <option value="container-md">Container MD (≥768px)</option>
                                    <option value="container-lg">Container LG (≥992px)</option>
                                    <option value="container-xl">Container XL (≥1200px)</option>
                                    <option value="container-xxl">Container XXL (≥1400px)</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label class="control-label">Number of Columns</label>
                                <div class="description-text">Set how many columns to display in the grid</div>
                                <input type="range" class="form-range" id="layout-columns" min="1" max="6" value="3" oninput="updateRangeValue('layout-columns')" onchange="updateLayoutDemo()">
                                <div class="d-flex justify-content-between small text-muted">
                                    <span>1</span>
                                    <span class="range-value" id="layout-columns-value">3</span>
                                    <span>6</span>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">Column Breakpoint</label>
                                <div class="description-text">Set when columns should stack on smaller screens</div>
                                <select class="form-select" id="layout-breakpoint" onchange="updateLayoutDemo()">
                                    <option value="col">Always horizontal</option>
                                    <option value="col-sm">Stack below 576px</option>
                                    <option value="col-md" selected>Stack below 768px</option>
                                    <option value="col-lg">Stack below 992px</option>
                                    <option value="col-xl">Stack below 1200px</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label class="control-label">Gutter Size</label>
                                <div class="description-text">Control spacing between columns</div>
                                <select class="form-select" id="layout-gutter" onchange="updateLayoutDemo()">
                                    <option value="">Default Gutters</option>
                                    <option value="g-0">No Gutters</option>
                                    <option value="g-1">Small Gutters</option>
                                    <option value="g-2">Medium Gutters</option>
                                    <option value="g-3" selected>Large Gutters</option>
                                    <option value="g-4">Extra Large Gutters</option>
                                    <option value="g-5">Maximum Gutters</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label class="control-label">Column Alignment</label>
                                <div class="description-text">Align columns vertically and horizontally</div>
                                <div class="row g-2">
                                    <div class="col-6">
                                        <label class="form-label small">Vertical</label>
                                        <select class="form-select" id="layout-align-v" onchange="updateLayoutDemo()">
                                            <option value="">Default</option>
                                            <option value="align-items-start">Top</option>
                                            <option value="align-items-center" selected>Center</option>
                                            <option value="align-items-end">Bottom</option>
                                        </select>
                                    </div>
                                    <div class="col-6">
                                        <label class="form-label small">Horizontal</label>
                                        <select class="form-select" id="layout-align-h" onchange="updateLayoutDemo()">
                                            <option value="">Default</option>
                                            <option value="justify-content-start">Left</option>
                                            <option value="justify-content-center">Center</option>
                                            <option value="justify-content-end">Right</option>
                                            <option value="justify-content-between">Space Between</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <h5><i class="bi bi-eye me-2"></i>Live Preview</h5>
                            <div class="demo-container" id="layout-demo-container">
                                <div class="container">
                                    <div class="row g-3 align-items-center">
                                        <div class="col-md">
                                            <div class="p-3 bg-primary text-white text-center rounded">Column 1</div>
                                        </div>
                                        <div class="col-md">
                                            <div class="p-3 bg-success text-white text-center rounded">Column 2</div>
                                        </div>
                                        <div class="col-md">
                                            <div class="p-3 bg-info text-white text-center rounded">Column 3</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Layout Presets -->
                            <div class="mb-3">
                                <label class="form-label fw-bold">Layout Presets:</label>
                                <div>
                                    <button class="preset-btn" onclick="applyLayoutPreset('three-column')">
                                        <i class="bi bi-columns me-1"></i>Three Column
                                    </button>
                                    <button class="preset-btn" onclick="applyLayoutPreset('sidebar')">
                                        <i class="bi bi-layout-sidebar me-1"></i>Sidebar Layout
                                    </button>
                                    <button class="preset-btn" onclick="applyLayoutPreset('hero-section')">
                                        <i class="bi bi-layout-text-window me-1"></i>Hero Section
                                    </button>
                                    <button class="preset-btn" onclick="applyLayoutPreset('card-grid')">
                                        <i class="bi bi-grid-3x3 me-1"></i>Card Grid
                                    </button>
                                </div>
                            </div>

                            <!-- Bootstrap Tips -->
                            <div class="alert alert-info">
                                <h6><i class="bi bi-lightbulb me-2"></i>Bootstrap Grid Tips</h6>
                                <ul class="mb-0 small">
                                    <li>Bootstrap uses a 12-column grid system</li>
                                    <li>Columns automatically wrap when they exceed 12 units</li>
                                    <li>Use <code>.col-auto</code> for content-sized columns</li>
                                    <li>Breakpoints: xs(&lt;576px), sm(≥576px), md(≥768px), lg(≥992px), xl(≥1200px), xxl(≥1400px)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Generated HTML -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <h5><i class="bi bi-code-square me-2"></i>Generated HTML</h5>
                            <div class="position-relative">
                                <button class="copy-btn" onclick="copyCode('layout-html-output')">
                                    <i class="bi bi-clipboard me-1"></i>Copy
                                </button>
                                <div class="code-output" id="layout-html-output"><!-- HTML will be generated here --></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Learning Lab Tab -->
        <div id="learning-tab" class="tab-content">
            <div class="component-card">
                <div class="component-header" style="background: var(--info-gradient);">
                    <div>
                        <h3 class="mb-0"><i class="bi bi-mortarboard me-2"></i>Bootstrap Learning Lab</h3>
                        <p class="mb-0 opacity-75">Master Bootstrap with interactive challenges, tutorials, and comprehensive guides</p>
                    </div>
                    <div class="live-indicator pulse">LEARN</div>
                </div>
                <div class="component-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="alert alert-success">
                                <i class="bi bi-bootstrap me-2"></i>
                                <strong>Interactive Bootstrap Learning:</strong> Complete challenges, explore patterns, and master Bootstrap 5!
                            </div>

                            <!-- Learning Progress -->
                            <div class="learning-tools mb-4">
                                <h5><i class="bi bi-graph-up me-2"></i>Learning Progress</h5>
                                <div class="d-flex align-items-center gap-3">
                                    <div class="flex-grow-1">
                                        <div class="progress" style="height: 12px;">
                                            <div class="progress-bar learning-progress-bar bg-success" role="progressbar" style="width: 25%" id="learning-progress"></div>
                                        </div>
                                    </div>
                                    <div class="progress-ring" style="--progress: 25;">
                                        <div class="progress-text">25%</div>
                                    </div>
                                </div>
                                <small class="text-muted">Complete challenges to increase your Bootstrap mastery!</small>
                            </div>

                            <!-- Interactive Challenges -->
                            <div class="learning-tools mb-4">
                                <h5><i class="bi bi-trophy me-2"></i>Bootstrap Challenges</h5>
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="challenge-card p-3 mb-3 border rounded text-center h-100 d-flex flex-column">
                                            <div class="challenge-icon mb-2">
                                                <i class="bi bi-grid-3x3 display-4 text-primary"></i>
                                            </div>
                                            <h6 class="fw-bold">Grid Master</h6>
                                            <p class="small flex-grow-1">Create a responsive 3-column layout that stacks on mobile</p>
                                            <button class="btn btn-outline-primary btn-sm" onclick="startBootstrapChallenge('grid-master')">Start Challenge</button>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="challenge-card p-3 mb-3 border rounded text-center h-100 d-flex flex-column">
                                            <div class="challenge-icon mb-2">
                                                <i class="bi bi-ui-checks display-4 text-success"></i>
                                            </div>
                                            <h6 class="fw-bold">Form Builder</h6>
                                            <p class="small flex-grow-1">Build a complete contact form with validation</p>
                                            <button class="btn btn-outline-success btn-sm" onclick="startBootstrapChallenge('form-builder')">Start Challenge</button>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="challenge-card p-3 mb-3 border rounded text-center h-100 d-flex flex-column">
                                            <div class="challenge-icon mb-2">
                                                <i class="bi bi-menu-button-wide display-4 text-info"></i>
                                            </div>
                                            <h6 class="fw-bold">Navigation Pro</h6>
                                            <p class="small flex-grow-1">Create a responsive navbar with dropdowns</p>
                                            <button class="btn btn-outline-info btn-sm" onclick="startBootstrapChallenge('navigation-pro')">Start Challenge</button>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="challenge-card p-3 mb-3 border rounded text-center h-100 d-flex flex-column">
                                            <div class="challenge-icon mb-2">
                                                <i class="bi bi-card-list display-4 text-warning"></i>
                                            </div>
                                            <h6 class="fw-bold">Component Wizard</h6>
                                            <p class="small flex-grow-1">Combine multiple Bootstrap components</p>
                                            <button class="btn btn-outline-warning btn-sm" onclick="startBootstrapChallenge('component-wizard')">Start Challenge</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Bootstrap Patterns Guide -->
                            <div class="learning-tools mb-4">
                                <h5><i class="bi bi-book me-2"></i>Common Bootstrap Patterns</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="pattern-card p-3 mb-3 border rounded">
                                            <h6><i class="bi bi-layout-text-window me-2"></i>Hero Section</h6>
                                            <pre class="small mb-2"><code>&lt;div class="bg-primary text-white text-center py-5"&gt;
  &lt;div class="container"&gt;
    &lt;h1 class="display-4"&gt;Welcome&lt;/h1&gt;
    &lt;p class="lead"&gt;Bootstrap hero section&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
                                            <button class="btn btn-sm btn-outline-primary" onclick="loadPattern('hero-section')">Try Pattern</button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="pattern-card p-3 mb-3 border rounded">
                                            <h6><i class="bi bi-card-text me-2"></i>Card Grid</h6>
                                            <pre class="small mb-2"><code>&lt;div class="row g-4"&gt;
  &lt;div class="col-md-4"&gt;
    &lt;div class="card"&gt;
      &lt;div class="card-body"&gt;
        &lt;h5 class="card-title"&gt;Card&lt;/h5&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
                                            <button class="btn btn-sm btn-outline-primary" onclick="loadPattern('card-grid')">Try Pattern</button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="pattern-card p-3 mb-3 border rounded">
                                            <h6><i class="bi bi-distribute-horizontal me-2"></i>Flexbox Utilities</h6>
                                            <pre class="small mb-2"><code>&lt;div class="d-flex justify-content-between align-items-center"&gt;
  &lt;div&gt;Left content&lt;/div&gt;
  &lt;div&gt;Right content&lt;/div&gt;
&lt;/div&gt;</code></pre>
                                            <button class="btn btn-sm btn-outline-primary" onclick="loadPattern('flexbox-utils')">Try Pattern</button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="pattern-card p-3 mb-3 border rounded">
                                            <h6><i class="bi bi-table me-2"></i>Responsive Table</h6>
                                            <pre class="small mb-2"><code>&lt;div class="table-responsive"&gt;
  &lt;table class="table table-striped table-hover"&gt;
    &lt;thead class="table-dark"&gt;
      &lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;/tr&gt;
    &lt;/thead&gt;
  &lt;/table&gt;
&lt;/div&gt;</code></pre>
                                            <button class="btn btn-sm btn-outline-primary" onclick="loadPattern('responsive-table')">Try Pattern</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Bootstrap Best Practices -->
                            <div class="learning-tools">
                                <h5><i class="bi bi-star me-2"></i>Bootstrap Best Practices</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card border-success">
                                            <div class="card-header bg-success text-white">
                                                <i class="bi bi-check-circle me-2"></i>Do This
                                            </div>
                                            <div class="card-body">
                                                <ul class="small mb-0">
                                                    <li>Use semantic HTML elements</li>
                                                    <li>Combine utility classes for quick styling</li>
                                                    <li>Use responsive breakpoint classes</li>
                                                    <li>Follow the 12-column grid system</li>
                                                    <li>Use proper accessibility attributes</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card border-danger">
                                            <div class="card-header bg-danger text-white">
                                                <i class="bi bi-x-circle me-2"></i>Avoid This
                                            </div>
                                            <div class="card-body">
                                                <ul class="small mb-0">
                                                    <li>Don't override Bootstrap CSS heavily</li>
                                                    <li>Don't use !important unless necessary</li>
                                                    <li>Don't nest containers</li>
                                                    <li>Don't forget responsive considerations</li>
                                                    <li>Don't ignore semantic HTML</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
// Global variables for state management
let currentTab = 'components';
let currentComponent = 'button';
let componentsState = {};
let measurementsEnabled = false;
let guidesEnabled = false;
let learningProgress = 25;

// Theme management - Updated to use ThemeManager API
function toggleTheme() {
    if (window.ThemeManager) {
        window.ThemeManager.toggleTheme();
    }
}

// Tab management
function switchComponentTab(tabName) {
    // Hide all tab contents
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Remove active class from all tab buttons
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Show selected tab
    const selectedTab = document.getElementById(`${tabName}-tab`);
    if (selectedTab) {
        selectedTab.classList.add('active');
    }
    
    // Add active class to clicked button
    event.target.classList.add('active');
    
    currentTab = tabName;
    
    // Initialize the tab content
    initializeTab(tabName);
    
    showToast(`Switched to ${tabName} tab`, 'success');
}

// Initialize tab content
function initializeTab(tabName) {
    switch(tabName) {
        case 'components':
            updateComponentDemo();
            break;
        case 'layout':
            updateLayoutDemo();
            break;
        case 'learning':
            updateLearningProgress();
            break;
    }
}

// Component demo updates
function updateComponentDemo() {
    const componentType = document.getElementById('component-type').value;
    currentComponent = componentType;
    
    // Hide all component controls
    document.querySelectorAll('.component-controls').forEach(control => {
        control.classList.remove('active');
    });
    
    // Show relevant controls
    const controls = document.getElementById(`${componentType}-controls`);
    if (controls) {
        controls.classList.add('active');
    }
    
    // Generate component HTML
    const html = generateComponentHTML(componentType);
    const container = document.getElementById('components-demo-container');
    container.innerHTML = html;
    
    // Update HTML output
    updateHTMLOutput('components-html-output', html);
    
    // Add interactivity
    addComponentInteractivity(container);
}

// Generate component HTML based on type
function generateComponentHTML(type) {
    switch(type) {
        case 'button':
            return generateButtonHTML();
        case 'alert':
            return generateAlertHTML();
        case 'badge':
            return generateBadgeHTML();
        case 'card':
            return generateCardHTML();
        case 'progress':
            return generateProgressHTML();
        case 'spinner':
            return generateSpinnerHTML();
        default:
            return '<p>Component preview will appear here</p>';
    }
}

// Generate button HTML
function generateButtonHTML() {
    const style = document.getElementById('button-style')?.value || 'btn-primary';
    const size = document.getElementById('button-size')?.value || '';
    const text = document.getElementById('button-text')?.value || 'Click me!';
    const icon = document.getElementById('button-icon')?.value || '';
    const disabled = document.getElementById('button-disabled')?.checked || false;
    const block = document.getElementById('button-block')?.checked || false;
    const rounded = document.getElementById('button-rounded')?.checked || false;
    
    let classes = `btn ${style} ${size}`;
    if (block) classes += ' w-100';
    if (rounded) classes += ' rounded-pill';
    
    const iconHTML = icon ? `<i class="bi ${icon} me-2"></i>` : '';
    const disabledAttr = disabled ? ' disabled' : '';
    
    return `<button type="button" class="${classes} bs-component selected"${disabledAttr}>${iconHTML}${text}</button>`;
}

// Generate alert HTML
function generateAlertHTML() {
    const type = document.getElementById('alert-type')?.value || 'alert-primary';
    const content = document.getElementById('alert-content')?.value || 'This is an important alert message!';
    const dismissible = document.getElementById('alert-dismissible')?.checked || false;
    const icon = document.getElementById('alert-icon')?.checked || false;
    
    let classes = `alert ${type}`;
    if (dismissible) classes += ' alert-dismissible fade show';
    
    const iconMap = {
        'alert-primary': '💬',
        'alert-secondary': 'ℹ️',
        'alert-success': '✅',
        'alert-danger': '❌',
        'alert-warning': '⚠️',
        'alert-info': '💡',
        'alert-light': '📝',
        'alert-dark': '🔒'
    };
    
    const iconHTML = icon ? `<span class="me-2">${iconMap[type] || '💬'}</span>` : '';
    const dismissBtn = dismissible ? '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>' : '';
    
    return `<div class="${classes} bs-component selected" role="alert">${iconHTML}${content}${dismissBtn}</div>`;
}

// Generate badge HTML
function generateBadgeHTML() {
    const style = document.getElementById('badge-style')?.value || 'badge bg-primary';
    const shape = document.getElementById('badge-shape')?.value || '';
    const text = document.getElementById('badge-text')?.value || 'New';
    
    let classes = `${style} ${shape}`;
    
    return `<span class="${classes} bs-component selected">${text}</span>`;
}

// Generate card HTML
function generateCardHTML() {
    const hasHeader = document.getElementById('card-header')?.checked || false;
    const hasImage = document.getElementById('card-image')?.checked || false;
    const hasFooter = document.getElementById('card-footer')?.checked || false;
    const title = document.getElementById('card-title')?.value || 'Card Title';
    const text = document.getElementById('card-text')?.value || 'This is a sample card with some text content.';
    
    let html = '<div class="card bs-component selected" style="width: 18rem;">';
    
    if (hasHeader) {
        html += '<div class="card-header">Card Header</div>';
    }
    
    if (hasImage) {
        html += '<div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 180px;"><i class="bi bi-image display-4 text-muted"></i></div>';
    }
    
    html += `<div class="card-body">
        <h5 class="card-title">${title}</h5>
        <p class="card-text">${text}</p>
        <a href="#" class="btn btn-primary">Go somewhere</a>
    </div>`;
    
    if (hasFooter) {
        html += '<div class="card-footer text-muted">Card Footer</div>';
    }
    
    html += '</div>';
    
    return html;
}

// Generate progress HTML
function generateProgressHTML() {
    const value = document.getElementById('progress-value')?.value || 50;
    const style = document.getElementById('progress-style')?.value || 'bg-primary';
    const striped = document.getElementById('progress-striped')?.checked || false;
    const animated = document.getElementById('progress-animated')?.checked || false;
    const showLabel = document.getElementById('progress-label')?.checked || false;
    
    let barClasses = `progress-bar ${style}`;
    if (striped) barClasses += ' progress-bar-striped';
    if (animated) barClasses += ' progress-bar-animated';
    
    const label = showLabel ? `${value}%` : '';
    
    return `<div class="progress bs-component selected">
        <div class="${barClasses}" role="progressbar" style="width: ${value}%" aria-valuenow="${value}" aria-valuemin="0" aria-valuemax="100">${label}</div>
    </div>`;
}

// Generate spinner HTML
function generateSpinnerHTML() {
    const type = document.getElementById('spinner-type')?.value || 'spinner-border';
    const color = document.getElementById('spinner-color')?.value || 'text-primary';
    const size = document.getElementById('spinner-size')?.value || '';
    
    let classes = `${type} ${color} ${size}`;
    
    return `<div class="${classes} bs-component selected" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>`;
}

// Layout demo updates
function updateLayoutDemo() {
    const container = document.getElementById('layout-container')?.value || 'container';
    const columns = parseInt(document.getElementById('layout-columns')?.value) || 3;
    const breakpoint = document.getElementById('layout-breakpoint')?.value || 'col-md';
    const gutter = document.getElementById('layout-gutter')?.value || 'g-3';
    const alignV = document.getElementById('layout-align-v')?.value || 'align-items-center';
    const alignH = document.getElementById('layout-align-h')?.value || '';
    
    let rowClasses = `row ${gutter}`;
    if (alignV) rowClasses += ` ${alignV}`;
    if (alignH) rowClasses += ` ${alignH}`;
    
    const colors = ['bg-primary', 'bg-success', 'bg-info', 'bg-warning', 'bg-danger', 'bg-secondary'];
    
    let html = `<div class="${container}">
        <div class="${rowClasses}">`;
    
    for (let i = 0; i < columns; i++) {
        const color = colors[i % colors.length];
        html += `<div class="${breakpoint}">
            <div class="p-3 ${color} text-white text-center rounded">Column ${i + 1}</div>
        </div>`;
    }
    
    html += '</div></div>';
    
    const demoContainer = document.getElementById('layout-demo-container');
    demoContainer.innerHTML = html;
    
    updateHTMLOutput('layout-html-output', html);
}

// Update range value displays
function updateRangeValue(rangeId) {
    const range = document.getElementById(rangeId);
    const valueDisplay = document.getElementById(`${rangeId}-value`);
    if (range && valueDisplay) {
        valueDisplay.textContent = range.value + (rangeId.includes('progress') ? '%' : '');
    }
}

// HTML output with syntax highlighting
function updateHTMLOutput(outputId, html) {
    const output = document.getElementById(outputId);
    if (!output) return;
    
    // Store original HTML for theme updates
    output.setAttribute('data-original-html', html);
    
    const formattedHTML = formatHTML(html);
    const highlightedHTML = highlightSyntax(formattedHTML);
    output.innerHTML = highlightedHTML;
}

// Format HTML for display
function formatHTML(html) {
    let formatted = html;
    let indent = '';
    const tab = '  ';
    
    formatted = formatted.replace(/></g, '>\n<');
    
    const lines = formatted.split('\n');
    let result = '';
    
    lines.forEach(line => {
        const trimmed = line.trim();
        if (!trimmed) return;
        
        if (trimmed.startsWith('</')) {
            indent = indent.substring(tab.length);
        }
        
        result += indent + trimmed + '\n';
        
        if (trimmed.startsWith('<') && !trimmed.startsWith('</') && !trimmed.endsWith('/>')) {
            const tagName = trimmed.match(/<(\w+)/);
            const voidElements = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'link', 'meta', 'param', 'source', 'track', 'wbr'];
            if (tagName && !voidElements.includes(tagName[1].toLowerCase())) {
                indent += tab;
            }
        }
    });
    
    return result.trim();
}

// Syntax highlighting
function highlightSyntax(html) {
    return html
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/&lt;(\/?[\w-]+)([^&]*?)&gt;/g, (match, tag, attrs) => {
            const highlightedTag = `<span class="html-tag">&lt;${tag}</span>`;
            const highlightedAttrs = attrs.replace(/([\w-]+)=("[^"]*")/g, 
                '<span class="html-attr">$1</span>=<span class="html-value">$2</span>');
            return `${highlightedTag}${highlightedAttrs}<span class="html-tag">&gt;</span>`;
        })
        .replace(/(class="[^"]*bootstrap[^"]*")/gi, '<span class="bootstrap-class">$1</span>');
}

// Copy code functionality
function copyCode(outputId) {
    const output = document.getElementById(outputId);
    if (!output) return;
    
    const text = output.textContent;
    navigator.clipboard.writeText(text).then(() => {
        const btn = output.parentElement.querySelector('.copy-btn');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="bi bi-check me-1"></i>Copied!';
        btn.classList.add('copied');
        
        setTimeout(() => {
            btn.innerHTML = originalText;
            btn.classList.remove('copied');
        }, 2000);
        
        showToast('HTML copied to clipboard!', 'success');
    });
}

// Component interactivity
function addComponentInteractivity(container) {
    const components = container.querySelectorAll('.bs-component');
    components.forEach(component => {
        component.addEventListener('click', (e) => {
            e.preventDefault();
            
            // Remove selected class from all components
            container.querySelectorAll('.bs-component').forEach(c => c.classList.remove('selected'));
            
            // Add selected class to clicked component
            component.classList.add('selected');
            
            showToast('Component selected', 'info');
        });
    });
}

// Preset applications
function applyComponentPreset(presetName) {
    switch(presetName) {
        case 'cta-button':
            document.getElementById('button-style').value = 'btn-primary';
            document.getElementById('button-size').value = 'btn-lg';
            document.getElementById('button-text').value = 'Get Started Now';
            document.getElementById('button-icon').value = 'bi-arrow-right';
            document.getElementById('button-rounded').checked = true;
            break;
        case 'success-alert':
            document.getElementById('component-type').value = 'alert';
            setTimeout(() => {
                document.getElementById('alert-type').value = 'alert-success';
                document.getElementById('alert-content').value = 'Success! Your action was completed successfully.';
                document.getElementById('alert-icon').checked = true;
                updateComponentDemo();
            }, 100);
            break;
        case 'info-card':
            document.getElementById('component-type').value = 'card';
            setTimeout(() => {
                document.getElementById('card-header').checked = true;
                document.getElementById('card-image').checked = false;
                document.getElementById('card-footer').checked = true;
                document.getElementById('card-title').value = 'Information Card';
                document.getElementById('card-text').value = 'This card contains important information for users.';
                updateComponentDemo();
            }, 100);
            break;
        case 'notification-badge':
            document.getElementById('component-type').value = 'badge';
            setTimeout(() => {
                document.getElementById('badge-style').value = 'badge bg-danger';
                document.getElementById('badge-shape').value = 'rounded-pill';
                document.getElementById('badge-text').value = '3';
                updateComponentDemo();
            }, 100);
            break;
    }
    
    updateComponentDemo();
    showToast(`Applied ${presetName} preset`, 'success');
}

function applyLayoutPreset(presetName) {
    switch(presetName) {
        case 'three-column':
            document.getElementById('layout-columns').value = '3';
            document.getElementById('layout-breakpoint').value = 'col-md';
            document.getElementById('layout-gutter').value = 'g-4';
            break;
        case 'sidebar':
            document.getElementById('layout-columns').value = '2';
            document.getElementById('layout-breakpoint').value = 'col-lg';
            document.getElementById('layout-gutter').value = 'g-0';
            break;
        case 'hero-section':
            document.getElementById('layout-columns').value = '1';
            document.getElementById('layout-container').value = 'container-fluid';
            document.getElementById('layout-align-v').value = 'align-items-center';
            document.getElementById('layout-align-h').value = 'justify-content-center';
            break;
        case 'card-grid':
            document.getElementById('layout-columns').value = '4';
            document.getElementById('layout-breakpoint').value = 'col-md-3';
            document.getElementById('layout-gutter').value = 'g-3';
            break;
    }
    
    updateLayoutDemo();
    showToast(`Applied ${presetName} layout preset`, 'success');
}

// Visual tools
function toggleMeasurements() {
    measurementsEnabled = !measurementsEnabled;
    const btn = document.getElementById('measurements-btn');
    const containers = document.querySelectorAll('.demo-container');
    
    if (measurementsEnabled) {
        btn.classList.add('active');
        containers.forEach(container => container.classList.add('with-measurements'));
        showToast('Measurements enabled', 'info');
    } else {
        btn.classList.remove('active');
        containers.forEach(container => container.classList.remove('with-measurements'));
        showToast('Measurements disabled', 'info');
    }
}

function toggleComponentGuides() {
    guidesEnabled = !guidesEnabled;
    const btn = document.getElementById('guide-btn');
    
    if (guidesEnabled) {
        btn.classList.add('active');
        showToast('Component guides enabled', 'info');
    } else {
        btn.classList.remove('active');
        showToast('Component guides disabled', 'info');
    }
}

// Fullscreen functionality
function toggleFullscreen() {
    const container = document.getElementById('fullscreenContainer');
    const icon = document.getElementById('fullscreen-icon');
    
    if (container.classList.contains('active')) {
        exitFullscreen();
    } else {
        enterFullscreen(currentTab);
    }
}

function enterFullscreen(tabName) {
    const container = document.getElementById('fullscreenContainer');
    const playgroundContent = document.getElementById('fullscreen-playground-content');
    const controlsContent = document.getElementById('fullscreen-controls-content');
    
    // Clone current tab content
    const currentTabElement = document.getElementById(`${tabName}-tab`);
    if (currentTabElement) {
        const demo = currentTabElement.querySelector('.demo-container');
        const controls = currentTabElement.querySelector('.col-lg-6');
        
        if (demo) {
            playgroundContent.innerHTML = demo.outerHTML;
        }
        
        if (controls) {
            controlsContent.innerHTML = controls.innerHTML;
        }
    }
    
    container.classList.add('active');
    document.body.style.overflow = 'hidden';
    
    const icon = document.getElementById('fullscreen-icon');
    icon.classList.remove('bi-fullscreen');
    icon.classList.add('bi-fullscreen-exit');
    
    showToast('Entered fullscreen mode', 'success');
}

function exitFullscreen() {
    const container = document.getElementById('fullscreenContainer');
    container.classList.remove('active');
    document.body.style.overflow = '';
    
    const icon = document.getElementById('fullscreen-icon');
    icon.classList.remove('bi-fullscreen-exit');
    icon.classList.add('bi-fullscreen');
    
    showToast('Exited fullscreen mode', 'info');
}

// Toast notifications
function showToast(message, type = 'info') {
    const container = document.getElementById('toast-container');
    const toast = document.createElement('div');
    toast.className = `toast-custom ${type}`;
    
    const icons = {
        success: 'bi-check-circle',
        error: 'bi-x-circle',
        warning: 'bi-exclamation-triangle',
        info: 'bi-info-circle'
    };
    
    toast.innerHTML = `
        <div class="d-flex align-items-center">
            <i class="${icons[type]} me-2"></i>
            <div class="flex-grow-1">${message}</div>
            <button type="button" class="btn-close btn-close-white ms-2" onclick="this.parentElement.parentElement.remove()"></button>
        </div>
    `;
    
    container.appendChild(toast);
    
    // Show toast
    setTimeout(() => toast.classList.add('show'), 100);
    
    // Auto-hide after 5 seconds
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 400);
    }, 5000);
}

// Learning Lab functionality
function startBootstrapChallenge(challengeId) {
    showToast(`Starting ${challengeId} challenge...`, 'info');
    
    // Simulate challenge progress
    setTimeout(() => {
        learningProgress = Math.min(learningProgress + 10, 100);
        updateLearningProgress();
        showToast('Challenge completed! Progress updated.', 'success');
    }, 2000);
}

function updateLearningProgress() {
    const progressBar = document.getElementById('learning-progress');
    const progressRing = document.querySelector('.progress-ring');
    const progressText = document.querySelector('.progress-text');
    
    if (progressBar) {
        progressBar.style.width = `${learningProgress}%`;
    }
    
    if (progressRing) {
        progressRing.style.setProperty('--progress', learningProgress);
    }
    
    if (progressText) {
        progressText.textContent = `${learningProgress}%`;
    }
}

function loadPattern(patternName) {
    // Switch to appropriate tab and load pattern
    showToast(`Loading ${patternName} pattern...`, 'info');
    
    // Implementation would load the specific pattern
    setTimeout(() => {
        showToast('Pattern loaded successfully!', 'success');
    }, 1000);
}

// Keyboard shortcuts
function toggleKeyboardShortcuts() {
    const shortcuts = document.getElementById('keyboard-shortcuts');
    shortcuts.classList.toggle('show');
}

// Export and utility functions
function exportBootstrapHTML() {
    let allHTML = '';
    
    // Collect HTML from all visible demos
    document.querySelectorAll('.demo-container').forEach((container, index) => {
        if (container.innerHTML.trim()) {
            allHTML += `<!-- Demo ${index + 1} -->\n${container.innerHTML}\n\n`;
        }
    });
    
    const blob = new Blob([allHTML], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = 'bootstrap-components.html';
    a.click();
    
    URL.revokeObjectURL(url);
    showToast('HTML exported successfully!', 'success');
}

function resetAllComponents() {
    // Reset all form controls to defaults
    document.querySelectorAll('select, input, textarea').forEach(input => {
        if (input.type === 'checkbox' || input.type === 'radio') {
            input.checked = false;
        } else if (input.type === 'range') {
            input.value = input.getAttribute('value') || input.min || 0;
        } else {
            input.value = input.getAttribute('value') || '';
        }
    });
    
    // Reset specific defaults
    document.getElementById('button-text').value = 'Click me!';
    document.getElementById('alert-content').value = 'This is an important alert message!';
    document.getElementById('layout-columns').value = '3';
    
    // Update all demos
    updateComponentDemo();
    updateLayoutDemo();
    
    showToast('All components reset to defaults', 'info');
}

function validateBootstrapHTML() {
    const containers = document.querySelectorAll('.demo-container');
    let isValid = true;
    let errors = [];
    
    containers.forEach((container, index) => {
        const html = container.innerHTML;
        
        // Basic validation checks
        if (!html.includes('class=')) {
            errors.push(`Demo ${index + 1}: Missing Bootstrap classes`);
            isValid = false;
        }
        
        // Check for common Bootstrap patterns
        const hasBootstrapClasses = /\b(btn|alert|card|row|col|container)\b/.test(html);
        if (!hasBootstrapClasses) {
            errors.push(`Demo ${index + 1}: No Bootstrap classes detected`);
            isValid = false;
        }
    });
    
    if (isValid) {
        showToast('HTML validation passed!', 'success');
    } else {
        showToast(`Validation errors found: ${errors.join(', ')}`, 'error');
    }
}

// Template loading
function loadBootstrapTemplate(templateName) {
    showToast(`Loading ${templateName} template...`, 'info');
    
    // This would load predefined templates
    setTimeout(() => {
        showToast(`${templateName} template loaded!`, 'success');
    }, 1500);
}

// Global keyboard shortcuts
document.addEventListener('keydown', (e) => {
    // Ctrl+D for theme toggle
    if (e.ctrlKey && e.key === 'd') {
        e.preventDefault();
        toggleTheme();
    }
    
    // F11 for fullscreen
    if (e.key === 'F11') {
        e.preventDefault();
        toggleFullscreen();
    }
    
    // Ctrl+Enter for copy HTML
    if (e.ctrlKey && e.key === 'Enter') {
        e.preventDefault();
        const activeOutput = document.querySelector('.tab-content.active .code-output');
        if (activeOutput) {
            copyCode(activeOutput.id);
        }
    }
    
    // Number keys for tab switching
    if (e.key >= '1' && e.key <= '8') {
        const tabs = ['components', 'layout', 'forms', 'content', 'navigation', 'utilities', 'advanced', 'learning'];
        const tabIndex = parseInt(e.key) - 1;
        if (tabs[tabIndex]) {
            switchComponentTab(tabs[tabIndex]);
        }
    }
    
    // A key to add component
    if (e.key === 'a' || e.key === 'A') {
        if (!e.ctrlKey && !e.altKey) {
            showToast('Add component feature coming soon!', 'info');
        }
    }
    
    // Delete key to clear
    if (e.key === 'Delete') {
        resetAllComponents();
    }
    
    // M for measurements
    if (e.key === 'm' || e.key === 'M') {
        if (!e.ctrlKey && !e.altKey) {
            toggleMeasurements();
        }
    }
    
    // G for guides
    if (e.key === 'g' || e.key === 'G') {
        if (!e.ctrlKey && !e.altKey) {
            toggleComponentGuides();
        }
    }
    
    // H for help/shortcuts
    if (e.key === 'h' || e.key === 'H') {
        if (!e.ctrlKey && !e.altKey) {
            toggleKeyboardShortcuts();
        }
    }
});

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    // Initialize first tab
    updateComponentDemo();
    updateRangeValue('layout-columns');
    updateRangeValue('progress-value');
    
    // Show welcome message
    setTimeout(() => {
        showToast('Welcome to Bootstrap Master Playground! 🚀', 'success');
    }, 500);
    
    // Initialize Bootstrap tooltips if any
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Listen for theme changes to update syntax highlighting
    window.addEventListener('themeChanged', function(e) {
        // Update any theme-dependent elements
        updateSyntaxHighlightingForTheme();
    });
    
    window.addEventListener('syntaxThemeChanged', function(e) {
        // Update syntax highlighting when syntax theme changes
        updateSyntaxHighlightingForTheme();
    });
});

// Update syntax highlighting based on current theme
function updateSyntaxHighlightingForTheme() {
    // Re-highlight all code outputs with new theme
    document.querySelectorAll('.code-output').forEach(output => {
        const html = output.getAttribute('data-original-html');
        if (html) {
            const highlighted = highlightSyntax(html);
            output.innerHTML = highlighted;
        }
    });
}

// Responsive behavior
window.addEventListener('resize', () => {
    // Adjust fullscreen layout on resize
    const fullscreenContainer = document.getElementById('fullscreenContainer');
    if (fullscreenContainer.classList.contains('active')) {
        // Re-layout fullscreen content if needed
    }
});

// Performance optimization
let resizeTimeout;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
        // Perform expensive operations after resize is complete
        if (measurementsEnabled) {
            // Recalculate measurements
        }
    }, 250);
});
    </script>
</body>
</html>
