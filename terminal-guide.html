<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive Terminal learning guide with hands-on practice">
    <title>Interactive Terminal Learning Guide</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    
<!-- CRITICAL: No-flash script for dark mode -->
<script>
(function() {
    'use strict';
    
    const THEME_KEY = 'theme';
    const DARK_MODE_CLASS = 'dark-mode';
    
    try {
        const savedTheme = localStorage.getItem(THEME_KEY);
        
        if (savedTheme === 'dark') {
            document.documentElement.classList.add(DARK_MODE_CLASS);
            if (document.body) {
                document.body.classList.add(DARK_MODE_CLASS);
            }
        } else if (savedTheme === 'light') {
            document.documentElement.classList.remove(DARK_MODE_CLASS);
            if (document.body) {
                document.body.classList.remove(DARK_MODE_CLASS);
            }
        } else {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add(DARK_MODE_CLASS);
                if (document.body) {
                    document.body.classList.add(DARK_MODE_CLASS);
                }
            }
        }
    } catch (e) {
        console.warn('Theme persistence not available:', e);
    }
})();
</script>

<style>
:root {
    /* Theme variables that change with dark mode */
    --theme-bg-primary: #ffffff;
    --theme-bg-secondary: #f8f9fa;
    --theme-bg-tertiary: #e9ecef;
    --theme-text-primary: #495057;
    --theme-text-secondary: #6c757d;
    --theme-text-muted: #a0aec0;
    --theme-border-color: #dee2e6;
    --theme-border-focus: #667eea;
    --theme-shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
    --theme-shadow-md: 0 4px 15px rgba(0,0,0,0.15);
    --theme-shadow-lg: 0 8px 25px rgba(0,0,0,0.2);
    
    /* Other variables */
    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --terminal-bg: #1e1e1e;
    --terminal-text: #d4d4d4;
    --terminal-green: #4ec9b0;
    --terminal-blue: #569cd6;
    --terminal-red: #f44747;
    --terminal-success: #4caf50;
    --success-gradient: linear-gradient(90deg, #4caf50, #45a049);
}

/* Dark mode overrides */
body.dark-mode {
    --theme-bg-primary: #1a202c;
    --theme-bg-secondary: #2d3748;
    --theme-bg-tertiary: #4a5568;
    --theme-text-primary: #e2e8f0;
    --theme-text-secondary: #a0aec0;
    --theme-text-muted: #718096;
    --theme-border-color: #4a5568;
    --theme-border-focus: #63b3ed;
    --theme-shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
    --theme-shadow-md: 0 4px 15px rgba(0,0,0,0.4);
    --theme-shadow-lg: 0 8px 25px rgba(0,0,0,0.3);
}

/* Smooth transitions for theme switching */
*,
*::before,
*::after {
    transition: 
        background-color 0.3s ease,
        color 0.3s ease,
        border-color 0.3s ease,
        box-shadow 0.3s ease;
}

body {
    font-family: system-ui, -apple-system, sans-serif;
    line-height: 1.6;
    scroll-behavior: smooth;
    background-color: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
}

.hero-section {
    background: var(--primary-gradient);
    color: white;
    padding: 3rem 0;
}

.guide-nav {
    background: var(--theme-bg-primary);
    border-radius: 12px;
    box-shadow: var(--theme-shadow-sm);
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.guide-nav .nav-link {
    color: var(--theme-text-primary);
    padding: 0.75rem 1rem;
    border-radius: 8px;
    margin: 3px 0;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
}

.guide-nav .nav-link:hover {
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
    transform: translateX(5px);
}

.guide-nav .nav-link.active {
    background: var(--primary-gradient);
    color: white;
    transform: translateX(5px);
    box-shadow: var(--theme-shadow-sm);
}

.content-section {
    background: var(--theme-bg-primary);
    border-radius: 12px;
    box-shadow: var(--theme-shadow-sm);
    padding: 2.5rem;
    margin-bottom: 2rem;
    transition: all 0.3s ease;
}

.content-section:hover {
    box-shadow: var(--theme-shadow-md);
}

/* Enhanced Example Container with Tabs */
.example-container {
    background: var(--theme-bg-secondary);
    border: 1px solid var(--theme-border-color);
    border-radius: 12px;
    margin: 1.5rem 0;
    overflow: hidden;
    position: relative;
}

.example-header {
    background: var(--primary-gradient);
    color: white;
    padding: 1rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.example-title {
    font-weight: 600;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.example-tabs {
    background: var(--theme-bg-tertiary);
    padding: 0;
    margin: 0;
    display: flex;
    border-bottom: 1px solid var(--theme-border-color);
}

.example-tab {
    background: none;
    border: none;
    padding: 1rem 1.5rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--theme-text-primary);
    font-weight: 500;
    transition: all 0.3s ease;
    border-bottom: 3px solid transparent;
}

.example-tab:hover {
    background: var(--theme-bg-primary);
    color: var(--theme-text-primary);
}

.example-tab.active {
    background: var(--theme-bg-primary);
    color: var(--theme-text-primary);
    border-bottom-color: var(--theme-border-focus);
}

.example-content {
    position: relative;
}

.example-pane {
    display: none;
    padding: 1.5rem;
    background: var(--theme-bg-primary);
    color: var(--theme-text-primary);
}

.example-pane.active {
    display: block;
}

.example-output {
    background: var(--theme-bg-primary);
    border: 2px dashed var(--theme-border-color);
    border-radius: 8px;
    padding: 1.5rem;
    min-height: 60px;
    color: var(--theme-text-primary);
}

/* Interactive Terminal Styles */
.interactive-terminal {
    background: var(--terminal-bg);
    border-radius: 8px;
    overflow: hidden;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    box-shadow: var(--theme-shadow-md);
    min-height: 400px;
}

.terminal-header {
    background: #2d2d30;
    padding: 8px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid #3e3e42;
}

.terminal-dots {
    display: flex;
    gap: 6px;
}

.terminal-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.terminal-dot.red { background: #ff5f56; }
.terminal-dot.yellow { background: #ffbd2e; }
.terminal-dot.green { background: #27ca3f; }

.terminal-title {
    color: var(--terminal-text);
    font-size: 0.9rem;
    font-weight: 500;
}

.terminal-controls {
    display: flex;
    gap: 10px;
    align-items: center;
}

.terminal-control-btn {
    background: #4a5568;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 12px;
    cursor: pointer;
    transition: background 0.2s;
}

.terminal-control-btn:hover {
    background: #2d3748;
}

.terminal-body {
    background: var(--terminal-bg);
    color: var(--terminal-text);
    padding: 16px;
    min-height: 350px;
    max-height: 350px;
    overflow-y: auto;
    font-size: 14px;
    line-height: 1.4;
}

.terminal-line {
    margin-bottom: 4px;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
}

.terminal-prompt {
    color: var(--terminal-green);
    flex-shrink: 0;
}

.terminal-command {
    color: var(--terminal-text);
    margin-left: 8px;
}

.terminal-output {
    color: var(--terminal-blue);
    margin-left: 0;
    white-space: pre-wrap;
    width: 100%;
}

.terminal-error {
    color: var(--terminal-red);
    margin-left: 0;
    width: 100%;
}

.terminal-success {
    color: var(--terminal-success);
    margin-left: 0;
    width: 100%;
}

.terminal-comment {
    color: #666;
    font-style: italic;
}

.terminal-input-line {
    display: flex;
    align-items: center;
    margin-top: 8px;
}

.terminal-input {
    background: transparent;
    border: none;
    color: var(--terminal-text);
    font-family: inherit;
    font-size: inherit;
    outline: none;
    flex: 1;
    margin-left: 8px;
}

.terminal-cursor {
    animation: blink 1s infinite;
    color: var(--terminal-text);
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* Practice Challenge Styles */
.practice-challenge {
    background: var(--theme-bg-secondary);
    border: 1px solid var(--theme-border-color);
    border-radius: 8px;
    padding: 1.5rem;
    margin: 1rem 0;
    position: relative;
    color: var(--theme-text-primary);
}

.practice-challenge::before {
    content: '🎯';
    position: absolute;
    left: 15px;
    top: 15px;
    font-size: 1.2rem;
}

.practice-challenge h6 {
    margin-left: 2rem;
    color: var(--theme-text-primary);
}

.challenge-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1rem;
}

.status-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--theme-text-secondary);
}

.status-indicator.completed {
    background: var(--terminal-success);
}

.status-indicator.current {
    background: #ffc107;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.hint-box {
    background: var(--theme-bg-secondary);
    border: 1px solid var(--theme-border-color);
    border-radius: 6px;
    padding: 1rem;
    margin: 1rem 0;
    display: none;
    color: var(--theme-text-primary);
}

.hint-box.show {
    display: block;
    animation: slideDown 0.3s ease;
}

@keyframes slideDown {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.progress-bar-container {
    background: var(--theme-bg-tertiary);
    border-radius: 10px;
    overflow: hidden;
    margin: 1rem 0;
}

.progress-bar {
    height: 8px;
    background: var(--success-gradient);
    width: 0;
    transition: width 0.5s ease;
}

.command-hint {
    background: var(--theme-bg-secondary);
    border-left: 4px solid #4caf50;
    padding: 0.5rem 1rem;
    margin: 0.5rem 0;
    border-radius: 0 4px 4px 0;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.9rem;
    color: var(--theme-text-primary);
}

.best-practice {
    background: var(--theme-bg-secondary);
    border-left: 4px solid #28a745;
    padding: 1.5rem;
    margin: 1.5rem 0;
    border-radius: 0 8px 8px 0;
    position: relative;
    color: var(--theme-text-primary);
}

.best-practice::before {
    content: '💡';
    position: absolute;
    left: -2px;
    top: -2px;
    font-size: 1.2rem;
}

.warning-box {
    background: var(--theme-bg-secondary);
    border-left: 4px solid #ffc107;
    padding: 1.5rem;
    margin: 1.5rem 0;
    border-radius: 0 8px 8px 0;
    position: relative;
    color: var(--theme-text-primary);
}

.warning-box::before {
    content: '⚠️';
    position: absolute;
    left: -2px;
    top: -2px;
    font-size: 1.2rem;
}

.badge-level {
    font-size: 0.7rem;
    padding: 0.35rem 0.7rem;
    border-radius: 12px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
}

/* Toast notifications */
.toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1050;
}

.toast-custom {
    background: var(--theme-bg-primary);
    border-radius: 8px;
    box-shadow: var(--theme-shadow-lg);
    padding: 1rem;
    margin-bottom: 0.5rem;
    display: none;
    min-width: 300px;
    color: var(--theme-text-primary);
    border: 1px solid var(--theme-border-color);
}

.toast-custom.show {
    display: block;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .guide-nav {
        position: static;
        max-height: none;
        margin-bottom: 2rem;
    }
    
    .content-section {
        padding: 1.5rem;
    }
    
    .example-tabs {
        flex-direction: column;
    }
    
    .example-tab {
        border-bottom: none;
        border-right: 3px solid transparent;
    }
    
    .example-tab.active {
        border-bottom: none;
        border-right-color: var(--theme-border-focus);
    }
}
</style>

<head></head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Add a dark mode toggle button for testing -->
    <button onclick="toggleDarkMode()" style="position: fixed; top: 10px; right: 10px; z-index: 9999; padding: 10px; border: none; border-radius: 5px; background: var(--theme-bg-primary); color: var(--theme-text-primary); cursor: pointer;">
        🌙 Toggle Dark Mode
    </button>

    <script>
        function toggleDarkMode() {
            const body = document.body;
            const isDark = body.classList.contains('dark-mode');
            
            if (isDark) {
                body.classList.remove('dark-mode');
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark');
            }
        }
    </script>
</body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="#" onclick="showToast('Welcome to Live Coding Playground!', 'info')">
            <i class="bi bi-code-square me-2"></i>Live Coding Playground
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="#" onclick="loadPreset('basic-page')">
                    <i class="bi bi-house me-1"></i>Home
                </a>
                <a class="nav-link" href="#" onclick="loadPreset('flexbox-demo')">
                    <i class="bi bi-grid-3x3 me-1"></i>Flexbox
                </a>
                <a class="nav-link" href="#" onclick="switchTab('html')">
                    <i class="bi bi-code me-1"></i>HTML
                </a>
                <a class="nav-link" href="#" onclick="switchTab('bootstrap')">
                    <i class="bi bi-bootstrap me-1"></i>Bootstrap
                </a>
                <a class="nav-link active" href="#" onclick="showToast('You are here!', 'info')">
                    <i class="bi bi-play-circle me-1"></i>Live Coding
                </a>
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-grid-3x3-gap me-1"></i>Templates
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="loadPreset('landing-page')">
                            <i class="bi bi-layout-text-window me-2"></i>Landing Page
                        </a></li>
                        <li><a class="dropdown-item" href="#" onclick="loadPreset('card-layout')">
                            <i class="bi bi-card-list me-2"></i>Card Layout
                        </a></li>
                        <li><a class="dropdown-item" href="#" onclick="loadPreset('form-design')">
                            <i class="bi bi-ui-checks me-2"></i>Form Design
                        </a></li>
                        <li><a class="dropdown-item" href="#" onclick="loadPreset('navigation')">
                            <i class="bi bi-menu-button-wide me-2"></i>Navigation
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" onclick="loadPreset('animation-demo')">
                            <i class="bi bi-stars me-2"></i>Animations
                        </a></li>
                        <li><a class="dropdown-item" href="#" onclick="loadPreset('grid-system')">
                            <i class="bi bi-grid me-2"></i>Grid System
                        </a></li>
                    </ul>
                </div>
                 <!-- ADD THIS: Theme Toggle Button in your navbar -->
                <li class="nav-item ms-lg-2">
                    <button id="theme-toggle" 
                            class="nav-link border-0 bg-transparent" 
                            type="button"
                            aria-label="Toggle between light and dark themes"
                            title="Toggle theme">
                        <i id="theme-toggle-moon" class="bi bi-moon-stars-fill" aria-hidden="true"></i>
                        <i id="theme-toggle-sun" class="bi bi-sun-fill" style="display: none;" aria-hidden="true"></i>
                    </button>
                </li>
            </div>
        </div>
    </div>
</nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-5 fw-bold mb-3">
                        <i class="bi bi-terminal me-3"></i>Interactive Terminal Mastery
                    </h1>
                    <p class="lead mb-4">Learn terminal commands by actually typing them! Practice with real interactive examples and get instant feedback on your commands.</p>
                    <div class="d-flex gap-3 flex-wrap">
                        <a href="#getting-started" class="btn btn-light btn-lg">
                            <i class="bi bi-play me-2"></i>Start Learning
                        </a>
                        <a href="#practice-terminal" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-terminal me-2"></i>Practice Now
                        </a>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <div class="interactive-terminal">
                        <div class="terminal-header">
                            <div class="terminal-dots">
                                <div class="terminal-dot red"></div>
                                <div class="terminal-dot yellow"></div>
                                <div class="terminal-dot green"></div>
                            </div>
                            <div class="terminal-title">Interactive Terminal</div>
                            <div class="terminal-controls">
                                <button class="terminal-control-btn" onclick="clearHeroTerminal()">Clear</button>
                            </div>
                        </div>
                        <div class="terminal-body" id="hero-terminal">
                            <div class="terminal-line">
                                <span class="terminal-comment"># Try typing: pwd</span>
                            </div>
                            <div class="terminal-input-line">
                                <span class="terminal-prompt">student@learning:~$</span>
                                <input type="text" class="terminal-input" id="hero-input" 
                                       placeholder="Type a command..." onkeypress="handleHeroCommand(event)">
                                <span class="terminal-cursor">_</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="container-fluid mt-4">
        <div class="row">
            <!-- Navigation Sidebar -->
            <div class="col-lg-3">
                <div class="guide-nav p-3">
                    <h6 class="text-muted small text-uppercase mb-3 fw-bold">
                        <i class="bi bi-list me-2"></i>Learning Path
                    </h6>
                    <nav class="nav flex-column" id="guide-navigation">
                        <a class="nav-link active" href="#getting-started">
                            <i class="bi bi-play-circle me-2"></i>Getting Started
                        </a>
                        <a class="nav-link" href="#navigation-commands">
                            <i class="bi bi-compass me-2"></i>Navigation Commands
                        </a>
                        <a class="nav-link" href="#file-operations">
                            <i class="bi bi-file-earmark me-2"></i>File Operations
                        </a>
                        <a class="nav-link" href="#text-processing">
                            <i class="bi bi-file-text me-2"></i>Text Processing
                        </a>
                        <a class="nav-link" href="#practice-terminal">
                            <i class="bi bi-terminal me-2"></i>Practice Terminal
                        </a>
                    </nav>
                    
                    <!-- Progress Tracker -->
                    <div class="mt-4 p-3 bg-light rounded">
                        <h6 class="small fw-bold mb-2">
                            <i class="bi bi-trophy me-1"></i>Your Progress
                        </h6>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="overall-progress"></div>
                        </div>
                        <div class="small text-muted mt-1">
                            <span id="progress-text">0% Complete</span>
                        </div>
                        <div class="mt-2">
                            <div class="d-flex align-items-center mb-1">
                                <div class="status-indicator" id="nav-status"></div>
                                <span class="small ms-2">Navigation</span>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <div class="status-indicator" id="file-status"></div>
                                <span class="small ms-2">File Operations</span>
                            </div>
                            <div class="d-flex align-items-center">
                                <div class="status-indicator" id="text-status"></div>
                                <span class="small ms-2">Text Processing</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9">
                <!-- Getting Started -->
                <section id="getting-started" class="content-section">
                    <div class="d-flex align-items-center mb-4">
                        <h2 class="mb-0">Getting Started with Interactive Terminal</h2>
                        <span class="badge bg-success ms-3 badge-level">Beginner</span>
                    </div>
                    
                    <p class="lead">Welcome to the interactive terminal learning experience! You'll learn by doing - type real commands and see immediate results.</p>

                    <div class="best-practice">
                        <h6><i class="bi bi-lightbulb text-success me-2"></i>How This Works</h6>
                        <ul class="mb-0">
                            <li><strong>Interactive Tabs:</strong> Each example has a "Try It" tab where you can type commands</li>
                            <li><strong>Real Feedback:</strong> Get instant validation and results for your commands</li>
                            <li><strong>Guided Learning:</strong> Follow step-by-step challenges with hints</li>
                            <li><strong>Progress Tracking:</strong> Watch your skills grow as you complete sections</li>
                        </ul>
                    </div>

                    <h4>Understanding the Terminal Prompt</h4>
                    <div class="example-container">
                        <div class="example-header">
                            <h6 class="example-title">
                                <i class="bi bi-terminal"></i>
                                Terminal Prompt Basics
                            </h6>
                        </div>
                        <div class="example-tabs">
                            <button class="example-tab active" onclick="switchExampleTab(this, 'demo')">
                                <i class="bi bi-display"></i>Demo
                            </button>
                            <button class="example-tab" onclick="switchExampleTab(this, 'practice')">
                                <i class="bi bi-keyboard"></i>Try It
                            </button>
                            <button class="example-tab" onclick="switchExampleTab(this, 'explanation')">
                                <i class="bi bi-info-circle"></i>Explanation
                            </button>
                        </div>
                        <div class="example-content">
                            <div class="example-pane active" data-tab="demo">
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Demo Terminal</div>
                                        <div></div>
                                    </div>
                                    <div class="terminal-body">
                                        <div class="terminal-line">
                                            <span class="terminal-comment"># This is what you see when you open terminal</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning</span><span style="color: #fff;">:</span><span style="color: var(--terminal-blue);">~</span><span style="color: #fff;">$</span>
                                            <span class="terminal-command">echo "Hello Terminal!"</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-output">Hello Terminal!</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning</span><span style="color: #fff;">:</span><span style="color: var(--terminal-blue);">~</span><span style="color: #fff;">$</span>
                                            <span class="terminal-cursor">_</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="example-pane" data-tab="practice">
                                <div class="practice-challenge">
                                    <h6>🎯 Challenge: Try your first command!</h6>
                                    <p>Type <code>echo "Hello World!"</code> in the terminal below and press Enter.</p>
                                    <div class="command-hint">
                                        <strong>Hint:</strong> The echo command prints text to the terminal
                                    </div>
                                </div>
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Practice Terminal</div>
                                        <div class="terminal-controls">
                                            <button class="terminal-control-btn" onclick="clearTerminal('practice-1')">Clear</button>
                                            <button class="terminal-control-btn" onclick="showHint('hint-1')">Hint</button>
                                        </div>
                                    </div>
                                    <div class="terminal-body" id="practice-1">
                                        <div class="terminal-line">
                                            <span class="terminal-comment"># Try: echo "Hello World!"</span>
                                        </div>
                                        <div class="terminal-input-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <input type="text" class="terminal-input" 
                                                   onkeypress="handleCommand(event, 'practice-1', 'getting-started-1')"
                                                   placeholder="Type your command here...">
                                            <span class="terminal-cursor">_</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="hint-box" id="hint-1">
                                    <strong>💡 Hint:</strong> Type exactly: <code>echo "Hello World!"</code> and press Enter
                                </div>
                                <div class="challenge-status" id="challenge-getting-started-1">
                                    <div class="status-indicator current"></div>
                                    <span>Challenge: Use echo command</span>
                                </div>
                            </div>
                            <div class="example-pane" data-tab="explanation">
                                <div class="example-output">
                                    <h6>Prompt Breakdown:</h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="p-3 bg-light rounded mb-3">
                                                <h6><span class="badge bg-primary">student</span> Username</h6>
                                                <p class="mb-0">The currently logged-in user</p>
                                            </div>
                                            <div class="p-3 bg-light rounded mb-3">
                                                <h6><span class="badge bg-info">learning</span> Hostname</h6>
                                                <p class="mb-0">The name of your computer/server</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="p-3 bg-light rounded mb-3">
                                                <h6><span class="badge bg-warning">~</span> Current Directory</h6>
                                                <p class="mb-0">~ represents your home directory</p>
                                            </div>
                                            <div class="p-3 bg-light rounded mb-3">
                                                <h6><span class="badge bg-success">$</span> Prompt Symbol</h6>
                                                <p class="mb-0">$ = regular user, # = root user</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Navigation Commands -->
                <section id="navigation-commands" class="content-section">
                    <div class="d-flex align-items-center mb-4">
                        <h2 class="mb-0">Navigation Commands</h2>
                        <span class="badge bg-primary ms-3 badge-level">Beginner</span>
                    </div>

                    <p>Master the essential commands for moving around the file system.</p>

                    <h4>pwd - Show Current Directory</h4>
                    <div class="example-container">
                        <div class="example-header">
                            <h6 class="example-title">
                                <i class="bi bi-geo-alt"></i>
                                Print Working Directory
                            </h6>
                        </div>
                        <div class="example-tabs">
                            <button class="example-tab active" onclick="switchExampleTab(this, 'demo')">
                                <i class="bi bi-display"></i>Demo
                            </button>
                            <button class="example-tab" onclick="switchExampleTab(this, 'practice')">
                                <i class="bi bi-keyboard"></i>Try It
                            </button>
                        </div>
                        <div class="example-content">
                            <div class="example-pane active" data-tab="demo">
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Demo Terminal</div>
                                        <div></div>
                                    </div>
                                    <div class="terminal-body">
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <span class="terminal-command">pwd</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-output">/home/student</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <span class="terminal-cursor">_</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="example-pane" data-tab="practice">
                                <div class="practice-challenge">
                                    <h6>🎯 Challenge: Find your current location!</h6>
                                    <p>Use the <code>pwd</code> command to see what directory you're currently in.</p>
                                    <div class="command-hint">
                                        <strong>Hint:</strong> pwd stands for "print working directory"
                                    </div>
                                </div>
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Practice Terminal</div>
                                        <div class="terminal-controls">
                                            <button class="terminal-control-btn" onclick="clearTerminal('practice-pwd')">Clear</button>
                                            <button class="terminal-control-btn" onclick="showHint('hint-pwd')">Hint</button>
                                        </div>
                                    </div>
                                    <div class="terminal-body" id="practice-pwd">
                                        <div class="terminal-line">
                                            <span class="terminal-comment"># Try: pwd</span>
                                        </div>
                                        <div class="terminal-input-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <input type="text" class="terminal-input" 
                                                   onkeypress="handleCommand(event, 'practice-pwd', 'nav-pwd')"
                                                   placeholder="Type pwd and press Enter">
                                            <span class="terminal-cursor">_</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="hint-box" id="hint-pwd">
                                    <strong>💡 Hint:</strong> Just type <code>pwd</code> and press Enter
                                </div>
                                <div class="challenge-status" id="challenge-nav-pwd">
                                    <div class="status-indicator current"></div>
                                    <span>Challenge: Use pwd command</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h4>ls - List Directory Contents</h4>
                    <div class="example-container">
                        <div class="example-header">
                            <h6 class="example-title">
                                <i class="bi bi-list-ul"></i>
                                List Files and Directories
                            </h6>
                        </div>
                        <div class="example-tabs">
                            <button class="example-tab active" onclick="switchExampleTab(this, 'demo')">
                                <i class="bi bi-display"></i>Demo
                            </button>
                            <button class="example-tab" onclick="switchExampleTab(this, 'practice')">
                                <i class="bi bi-keyboard"></i>Try It
                            </button>
                        </div>
                        <div class="example-content">
                            <div class="example-pane active" data-tab="demo">
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Demo Terminal</div>
                                        <div></div>
                                    </div>
                                    <div class="terminal-body">
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <span class="terminal-command">ls</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-output">documents  downloads  pictures  projects</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <span class="terminal-command">ls -la</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-output">drwxr-xr-x  5 student student 4096 Jan 15 10:30 .</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-output">drwxr-xr-x  3 root    root    4096 Jan 10 09:15 ..</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-output">drwxr-xr-x  2 student student 4096 Jan 15 10:30 documents</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="example-pane" data-tab="practice">
                                <div class="practice-challenge">
                                    <h6>🎯 Multi-step Challenge: Explore listing options!</h6>
                                    <p>Complete these commands in order:</p>
                                    <ol>
                                        <li>Type <code>ls</code> to see basic file listing</li>
                                        <li>Type <code>ls -l</code> to see detailed listing</li>
                                        <li>Type <code>ls -la</code> to see hidden files too</li>
                                    </ol>
                                </div>
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Practice Terminal</div>
                                        <div class="terminal-controls">
                                            <button class="terminal-control-btn" onclick="clearTerminal('practice-ls')">Clear</button>
                                            <button class="terminal-control-btn" onclick="showHint('hint-ls')">Hint</button>
                                        </div>
                                    </div>
                                    <div class="terminal-body" id="practice-ls">
                                        <div class="terminal-line">
                                            <span class="terminal-comment"># Start with: ls</span>
                                        </div>
                                        <div class="terminal-input-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <input type="text" class="terminal-input" 
                                                   onkeypress="handleCommand(event, 'practice-ls', 'nav-ls')"
                                                   placeholder="Type ls commands...">
                                            <span class="terminal-cursor">_</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="hint-box" id="hint-ls">
                                    <strong>💡 Hint:</strong> 
                                    <ul class="mb-0 mt-2">
                                        <li><code>ls</code> - basic listing</li>
                                        <li><code>ls -l</code> - long format with details</li>
                                        <li><code>ls -la</code> - long format with hidden files</li>
                                    </ul>
                                </div>
                                <div class="challenge-status" id="challenge-nav-ls">
                                    <div class="status-indicator current"></div>
                                    <span>Challenge: Use ls commands (0/3 completed)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- File Operations -->
                <section id="file-operations" class="content-section">
                    <div class="d-flex align-items-center mb-4">
                        <h2 class="mb-0">File Operations</h2>
                        <span class="badge bg-warning ms-3 badge-level">Intermediate</span>
                    </div>

                    <h4>Creating Files and Directories</h4>
                    <div class="example-container">
                        <div class="example-header">
                            <h6 class="example-title">
                                <i class="bi bi-file-plus"></i>
                                touch, mkdir - Create Files and Directories
                            </h6>
                        </div>
                        <div class="example-tabs">
                            <button class="example-tab active" onclick="switchExampleTab(this, 'demo')">
                                <i class="bi bi-display"></i>Demo
                            </button>
                            <button class="example-tab" onclick="switchExampleTab(this, 'practice')">
                                <i class="bi bi-keyboard"></i>Try It
                            </button>
                        </div>
                        <div class="example-content">
                            <div class="example-pane active" data-tab="demo">
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Demo Terminal</div>
                                        <div></div>
                                    </div>
                                    <div class="terminal-body">
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <span class="terminal-command">mkdir my-project</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <span class="terminal-command">touch README.md</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <span class="terminal-command">ls -l</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-output">drwxr-xr-x 2 student student 4096 Jan 15 10:45 my-project</span>
                                        </div>
                                        <div class="terminal-line">
                                            <span class="terminal-output">-rw-r--r-- 1 student student    0 Jan 15 10:45 README.md</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="example-pane" data-tab="practice">
                                <div class="practice-challenge">
                                    <h6>🎯 Project Setup Challenge!</h6>
                                    <p>Let's create a project structure:</p>
                                    <ol>
                                        <li>Create a directory called <code>my-website</code></li>
                                        <li>Create a file called <code>index.html</code></li>
                                        <li>List the files to see your work</li>
                                    </ol>
                                </div>
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Practice Terminal</div>
                                        <div class="terminal-controls">
                                            <button class="terminal-control-btn" onclick="clearTerminal('practice-files')">Clear</button>
                                            <button class="terminal-control-btn" onclick="showHint('hint-files')">Hint</button>
                                        </div>
                                    </div>
                                    <div class="terminal-body" id="practice-files">
                                        <div class="terminal-line">
                                            <span class="terminal-comment"># Start with: mkdir my-website</span>
                                        </div>
                                        <div class="terminal-input-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <input type="text" class="terminal-input" 
                                                   onkeypress="handleCommand(event, 'practice-files', 'file-create')"
                                                   placeholder="Create your project...">
                                            <span class="terminal-cursor">_</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="hint-box" id="hint-files">
                                    <strong>💡 Commands you need:</strong>
                                    <ul class="mb-0 mt-2">
                                        <li><code>mkdir my-website</code> - create directory</li>
                                        <li><code>touch index.html</code> - create file</li>
                                        <li><code>ls -l</code> - list files with details</li>
                                    </ul>
                                </div>
                                <div class="challenge-status" id="challenge-file-create">
                                    <div class="status-indicator current"></div>
                                    <span>Challenge: Create project structure (0/3 completed)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Text Processing -->
                <section id="text-processing" class="content-section">
                    <div class="d-flex align-items-center mb-4">
                        <h2 class="mb-0">Text Processing</h2>
                        <span class="badge bg-info ms-3 badge-level">Intermediate</span>
                    </div>

                    <h4>Reading Files</h4>
                    <div class="example-container">
                        <div class="example-header">
                            <h6 class="example-title">
                                <i class="bi bi-file-text"></i>
                                cat, echo - Working with Text
                            </h6>
                        </div>
                        <div class="example-tabs">
                            <button class="example-tab active" onclick="switchExampleTab(this, 'practice')">
                                <i class="bi bi-keyboard"></i>Try It
                            </button>
                        </div>
                        <div class="example-content">
                            <div class="example-pane active" data-tab="practice">
                                <div class="practice-challenge">
                                    <h6>🎯 Text Processing Challenge!</h6>
                                    <p>Let's work with text content:</p>
                                    <ol>
                                        <li>Use <code>echo "Hello World" > greeting.txt</code> to create a file with content</li>
                                        <li>Use <code>cat greeting.txt</code> to read the file</li>
                                        <li>Use <code>echo "Welcome to Terminal!" >> greeting.txt</code> to append more text</li>
                                        <li>Use <code>cat greeting.txt</code> again to see both lines</li>
                                    </ol>
                                </div>
                                <div class="interactive-terminal">
                                    <div class="terminal-header">
                                        <div class="terminal-dots">
                                            <div class="terminal-dot red"></div>
                                            <div class="terminal-dot yellow"></div>
                                            <div class="terminal-dot green"></div>
                                        </div>
                                        <div class="terminal-title">Practice Terminal</div>
                                        <div class="terminal-controls">
                                            <button class="terminal-control-btn" onclick="clearTerminal('practice-text')">Clear</button>
                                            <button class="terminal-control-btn" onclick="showHint('hint-text')">Hint</button>
                                        </div>
                                    </div>
                                    <div class="terminal-body" id="practice-text">
                                        <div class="terminal-line">
                                            <span class="terminal-comment"># Try: echo "Hello World" > greeting.txt</span>
                                        </div>
                                        <div class="terminal-input-line">
                                            <span class="terminal-prompt">student@learning:~$</span>
                                            <input type="text" class="terminal-input" 
                                                   onkeypress="handleCommand(event, 'practice-text', 'text-processing')"
                                                   placeholder="Work with text files...">
                                            <span class="terminal-cursor">_</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="hint-box" id="hint-text">
                                    <strong>💡 Text commands:</strong>
                                    <ul class="mb-0 mt-2">
                                        <li><code>echo "text" > file</code> - write to file (overwrites)</li>
                                        <li><code>echo "text" >> file</code> - append to file</li>
                                        <li><code>cat filename</code> - display file contents</li>
                                    </ul>
                                </div>
                                <div class="challenge-status" id="challenge-text-processing">
                                    <div class="status-indicator current"></div>
                                    <span>Challenge: Text file operations (0/4 completed)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Practice Terminal -->
                <section id="practice-terminal" class="content-section">
                    <div class="d-flex align-items-center mb-4">
                        <h2 class="mb-0">Free Practice Terminal</h2>
                        <span class="badge bg-success ms-3 badge-level">All Levels</span>
                    </div>
                    
                    <p class="lead">Practice any commands you've learned! This is your free-form terminal to experiment with.</p>

                    <div class="interactive-terminal" style="min-height: 500px;">
                        <div class="terminal-header">
                            <div class="terminal-dots">
                                <div class="terminal-dot red"></div>
                                <div class="terminal-dot yellow"></div>
                                <div class="terminal-dot green"></div>
                            </div>
                            <div class="terminal-title">Free Practice Terminal</div>
                            <div class="terminal-controls">
                                <button class="terminal-control-btn" onclick="clearTerminal('free-practice')">Clear</button>
                                <button class="terminal-control-btn" onclick="showCommands()">Commands</button>
                            </div>
                        </div>
                        <div class="terminal-body" style="min-height: 450px;" id="free-practice">
                            <div class="terminal-line">
                                <span class="terminal-comment"># Free practice! Try any commands you've learned</span>
                            </div>
                            <div class="terminal-line">
                                <span class="terminal-comment"># Available: pwd, ls, mkdir, touch, echo, cat, cd</span>
                            </div>
                            <div class="terminal-input-line">
                                <span class="terminal-prompt">student@learning:~$</span>
                                <input type="text" class="terminal-input" 
                                       onkeypress="handleCommand(event, 'free-practice', 'free')"
                                       placeholder="Try any command...">
                                <span class="terminal-cursor">_</span>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="best-practice">
                                <h6><i class="bi bi-check-circle text-success me-2"></i>Commands You've Learned</h6>
                                <ul class="mb-0">
                                    <li><code>pwd</code> - show current directory</li>
                                    <li><code>ls</code> - list files and directories</li>
                                    <li><code>mkdir</code> - create directories</li>
                                    <li><code>touch</code> - create files</li>
                                    <li><code>echo</code> - display text</li>
                                    <li><code>cat</code> - read file contents</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="warning-box">
                                <h6><i class="bi bi-lightbulb text-warning me-2"></i>Try These Combinations</h6>
                                <ul class="mb-0">
                                    <li><code>mkdir test && cd test</code></li>
                                    <li><code>echo "content" > file.txt && cat file.txt</code></li>
                                    <li><code>ls -la | head -5</code></li>
                                    <li><code>find . -name "*.txt"</code></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        // Virtual File System
        let virtualFS = {
            '/home/student': {
                type: 'directory',
                contents: {
                    'documents': { type: 'directory', contents: {} },
                    'downloads': { type: 'directory', contents: {} },
                    'pictures': { type: 'directory', contents: {} },
                    'projects': { type: 'directory', contents: {} }
                }
            }
        };

        let currentPath = '/home/student';
        let commandHistory = {};
        let challengeProgress = {
            'getting-started-1': false,
            'nav-pwd': false,
            'nav-ls': 0, // This will track 0-3 for the multi-step challenge
            'file-create': 0, // 0-3 for the multi-step challenge
            'text-processing': 0 // 0-4 for the text processing challenge
        };

        // Command handlers
        function handleCommand(event, terminalId, challengeId) {
            if (event.key === 'Enter') {
                const input = event.target;
                const command = input.value.trim();
                const terminalBody = document.getElementById(terminalId);
                
                // Add command to terminal display
                addCommandLine(terminalBody, command);
                
                // Process the command
                const result = processCommand(command, terminalId, challengeId);
                
                if (result.output) {
                    addOutputLine(terminalBody, result.output, result.type || 'output');
                }
                
                // Clear input and create new input line
                input.value = '';
                addNewInputLine(terminalBody, terminalId, challengeId);
                
                // Remove the old input line
                input.closest('.terminal-input-line').remove();
                
                // Scroll to bottom
                terminalBody.scrollTop = terminalBody.scrollHeight;
                
                // Focus new input
                const newInput = terminalBody.querySelector('.terminal-input');
                if (newInput) newInput.focus();
                
                // Update progress if applicable
                if (challengeId !== 'free') {
                    updateProgress(challengeId, command, result.success);
                }
            }
        }

        function handleHeroCommand(event) {
            if (event.key === 'Enter') {
                const input = event.target;
                const command = input.value.trim();
                const terminalBody = document.getElementById('hero-terminal');
                
                // Add command to terminal display
                addCommandLine(terminalBody, command);
                
                // Process the command
                const result = processCommand(command, 'hero-terminal', 'hero');
                
                if (result.output) {
                    addOutputLine(terminalBody, result.output, result.type || 'output');
                }
                
                // Clear input
                input.value = '';
                
                // Add new input line
                addNewInputLine(terminalBody, 'hero-terminal', 'hero');
                
                // Scroll to bottom
                terminalBody.scrollTop = terminalBody.scrollHeight;
                
                // Focus new input
                const newInput = terminalBody.querySelector('.terminal-input');
                if (newInput) newInput.focus();
            }
        }

        function processCommand(command, terminalId, challengeId) {
            const parts = command.split(' ');
            const cmd = parts[0].toLowerCase();
            
            switch (cmd) {
                case 'pwd':
                    return { output: currentPath, success: true };
                    
                case 'ls':
                    return handleLsCommand(parts);
                    
                case 'mkdir':
                    return handleMkdirCommand(parts);
                    
                case 'touch':
                    return handleTouchCommand(parts);
                    
                case 'echo':
                    return handleEchoCommand(parts, command);
                    
                case 'cat':
                    return handleCatCommand(parts);
                    
                case 'cd':
                    return handleCdCommand(parts);
                    
                case 'clear':
                    clearTerminal(terminalId);
                    return { output: '', success: true };
                    
                case 'help':
                    return { 
                        output: 'Available commands: pwd, ls, mkdir, touch, echo, cat, cd, clear, help',
                        success: true 
                    };
                    
                default:
                    if (command.trim() === '') {
                        return { output: '', success: true };
                    }
                    return { 
                        output: `Command not found: ${cmd}. Type 'help' for available commands.`,
                        type: 'error',
                        success: false 
                    };
            }
        }

        function handleLsCommand(parts) {
            const currentDir = getDirectoryAtPath(currentPath);
            if (!currentDir) {
                return { output: 'Directory not found', type: 'error', success: false };
            }
            
            const hasLongFlag = parts.includes('-l') || parts.includes('-la');
            const hasAllFlag = parts.includes('-a') || parts.includes('-la');
            
            let files = Object.keys(currentDir.contents);
            
            if (hasAllFlag) {
                files = ['.', '..', ...files];
            }
            
            if (hasLongFlag) {
                let output = '';
                if (hasAllFlag) {
                    output += 'drwxr-xr-x  5 student student 4096 Jan 15 10:30 .\n';
                    output += 'drwxr-xr-x  3 root    root    4096 Jan 10 09:15 ..\n';
                }
                
                files.filter(f => f !== '.' && f !== '..').forEach(file => {
                    const item = currentDir.contents[file];
                    const type = item.type === 'directory' ? 'd' : '-';
                    const permissions = item.type === 'directory' ? 'rwxr-xr-x' : 'rw-r--r--';
                    const size = item.type === 'directory' ? '4096' : (item.content ? item.content.length : '0');
                    output += `${type}${permissions} 1 student student ${size.padStart(4)} Jan 15 10:45 ${file}\n`;
                });
                
                return { output: output.trim(), success: true };
            } else {
                return { output: files.filter(f => f !== '.' && f !== '..').join('  '), success: true };
            }
        }

        function handleMkdirCommand(parts) {
            if (parts.length < 2) {
                return { output: 'mkdir: missing operand', type: 'error', success: false };
            }
            
            const dirName = parts[1];
            const currentDir = getDirectoryAtPath(currentPath);
            
            if (currentDir.contents[dirName]) {
                return { output: `mkdir: cannot create directory '${dirName}': File exists`, type: 'error', success: false };
            }
            
            currentDir.contents[dirName] = { type: 'directory', contents: {} };
            return { output: '', success: true };
        }

        function handleTouchCommand(parts) {
            if (parts.length < 2) {
                return { output: 'touch: missing operand', type: 'error', success: false };
            }
            
            const fileName = parts[1];
            const currentDir = getDirectoryAtPath(currentPath);
            
            if (!currentDir.contents[fileName]) {
                currentDir.contents[fileName] = { type: 'file', content: '' };
            }
            
            return { output: '', success: true };
        }

        function handleEchoCommand(parts, fullCommand) {
            // Handle echo with redirection
            if (fullCommand.includes(' > ') || fullCommand.includes(' >> ')) {
                const isAppend = fullCommand.includes(' >> ');
                const redirectOperator = isAppend ? ' >> ' : ' > ';
                const [textPart, filePart] = fullCommand.split(redirectOperator);
                
                // Extract text content (remove echo command and quotes)
                let text = textPart.replace(/^echo\s+/, '').trim();
                if ((text.startsWith('"') && text.endsWith('"')) || 
                    (text.startsWith("'") && text.endsWith("'"))) {
                    text = text.slice(1, -1);
                }
                
                const fileName = filePart.trim();
                const currentDir = getDirectoryAtPath(currentPath);
                
                if (isAppend && currentDir.contents[fileName]) {
                    currentDir.contents[fileName].content += '\n' + text;
                } else {
                    currentDir.contents[fileName] = { type: 'file', content: text };
                }
                
                return { output: '', success: true };
            } else {
                // Regular echo command
                let text = parts.slice(1).join(' ');
                if ((text.startsWith('"') && text.endsWith('"')) || 
                    (text.startsWith("'") && text.endsWith("'"))) {
                    text = text.slice(1, -1);
                }
                return { output: text, success: true };
            }
        }

        function handleCatCommand(parts) {
            if (parts.length < 2) {
                return { output: 'cat: missing operand', type: 'error', success: false };
            }
            
            const fileName = parts[1];
            const currentDir = getDirectoryAtPath(currentPath);
            const file = currentDir.contents[fileName];
            
            if (!file) {
                return { output: `cat: ${fileName}: No such file or directory`, type: 'error', success: false };
            }
            
            if (file.type === 'directory') {
                return { output: `cat: ${fileName}: Is a directory`, type: 'error', success: false };
            }
            
            return { output: file.content || '', success: true };
        }

        function handleCdCommand(parts) {
            if (parts.length === 1 || parts[1] === '~') {
                currentPath = '/home/student';
                return { output: '', success: true };
            }
            
            const targetDir = parts[1];
            
            if (targetDir === '..') {
                const pathParts = currentPath.split('/').filter(p => p);
                if (pathParts.length > 2) { // Don't go above /home/student
                    pathParts.pop();
                    currentPath = '/' + pathParts.join('/');
                }
                return { output: '', success: true };
            }
            
            const currentDir = getDirectoryAtPath(currentPath);
            if (currentDir.contents[targetDir] && currentDir.contents[targetDir].type === 'directory') {
                currentPath = currentPath + (currentPath.endsWith('/') ? '' : '/') + targetDir;
                return { output: '', success: true };
            } else {
                return { output: `cd: ${targetDir}: No such file or directory`, type: 'error', success: false };
            }
        }

        function getDirectoryAtPath(path) {
            const parts = path.split('/').filter(p => p);
            let current = virtualFS['/home/student'];
            
            for (let i = 2; i < parts.length; i++) { // Skip 'home' and 'student'
                if (current.contents[parts[i]]) {
                    current = current.contents[parts[i]];
                } else {
                    return null;
                }
            }
            
            return current;
        }

        function addCommandLine(terminalBody, command) {
            const line = document.createElement('div');
            line.className = 'terminal-line';
            line.innerHTML = `
                <span class="terminal-prompt">student@learning:~$</span>
                <span class="terminal-command">${command}</span>
            `;
            terminalBody.appendChild(line);
        }

        function addOutputLine(terminalBody, output, type = 'output') {
            if (output) {
                const line = document.createElement('div');
                line.className = 'terminal-line';
                const className = type === 'error' ? 'terminal-error' : 
                                type === 'success' ? 'terminal-success' : 'terminal-output';
                line.innerHTML = `<span class="${className}">${output}</span>`;
                terminalBody.appendChild(line);
            }
        }

        function addNewInputLine(terminalBody, terminalId, challengeId) {
            const inputLine = document.createElement('div');
            inputLine.className = 'terminal-input-line';
            inputLine.innerHTML = `
                <span class="terminal-prompt">student@learning:~$</span>
                <input type="text" class="terminal-input" 
                       onkeypress="handleCommand(event, '${terminalId}', '${challengeId}')"
                       placeholder="Type your command...">
                <span class="terminal-cursor">_</span>
            `;
            terminalBody.appendChild(inputLine);
        }

        function updateProgress(challengeId, command, success) {
            if (!success) return;
            
            switch (challengeId) {
                case 'getting-started-1':
                    if (command.includes('echo') && command.includes('Hello World')) {
                        challengeProgress[challengeId] = true;
                        updateChallengeStatus(challengeId, 'completed', 'Challenge completed! ✅');
                        showToast('Great job! You used the echo command successfully!', 'success');
                    }
                    break;
                    
                case 'nav-pwd':
                    if (command === 'pwd') {
                        challengeProgress[challengeId] = true;
                        updateChallengeStatus(challengeId, 'completed', 'Challenge completed! ✅');
                        showToast('Excellent! You found your current directory!', 'success');
                    }
                    break;
                    
                case 'nav-ls':
                    let lsCommands = ['ls', 'ls -l', 'ls -la'];
                    if (lsCommands.includes(command)) {
                        challengeProgress[challengeId]++;
                        const completed = challengeProgress[challengeId];
                        updateChallengeStatus(challengeId, completed === 3 ? 'completed' : 'current', 
                            `Challenge: Use ls commands (${completed}/3 completed)`);
                        
                        if (completed === 3) {
                            showToast('Amazing! You mastered all ls variations!', 'success');
                            document.getElementById('nav-status').classList.add('completed');
                            updateOverallProgress();
                        }
                    }
                    break;
                    
                case 'file-create':
                    let fileCommands = ['mkdir my-website', 'touch index.html', 'ls -l'];
                    if (fileCommands.includes(command)) {
                        challengeProgress[challengeId]++;
                        const completed = challengeProgress[challengeId];
                        updateChallengeStatus(challengeId, completed === 3 ? 'completed' : 'current',
                            `Challenge: Create project structure (${completed}/3 completed)`);
                        
                        if (completed === 3) {
                            showToast('Fantastic! You created a complete project structure!', 'success');
                            document.getElementById('file-status').classList.add('completed');
                            updateOverallProgress();
                        }
                    }
                    break;
                    
                case 'text-processing':
                    let textCommands = [
                        'echo "Hello World" > greeting.txt',
                        'cat greeting.txt',
                        'echo "Welcome to Terminal!" >> greeting.txt'
                    ];
                    
                    let matched = false;
                    textCommands.forEach((cmd, index) => {
                        if (command.includes(cmd.split(' ')[0]) && 
                            (command.includes('greeting.txt') || command === 'cat greeting.txt')) {
                            matched = true;
                        }
                    });
                    
                    if (matched) {
                        challengeProgress[challengeId]++;
                        const completed = challengeProgress[challengeId];
                        updateChallengeStatus(challengeId, completed === 4 ? 'completed' : 'current',
                            `Challenge: Text file operations (${completed}/4 completed)`);
                        
                        if (completed === 4) {
                            showToast('Outstanding! You mastered text file operations!', 'success');
                            document.getElementById('text-status').classList.add('completed');
                            updateOverallProgress();
                        }
                    }
                    break;
            }
        }

        function updateChallengeStatus(challengeId, status, text) {
            const statusElement = document.getElementById(`challenge-${challengeId}`);
            if (statusElement) {
                const indicator = statusElement.querySelector('.status-indicator');
                indicator.className = `status-indicator ${status}`;
                statusElement.querySelector('span').textContent = text;
            }
        }

        function updateOverallProgress() {
            const completedSections = [
                document.getElementById('nav-status').classList.contains('completed'),
                document.getElementById('file-status').classList.contains('completed'),
                document.getElementById('text-status').classList.contains('completed')
            ].filter(Boolean).length;
            
            const percentage = Math.round((completedSections / 3) * 100);
            document.getElementById('overall-progress').style.width = `${percentage}%`;
            document.getElementById('progress-text').textContent = `${percentage}% Complete`;
        }

        // UI Helper Functions
        function switchExampleTab(button, tabName) {
            const container = button.closest('.example-container');
            const tabs = container.querySelectorAll('.example-tab');
            const panes = container.querySelectorAll('.example-pane');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            panes.forEach(pane => pane.classList.remove('active'));
            
            button.classList.add('active');
            container.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // Focus on input if switching to practice tab
            if (tabName === 'practice') {
                setTimeout(() => {
                    const input = container.querySelector('.terminal-input');
                    if (input) input.focus();
                }, 100);
            }
        }

        function clearTerminal(terminalId) {
            const terminal = document.getElementById(terminalId);
            const isHero = terminalId === 'hero-terminal';
            
            if (isHero) {
                terminal.innerHTML = `
                    <div class="terminal-line">
                        <span class="terminal-comment"># Try typing: pwd</span>
                    </div>
                    <div class="terminal-input-line">
                        <span class="terminal-prompt">student@learning:~$</span>
                        <input type="text" class="terminal-input" id="hero-input" 
                               placeholder="Type a command..." onkeypress="handleHeroCommand(event)">
                        <span class="terminal-cursor">_</span>
                    </div>
                `;
            } else {
                // Find the challenge ID from the existing input
                const existingInput = terminal.querySelector('.terminal-input');
                const onkeypress = existingInput ? existingInput.getAttribute('onkeypress') : '';
                const challengeId = onkeypress.match(/'([^']*)'.*'([^']*)'/)?.[2] || 'free';
                
                terminal.innerHTML = `
                    <div class="terminal-line">
                        <span class="terminal-comment"># Terminal cleared</span>
                    </div>
                    <div class="terminal-input-line">
                        <span class="terminal-prompt">student@learning:~$</span>
                        <input type="text" class="terminal-input" 
                               onkeypress="handleCommand(event, '${terminalId}', '${challengeId}')"
                               placeholder="Type your command...">
                        <span class="terminal-cursor">_</span>
                    </div>
                `;
            }
            
            // Focus the new input
            const newInput = terminal.querySelector('.terminal-input');
            if (newInput) newInput.focus();
        }

        function clearHeroTerminal() {
            clearTerminal('hero-terminal');
        }

        function showHint(hintId) {
            const hint = document.getElementById(hintId);
            if (hint) {
                hint.classList.toggle('show');
            }
        }

        function showCommands() {
            showToast('Available commands: pwd, ls, mkdir, touch, echo, cat, cd, clear, help', 'info');
        }

        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast-custom';
            
            const iconMap = {
                success: 'bi-check-circle-fill text-success',
                error: 'bi-x-circle-fill text-danger',
                warning: 'bi-exclamation-triangle-fill text-warning',
                info: 'bi-info-circle-fill text-info'
            };
            
            toast.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="bi ${iconMap[type]} me-2"></i>
                    <span>${message}</span>
                    <button class="btn-close ms-auto" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;
            
            container.appendChild(toast);
            
            // Show toast
            setTimeout(() => toast.classList.add('show'), 100);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 5000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Focus the hero terminal input
            const heroInput = document.getElementById('hero-input');
            if (heroInput) heroInput.focus();
            
            // Set up navigation
            updateActiveNavigation();
            
            // Welcome message
            setTimeout(() => {
                showToast('Welcome to Interactive Terminal Learning! Click any terminal to start typing.', 'info');
            }, 1000);
        });

        function updateActiveNavigation() {
            const navLinks = document.querySelectorAll('.guide-nav .nav-link');
            const sections = document.querySelectorAll('.content-section');
            
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 150;
                    if (scrollY >= sectionTop) {
                        current = section.getAttribute('id');
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${current}`) {
                        link.classList.add('active');
                    }
                });
            });
        }
    </script>
    <!-- ADD THIS: Dark Mode JavaScript -->
<script>
// Dark mode functionality
(function() {
    'use strict';
    
    const THEME_KEY = 'theme';
    const DARK_MODE_CLASS = 'dark-mode';
    const THEMES = {
        LIGHT: 'light',
        DARK: 'dark'
    };
    
    // Cache DOM elements
    let themeToggle = null;
    let sunIcon = null;
    let moonIcon = null;
    
    function updateIcons(isDarkMode) {
        if (sunIcon && moonIcon) {
            sunIcon.style.display = isDarkMode ? 'inline-block' : 'none';
            moonIcon.style.display = isDarkMode ? 'none' : 'inline-block';
        }
    }
    
    function getCurrentTheme() {
        const savedTheme = localStorage.getItem(THEME_KEY);
        
        if (savedTheme === THEMES.DARK || savedTheme === THEMES.LIGHT) {
            return savedTheme;
        }
        
        return window.matchMedia('(prefers-color-scheme: dark)').matches 
            ? THEMES.DARK 
            : THEMES.LIGHT;
    }
    
    function applyTheme(theme) {
        const isDarkMode = theme === THEMES.DARK;
        
        if (isDarkMode) {
            document.body.classList.add(DARK_MODE_CLASS);
        } else {
            document.body.classList.remove(DARK_MODE_CLASS);
        }
        
        localStorage.setItem(THEME_KEY, theme);
        updateIcons(isDarkMode);
        
        // Show toast if showToast function exists
        if (typeof showToast === 'function') {
            showToast(`Switched to ${theme} mode`, 'info');
        }
    }
    
    function toggleTheme() {
        const currentTheme = getCurrentTheme();
        const newTheme = currentTheme === THEMES.DARK ? THEMES.LIGHT : THEMES.DARK;
        applyTheme(newTheme);
    }
    
    function initializeTheme() {
        const currentTheme = getCurrentTheme();
        applyTheme(currentTheme);
        
        themeToggle = document.getElementById('theme-toggle');
        sunIcon = document.getElementById('theme-toggle-sun');
        moonIcon = document.getElementById('theme-toggle-moon');
        
        if (themeToggle) {
            themeToggle.addEventListener('click', toggleTheme);
            
            themeToggle.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleTheme();
                }
            });
            
            const isDarkMode = document.body.classList.contains(DARK_MODE_CLASS);
            updateIcons(isDarkMode);
        }
        
        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        mediaQuery.addEventListener('change', function(e) {
            const savedTheme = localStorage.getItem(THEME_KEY);
            if (!savedTheme) {
                applyTheme(e.matches ? THEMES.DARK : THEMES.LIGHT);
            }
        });
    }
    
    window.ThemeManager = {
        getCurrentTheme: getCurrentTheme,
        applyTheme: applyTheme,
        toggleTheme: toggleTheme,
        isDarkMode: function() {
            return document.body.classList.contains(DARK_MODE_CLASS);
        }
    };
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeTheme);
    } else {
        initializeTheme();
    }
    // ADD THIS: Keyboard shortcut for theme toggle
document.addEventListener('keydown', function(e) {
    // Ctrl/Cmd + D to toggle dark mode
    if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
        e.preventDefault();
        if (window.ThemeManager) {
            window.ThemeManager.toggleTheme();
        }
    }
});
    
})();
</script>
</body>
</html>